var hI=Object.defineProperty;var fI=(t,e,n)=>e in t?hI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rn=(t,e,n)=>fI(t,typeof e!="symbol"?e+"":e,n);function pI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function mI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I_={exports:{}},Mu={},S_={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fa=Symbol.for("react.element"),gI=Symbol.for("react.portal"),yI=Symbol.for("react.fragment"),vI=Symbol.for("react.strict_mode"),_I=Symbol.for("react.profiler"),wI=Symbol.for("react.provider"),xI=Symbol.for("react.context"),EI=Symbol.for("react.forward_ref"),TI=Symbol.for("react.suspense"),II=Symbol.for("react.memo"),SI=Symbol.for("react.lazy"),bg=Symbol.iterator;function bI(t){return t===null||typeof t!="object"?null:(t=bg&&t[bg]||t["@@iterator"],typeof t=="function"?t:null)}var b_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C_=Object.assign,N_={};function Ni(t,e,n){this.props=t,this.context=e,this.refs=N_,this.updater=n||b_}Ni.prototype.isReactComponent={};Ni.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ni.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function k_(){}k_.prototype=Ni.prototype;function gf(t,e,n){this.props=t,this.context=e,this.refs=N_,this.updater=n||b_}var yf=gf.prototype=new k_;yf.constructor=gf;C_(yf,Ni.prototype);yf.isPureReactComponent=!0;var Cg=Array.isArray,A_=Object.prototype.hasOwnProperty,vf={current:null},R_={key:!0,ref:!0,__self:!0,__source:!0};function P_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)A_.call(e,r)&&!R_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:fa,type:t,key:i,ref:o,props:s,_owner:vf.current}}function CI(t,e){return{$$typeof:fa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _f(t){return typeof t=="object"&&t!==null&&t.$$typeof===fa}function NI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ng=/\/+/g;function ed(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NI(""+t.key):e.toString(36)}function Sl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fa:case gI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ed(o,0):r,Cg(s)?(n="",t!=null&&(n=t.replace(Ng,"$&/")+"/"),Sl(s,e,n,"",function(d){return d})):s!=null&&(_f(s)&&(s=CI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ng,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Cg(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+ed(i,a);o+=Sl(i,e,n,u,s)}else if(u=bI(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+ed(i,a++),o+=Sl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ja(t,e,n){if(t==null)return t;var r=[],s=0;return Sl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function kI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},bl={transition:null},AI={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:bl,ReactCurrentOwner:vf};function j_(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Ja,forEach:function(t,e,n){Ja(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ja(t,function(){e++}),e},toArray:function(t){return Ja(t,function(e){return e})||[]},only:function(t){if(!_f(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=Ni;Z.Fragment=yI;Z.Profiler=_I;Z.PureComponent=gf;Z.StrictMode=vI;Z.Suspense=TI;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AI;Z.act=j_;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=C_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=vf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)A_.call(e,u)&&!R_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:fa,type:t.type,key:s,ref:i,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:xI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wI,_context:t},t.Consumer=t};Z.createElement=P_;Z.createFactory=function(t){var e=P_.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:EI,render:t}};Z.isValidElement=_f;Z.lazy=function(t){return{$$typeof:SI,_payload:{_status:-1,_result:t},_init:kI}};Z.memo=function(t,e){return{$$typeof:II,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=bl.transition;bl.transition={};try{t()}finally{bl.transition=e}};Z.unstable_act=j_;Z.useCallback=function(t,e){return wt.current.useCallback(t,e)};Z.useContext=function(t){return wt.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};Z.useEffect=function(t,e){return wt.current.useEffect(t,e)};Z.useId=function(){return wt.current.useId()};Z.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return wt.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};Z.useRef=function(t){return wt.current.useRef(t)};Z.useState=function(t){return wt.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return wt.current.useTransition()};Z.version="18.3.1";S_.exports=Z;var C=S_.exports;const yt=mI(C),RI=pI({__proto__:null,default:yt},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI=C,jI=Symbol.for("react.element"),DI=Symbol.for("react.fragment"),OI=Object.prototype.hasOwnProperty,LI=PI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VI={key:!0,ref:!0,__self:!0,__source:!0};function D_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)OI.call(e,r)&&!VI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jI,type:t,key:i,ref:o,props:s,_owner:LI.current}}Mu.Fragment=DI;Mu.jsx=D_;Mu.jsxs=D_;I_.exports=Mu;var c=I_.exports,O_={exports:{}},Ut={},L_={exports:{}},V_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var J=B.length;B.push(K);e:for(;0<J;){var we=J-1>>>1,ce=B[we];if(0<s(ce,K))B[we]=K,B[J]=ce,J=we;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],J=B.pop();if(J!==K){B[0]=J;e:for(var we=0,ce=B.length,Ae=ce>>>1;we<Ae;){var An=2*(we+1)-1,Rn=B[An],Pn=An+1,jn=B[Pn];if(0>s(Rn,J))Pn<ce&&0>s(jn,Rn)?(B[we]=jn,B[Pn]=J,we=Pn):(B[we]=Rn,B[An]=J,we=An);else if(Pn<ce&&0>s(jn,J))B[we]=jn,B[Pn]=J,we=Pn;else break e}}return K}function s(B,K){var J=B.sortIndex-K.sortIndex;return J!==0?J:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],d=[],f=1,m=null,g=3,v=!1,T=!1,A=!1,N=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=B)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function j(B){if(A=!1,I(B),!T)if(n(u)!==null)T=!0,tt(O);else{var K=n(d);K!==null&&Ve(j,K.startTime-B)}}function O(B,K){T=!1,A&&(A=!1,_(y),y=-1),v=!0;var J=g;try{for(I(K),m=n(u);m!==null&&(!(m.expirationTime>K)||B&&!R());){var we=m.callback;if(typeof we=="function"){m.callback=null,g=m.priorityLevel;var ce=we(m.expirationTime<=K);K=t.unstable_now(),typeof ce=="function"?m.callback=ce:m===n(u)&&r(u),I(K)}else r(u);m=n(u)}if(m!==null)var Ae=!0;else{var An=n(d);An!==null&&Ve(j,An.startTime-K),Ae=!1}return Ae}finally{m=null,g=J,v=!1}}var L=!1,E=null,y=-1,S=5,k=-1;function R(){return!(t.unstable_now()-k<S)}function P(){if(E!==null){var B=t.unstable_now();k=B;var K=!0;try{K=E(!0,B)}finally{K?b():(L=!1,E=null)}}else L=!1}var b;if(typeof w=="function")b=function(){w(P)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,fe=he.port2;he.port1.onmessage=P,b=function(){fe.postMessage(null)}}else b=function(){N(P,0)};function tt(B){E=B,L||(L=!0,b())}function Ve(B,K){y=N(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,tt(O))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var J=g;g=K;try{return B()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=g;g=B;try{return K()}finally{g=J}},t.unstable_scheduleCallback=function(B,K,J){var we=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?we+J:we):J=we,B){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=J+ce,B={id:f++,callback:K,priorityLevel:B,startTime:J,expirationTime:ce,sortIndex:-1},J>we?(B.sortIndex=J,e(d,B),n(u)===null&&B===n(d)&&(A?(_(y),y=-1):A=!0,Ve(j,J-we))):(B.sortIndex=ce,e(u,B),T||v||(T=!0,tt(O))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var K=g;return function(){var J=g;g=K;try{return B.apply(this,arguments)}finally{g=J}}}})(V_);L_.exports=V_;var MI=L_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI=C,Ft=MI;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M_=new Set,Uo={};function Ss(t,e){hi(t,e),hi(t+"Capture",e)}function hi(t,e){for(Uo[t]=e,t=0;t<e.length;t++)M_.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kd=Object.prototype.hasOwnProperty,UI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kg={},Ag={};function zI(t){return Kd.call(Ag,t)?!0:Kd.call(kg,t)?!1:UI.test(t)?Ag[t]=!0:(kg[t]=!0,!1)}function BI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $I(t,e,n,r){if(e===null||typeof e>"u"||BI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wf=/[\-:]([a-z])/g;function xf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wf,xf);Ze[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wf,xf);Ze[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wf,xf);Ze[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ef(t,e,n,r){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($I(e,n,s,r)&&(n=null),r||s===null?zI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var er=FI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Za=Symbol.for("react.element"),$s=Symbol.for("react.portal"),qs=Symbol.for("react.fragment"),Tf=Symbol.for("react.strict_mode"),Gd=Symbol.for("react.profiler"),F_=Symbol.for("react.provider"),U_=Symbol.for("react.context"),If=Symbol.for("react.forward_ref"),Qd=Symbol.for("react.suspense"),Yd=Symbol.for("react.suspense_list"),Sf=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),z_=Symbol.for("react.offscreen"),Rg=Symbol.iterator;function no(t){return t===null||typeof t!="object"?null:(t=Rg&&t[Rg]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,td;function fo(t){if(td===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);td=e&&e[1]||""}return`
`+td+t}var nd=!1;function rd(t,e){if(!t||nd)return"";nd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{nd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fo(t):""}function qI(t){switch(t.tag){case 5:return fo(t.type);case 16:return fo("Lazy");case 13:return fo("Suspense");case 19:return fo("SuspenseList");case 0:case 2:case 15:return t=rd(t.type,!1),t;case 11:return t=rd(t.type.render,!1),t;case 1:return t=rd(t.type,!0),t;default:return""}}function Xd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qs:return"Fragment";case $s:return"Portal";case Gd:return"Profiler";case Tf:return"StrictMode";case Qd:return"Suspense";case Yd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case U_:return(t.displayName||"Context")+".Consumer";case F_:return(t._context.displayName||"Context")+".Provider";case If:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sf:return e=t.displayName||null,e!==null?e:Xd(t.type)||"Memo";case lr:e=t._payload,t=t._init;try{return Xd(t(e))}catch{}}return null}function HI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xd(e);case 8:return e===Tf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WI(t){var e=B_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function el(t){t._valueTracker||(t._valueTracker=WI(t))}function $_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=B_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jd(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q_(t,e){e=e.checked,e!=null&&Ef(t,"checked",e,!1)}function Zd(t,e){q_(t,e);var n=jr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?eh(t,e.type,n):e.hasOwnProperty("defaultValue")&&eh(t,e.type,jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function eh(t,e,n){(e!=="number"||Wl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var po=Array.isArray;function ni(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function th(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(po(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jr(n)}}function H_(t,e){var n=jr(e.value),r=jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Og(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function W_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?W_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tl,K_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tl=tl||document.createElement("div"),tl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KI=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(t){KI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),To[e]=To[t]})});function G_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||To.hasOwnProperty(t)&&To[t]?(""+e).trim():e+"px"}function Q_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=G_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var GI=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rh(t,e){if(e){if(GI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function sh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ih=null;function bf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oh=null,ri=null,si=null;function Lg(t){if(t=ga(t)){if(typeof oh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=$u(e),oh(t.stateNode,t.type,e))}}function Y_(t){ri?si?si.push(t):si=[t]:ri=t}function X_(){if(ri){var t=ri,e=si;if(si=ri=null,Lg(t),e)for(t=0;t<e.length;t++)Lg(e[t])}}function J_(t,e){return t(e)}function Z_(){}var sd=!1;function e0(t,e,n){if(sd)return t(e,n);sd=!0;try{return J_(t,e,n)}finally{sd=!1,(ri!==null||si!==null)&&(Z_(),X_())}}function Bo(t,e){var n=t.stateNode;if(n===null)return null;var r=$u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var ah=!1;if(Wn)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){ah=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{ah=!1}function QI(t,e,n,r,s,i,o,a,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Io=!1,Kl=null,Gl=!1,lh=null,YI={onError:function(t){Io=!0,Kl=t}};function XI(t,e,n,r,s,i,o,a,u){Io=!1,Kl=null,QI.apply(YI,arguments)}function JI(t,e,n,r,s,i,o,a,u){if(XI.apply(this,arguments),Io){if(Io){var d=Kl;Io=!1,Kl=null}else throw Error(U(198));Gl||(Gl=!0,lh=d)}}function bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function t0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vg(t){if(bs(t)!==t)throw Error(U(188))}function ZI(t){var e=t.alternate;if(!e){if(e=bs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Vg(s),t;if(i===r)return Vg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function n0(t){return t=ZI(t),t!==null?r0(t):null}function r0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=r0(t);if(e!==null)return e;t=t.sibling}return null}var s0=Ft.unstable_scheduleCallback,Mg=Ft.unstable_cancelCallback,e2=Ft.unstable_shouldYield,t2=Ft.unstable_requestPaint,Pe=Ft.unstable_now,n2=Ft.unstable_getCurrentPriorityLevel,Cf=Ft.unstable_ImmediatePriority,i0=Ft.unstable_UserBlockingPriority,Ql=Ft.unstable_NormalPriority,r2=Ft.unstable_LowPriority,o0=Ft.unstable_IdlePriority,Fu=null,xn=null;function s2(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Fu,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:a2,i2=Math.log,o2=Math.LN2;function a2(t){return t>>>=0,t===0?32:31-(i2(t)/o2|0)|0}var nl=64,rl=4194304;function mo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=mo(a):(i&=o,i!==0&&(r=mo(i)))}else o=n&~s,o!==0?r=mo(o):i!==0&&(r=mo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),s=1<<n,r|=t[n],e&=~s;return r}function l2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-un(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=l2(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function uh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a0(){var t=nl;return nl<<=1,!(nl&4194240)&&(nl=64),t}function id(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function c2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-un(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function l0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var u0,kf,c0,d0,h0,ch=!1,sl=[],xr=null,Er=null,Tr=null,$o=new Map,qo=new Map,cr=[],d2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fg(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":$o.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(e.pointerId)}}function so(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ga(e),e!==null&&kf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function h2(t,e,n,r,s){switch(e){case"focusin":return xr=so(xr,t,e,n,r,s),!0;case"dragenter":return Er=so(Er,t,e,n,r,s),!0;case"mouseover":return Tr=so(Tr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return $o.set(i,so($o.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qo.set(i,so(qo.get(i)||null,t,e,n,r,s)),!0}return!1}function f0(t){var e=ts(t.target);if(e!==null){var n=bs(e);if(n!==null){if(e=n.tag,e===13){if(e=t0(n),e!==null){t.blockedOn=e,h0(t.priority,function(){c0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ih=r,n.target.dispatchEvent(r),ih=null}else return e=ga(n),e!==null&&kf(e),t.blockedOn=n,!1;e.shift()}return!0}function Ug(t,e,n){Cl(t)&&n.delete(e)}function f2(){ch=!1,xr!==null&&Cl(xr)&&(xr=null),Er!==null&&Cl(Er)&&(Er=null),Tr!==null&&Cl(Tr)&&(Tr=null),$o.forEach(Ug),qo.forEach(Ug)}function io(t,e){t.blockedOn===e&&(t.blockedOn=null,ch||(ch=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,f2)))}function Ho(t){function e(s){return io(s,t)}if(0<sl.length){io(sl[0],t);for(var n=1;n<sl.length;n++){var r=sl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&io(xr,t),Er!==null&&io(Er,t),Tr!==null&&io(Tr,t),$o.forEach(e),qo.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)f0(n),n.blockedOn===null&&cr.shift()}var ii=er.ReactCurrentBatchConfig,Xl=!0;function p2(t,e,n,r){var s=ae,i=ii.transition;ii.transition=null;try{ae=1,Af(t,e,n,r)}finally{ae=s,ii.transition=i}}function m2(t,e,n,r){var s=ae,i=ii.transition;ii.transition=null;try{ae=4,Af(t,e,n,r)}finally{ae=s,ii.transition=i}}function Af(t,e,n,r){if(Xl){var s=dh(t,e,n,r);if(s===null)md(t,e,r,Jl,n),Fg(t,r);else if(h2(s,t,e,n,r))r.stopPropagation();else if(Fg(t,r),e&4&&-1<d2.indexOf(t)){for(;s!==null;){var i=ga(s);if(i!==null&&u0(i),i=dh(t,e,n,r),i===null&&md(t,e,r,Jl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else md(t,e,r,null,n)}}var Jl=null;function dh(t,e,n,r){if(Jl=null,t=bf(r),t=ts(t),t!==null)if(e=bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=t0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jl=t,null}function p0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n2()){case Cf:return 1;case i0:return 4;case Ql:case r2:return 16;case o0:return 536870912;default:return 16}default:return 16}}var yr=null,Rf=null,Nl=null;function m0(){if(Nl)return Nl;var t,e=Rf,n=e.length,r,s="value"in yr?yr.value:yr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Nl=s.slice(t,1<r?1-r:void 0)}function kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function il(){return!0}function zg(){return!1}function zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?il:zg,this.isPropagationStopped=zg,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),e}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=zt(ki),ma=Te({},ki,{view:0,detail:0}),g2=zt(ma),od,ad,oo,Uu=Te({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oo&&(oo&&t.type==="mousemove"?(od=t.screenX-oo.screenX,ad=t.screenY-oo.screenY):ad=od=0,oo=t),od)},movementY:function(t){return"movementY"in t?t.movementY:ad}}),Bg=zt(Uu),y2=Te({},Uu,{dataTransfer:0}),v2=zt(y2),_2=Te({},ma,{relatedTarget:0}),ld=zt(_2),w2=Te({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),x2=zt(w2),E2=Te({},ki,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T2=zt(E2),I2=Te({},ki,{data:0}),$g=zt(I2),S2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=C2[t])?!!e[t]:!1}function jf(){return N2}var k2=Te({},ma,{key:function(t){if(t.key){var e=S2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?b2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jf,charCode:function(t){return t.type==="keypress"?kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A2=zt(k2),R2=Te({},Uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qg=zt(R2),P2=Te({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jf}),j2=zt(P2),D2=Te({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),O2=zt(D2),L2=Te({},Uu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),V2=zt(L2),M2=[9,13,27,32],Df=Wn&&"CompositionEvent"in window,So=null;Wn&&"documentMode"in document&&(So=document.documentMode);var F2=Wn&&"TextEvent"in window&&!So,g0=Wn&&(!Df||So&&8<So&&11>=So),Hg=" ",Wg=!1;function y0(t,e){switch(t){case"keyup":return M2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function U2(t,e){switch(t){case"compositionend":return v0(e);case"keypress":return e.which!==32?null:(Wg=!0,Hg);case"textInput":return t=e.data,t===Hg&&Wg?null:t;default:return null}}function z2(t,e){if(Hs)return t==="compositionend"||!Df&&y0(t,e)?(t=m0(),Nl=Rf=yr=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return g0&&e.locale!=="ko"?null:e.data;default:return null}}var B2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!B2[t.type]:e==="textarea"}function _0(t,e,n,r){Y_(r),e=Zl(e,"onChange"),0<e.length&&(n=new Pf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bo=null,Wo=null;function $2(t){A0(t,0)}function zu(t){var e=Gs(t);if($_(e))return t}function q2(t,e){if(t==="change")return e}var w0=!1;if(Wn){var ud;if(Wn){var cd="oninput"in document;if(!cd){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),cd=typeof Gg.oninput=="function"}ud=cd}else ud=!1;w0=ud&&(!document.documentMode||9<document.documentMode)}function Qg(){bo&&(bo.detachEvent("onpropertychange",x0),Wo=bo=null)}function x0(t){if(t.propertyName==="value"&&zu(Wo)){var e=[];_0(e,Wo,t,bf(t)),e0($2,e)}}function H2(t,e,n){t==="focusin"?(Qg(),bo=e,Wo=n,bo.attachEvent("onpropertychange",x0)):t==="focusout"&&Qg()}function W2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zu(Wo)}function K2(t,e){if(t==="click")return zu(e)}function G2(t,e){if(t==="input"||t==="change")return zu(e)}function Q2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:Q2;function Ko(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kd.call(e,s)||!dn(t[s],e[s]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,e){var n=Yg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yg(n)}}function E0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function T0(){for(var t=window,e=Wl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wl(t.document)}return e}function Of(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y2(t){var e=T0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&E0(n.ownerDocument.documentElement,n)){if(r!==null&&Of(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xg(n,i);var o=Xg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var X2=Wn&&"documentMode"in document&&11>=document.documentMode,Ws=null,hh=null,Co=null,fh=!1;function Jg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fh||Ws==null||Ws!==Wl(r)||(r=Ws,"selectionStart"in r&&Of(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Co&&Ko(Co,r)||(Co=r,r=Zl(hh,"onSelect"),0<r.length&&(e=new Pf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ws)))}function ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ks={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionend:ol("Transition","TransitionEnd")},dd={},I0={};Wn&&(I0=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Bu(t){if(dd[t])return dd[t];if(!Ks[t])return t;var e=Ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in I0)return dd[t]=e[n];return t}var S0=Bu("animationend"),b0=Bu("animationiteration"),C0=Bu("animationstart"),N0=Bu("transitionend"),k0=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){k0.set(t,e),Ss(e,[t])}for(var hd=0;hd<Zg.length;hd++){var fd=Zg[hd],J2=fd.toLowerCase(),Z2=fd[0].toUpperCase()+fd.slice(1);zr(J2,"on"+Z2)}zr(S0,"onAnimationEnd");zr(b0,"onAnimationIteration");zr(C0,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(N0,"onTransitionEnd");hi("onMouseEnter",["mouseout","mouseover"]);hi("onMouseLeave",["mouseout","mouseover"]);hi("onPointerEnter",["pointerout","pointerover"]);hi("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eS=new Set("cancel close invalid load scroll toggle".split(" ").concat(go));function ey(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,JI(r,e,void 0,t),t.currentTarget=null}function A0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;ey(s,a,d),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,d=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;ey(s,a,d),i=u}}}if(Gl)throw t=lh,Gl=!1,lh=null,t}function ge(t,e){var n=e[vh];n===void 0&&(n=e[vh]=new Set);var r=t+"__bubble";n.has(r)||(R0(e,t,2,!1),n.add(r))}function pd(t,e,n){var r=0;e&&(r|=4),R0(n,t,r,e)}var al="_reactListening"+Math.random().toString(36).slice(2);function Go(t){if(!t[al]){t[al]=!0,M_.forEach(function(n){n!=="selectionchange"&&(eS.has(n)||pd(n,!1,t),pd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[al]||(e[al]=!0,pd("selectionchange",!1,e))}}function R0(t,e,n,r){switch(p0(e)){case 1:var s=p2;break;case 4:s=m2;break;default:s=Af}n=s.bind(null,e,n,t),s=void 0,!ah||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function md(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ts(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}e0(function(){var d=i,f=bf(n),m=[];e:{var g=k0.get(t);if(g!==void 0){var v=Pf,T=t;switch(t){case"keypress":if(kl(n)===0)break e;case"keydown":case"keyup":v=A2;break;case"focusin":T="focus",v=ld;break;case"focusout":T="blur",v=ld;break;case"beforeblur":case"afterblur":v=ld;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Bg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=v2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=j2;break;case S0:case b0:case C0:v=x2;break;case N0:v=O2;break;case"scroll":v=g2;break;case"wheel":v=V2;break;case"copy":case"cut":case"paste":v=T2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=qg}var A=(e&4)!==0,N=!A&&t==="scroll",_=A?g!==null?g+"Capture":null:g;A=[];for(var w=d,I;w!==null;){I=w;var j=I.stateNode;if(I.tag===5&&j!==null&&(I=j,_!==null&&(j=Bo(w,_),j!=null&&A.push(Qo(w,j,I)))),N)break;w=w.return}0<A.length&&(g=new v(g,T,null,n,f),m.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==ih&&(T=n.relatedTarget||n.fromElement)&&(ts(T)||T[Kn]))break e;if((v||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=d,T=T?ts(T):null,T!==null&&(N=bs(T),T!==N||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=d),v!==T)){if(A=Bg,j="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(A=qg,j="onPointerLeave",_="onPointerEnter",w="pointer"),N=v==null?g:Gs(v),I=T==null?g:Gs(T),g=new A(j,w+"leave",v,n,f),g.target=N,g.relatedTarget=I,j=null,ts(f)===d&&(A=new A(_,w+"enter",T,n,f),A.target=I,A.relatedTarget=N,j=A),N=j,v&&T)t:{for(A=v,_=T,w=0,I=A;I;I=Ms(I))w++;for(I=0,j=_;j;j=Ms(j))I++;for(;0<w-I;)A=Ms(A),w--;for(;0<I-w;)_=Ms(_),I--;for(;w--;){if(A===_||_!==null&&A===_.alternate)break t;A=Ms(A),_=Ms(_)}A=null}else A=null;v!==null&&ty(m,g,v,A,!1),T!==null&&N!==null&&ty(m,N,T,A,!0)}}e:{if(g=d?Gs(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var O=q2;else if(Kg(g))if(w0)O=G2;else{O=W2;var L=H2}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=K2);if(O&&(O=O(t,d))){_0(m,O,n,f);break e}L&&L(t,g,d),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&eh(g,"number",g.value)}switch(L=d?Gs(d):window,t){case"focusin":(Kg(L)||L.contentEditable==="true")&&(Ws=L,hh=d,Co=null);break;case"focusout":Co=hh=Ws=null;break;case"mousedown":fh=!0;break;case"contextmenu":case"mouseup":case"dragend":fh=!1,Jg(m,n,f);break;case"selectionchange":if(X2)break;case"keydown":case"keyup":Jg(m,n,f)}var E;if(Df)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hs?y0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(g0&&n.locale!=="ko"&&(Hs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Hs&&(E=m0()):(yr=f,Rf="value"in yr?yr.value:yr.textContent,Hs=!0)),L=Zl(d,y),0<L.length&&(y=new $g(y,t,null,n,f),m.push({event:y,listeners:L}),E?y.data=E:(E=v0(n),E!==null&&(y.data=E)))),(E=F2?U2(t,n):z2(t,n))&&(d=Zl(d,"onBeforeInput"),0<d.length&&(f=new $g("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=E))}A0(m,e)})}function Qo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Bo(t,n),i!=null&&r.unshift(Qo(t,i,s)),i=Bo(t,e),i!=null&&r.push(Qo(t,i,s))),t=t.return}return r}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ty(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,d=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&d!==null&&(a=d,s?(u=Bo(n,i),u!=null&&o.unshift(Qo(n,u,a))):s||(u=Bo(n,i),u!=null&&o.push(Qo(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tS=/\r\n?/g,nS=/\u0000|\uFFFD/g;function ny(t){return(typeof t=="string"?t:""+t).replace(tS,`
`).replace(nS,"")}function ll(t,e,n){if(e=ny(e),ny(t)!==e&&n)throw Error(U(425))}function eu(){}var ph=null,mh=null;function gh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yh=typeof setTimeout=="function"?setTimeout:void 0,rS=typeof clearTimeout=="function"?clearTimeout:void 0,ry=typeof Promise=="function"?Promise:void 0,sS=typeof queueMicrotask=="function"?queueMicrotask:typeof ry<"u"?function(t){return ry.resolve(null).then(t).catch(iS)}:yh;function iS(t){setTimeout(function(){throw t})}function gd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ho(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),vn="__reactFiber$"+Ai,Yo="__reactProps$"+Ai,Kn="__reactContainer$"+Ai,vh="__reactEvents$"+Ai,oS="__reactListeners$"+Ai,aS="__reactHandles$"+Ai;function ts(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kn]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sy(t);t!==null;){if(n=t[vn])return n;t=sy(t)}return e}t=n,n=t.parentNode}return null}function ga(t){return t=t[vn]||t[Kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function $u(t){return t[Yo]||null}var _h=[],Qs=-1;function Br(t){return{current:t}}function ye(t){0>Qs||(t.current=_h[Qs],_h[Qs]=null,Qs--)}function pe(t,e){Qs++,_h[Qs]=t.current,t.current=e}var Dr={},dt=Br(Dr),bt=Br(!1),ds=Dr;function fi(t,e){var n=t.type.contextTypes;if(!n)return Dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(t){return t=t.childContextTypes,t!=null}function tu(){ye(bt),ye(dt)}function iy(t,e,n){if(dt.current!==Dr)throw Error(U(168));pe(dt,e),pe(bt,n)}function P0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,HI(t)||"Unknown",s));return Te({},n,r)}function nu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dr,ds=dt.current,pe(dt,t),pe(bt,bt.current),!0}function oy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=P0(t,e,ds),r.__reactInternalMemoizedMergedChildContext=t,ye(bt),ye(dt),pe(dt,t)):ye(bt),pe(bt,n)}var Vn=null,qu=!1,yd=!1;function j0(t){Vn===null?Vn=[t]:Vn.push(t)}function lS(t){qu=!0,j0(t)}function $r(){if(!yd&&Vn!==null){yd=!0;var t=0,e=ae;try{var n=Vn;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vn=null,qu=!1}catch(s){throw Vn!==null&&(Vn=Vn.slice(t+1)),s0(Cf,$r),s}finally{ae=e,yd=!1}}return null}var Ys=[],Xs=0,ru=null,su=0,Ht=[],Wt=0,hs=null,Mn=1,Fn="";function Jr(t,e){Ys[Xs++]=su,Ys[Xs++]=ru,ru=t,su=e}function D0(t,e,n){Ht[Wt++]=Mn,Ht[Wt++]=Fn,Ht[Wt++]=hs,hs=t;var r=Mn;t=Fn;var s=32-un(r)-1;r&=~(1<<s),n+=1;var i=32-un(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mn=1<<32-un(e)+s|n<<s|r,Fn=i+t}else Mn=1<<i|n<<s|r,Fn=t}function Lf(t){t.return!==null&&(Jr(t,1),D0(t,1,0))}function Vf(t){for(;t===ru;)ru=Ys[--Xs],Ys[Xs]=null,su=Ys[--Xs],Ys[Xs]=null;for(;t===hs;)hs=Ht[--Wt],Ht[Wt]=null,Fn=Ht[--Wt],Ht[Wt]=null,Mn=Ht[--Wt],Ht[Wt]=null}var Mt=null,Dt=null,ve=!1,ln=null;function O0(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ay(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hs!==null?{id:Mn,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Dt=null,!0):!1;default:return!1}}function wh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xh(t){if(ve){var e=Dt;if(e){var n=e;if(!ay(t,e)){if(wh(t))throw Error(U(418));e=Ir(n.nextSibling);var r=Mt;e&&ay(t,e)?O0(r,n):(t.flags=t.flags&-4097|2,ve=!1,Mt=t)}}else{if(wh(t))throw Error(U(418));t.flags=t.flags&-4097|2,ve=!1,Mt=t}}}function ly(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function ul(t){if(t!==Mt)return!1;if(!ve)return ly(t),ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gh(t.type,t.memoizedProps)),e&&(e=Dt)){if(wh(t))throw L0(),Error(U(418));for(;e;)O0(t,e),e=Ir(e.nextSibling)}if(ly(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Mt?Ir(t.stateNode.nextSibling):null;return!0}function L0(){for(var t=Dt;t;)t=Ir(t.nextSibling)}function pi(){Dt=Mt=null,ve=!1}function Mf(t){ln===null?ln=[t]:ln.push(t)}var uS=er.ReactCurrentBatchConfig;function ao(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function cl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uy(t){var e=t._init;return e(t._payload)}function V0(t){function e(_,w){if(t){var I=_.deletions;I===null?(_.deletions=[w],_.flags|=16):I.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Nr(_,w),_.index=0,_.sibling=null,_}function i(_,w,I){return _.index=I,t?(I=_.alternate,I!==null?(I=I.index,I<w?(_.flags|=2,w):I):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,I,j){return w===null||w.tag!==6?(w=Id(I,_.mode,j),w.return=_,w):(w=s(w,I),w.return=_,w)}function u(_,w,I,j){var O=I.type;return O===qs?f(_,w,I.props.children,j,I.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===lr&&uy(O)===w.type)?(j=s(w,I.props),j.ref=ao(_,w,I),j.return=_,j):(j=Ll(I.type,I.key,I.props,null,_.mode,j),j.ref=ao(_,w,I),j.return=_,j)}function d(_,w,I,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=Sd(I,_.mode,j),w.return=_,w):(w=s(w,I.children||[]),w.return=_,w)}function f(_,w,I,j,O){return w===null||w.tag!==7?(w=ls(I,_.mode,j,O),w.return=_,w):(w=s(w,I),w.return=_,w)}function m(_,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Id(""+w,_.mode,I),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Za:return I=Ll(w.type,w.key,w.props,null,_.mode,I),I.ref=ao(_,null,w),I.return=_,I;case $s:return w=Sd(w,_.mode,I),w.return=_,w;case lr:var j=w._init;return m(_,j(w._payload),I)}if(po(w)||no(w))return w=ls(w,_.mode,I,null),w.return=_,w;cl(_,w)}return null}function g(_,w,I,j){var O=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:a(_,w,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Za:return I.key===O?u(_,w,I,j):null;case $s:return I.key===O?d(_,w,I,j):null;case lr:return O=I._init,g(_,w,O(I._payload),j)}if(po(I)||no(I))return O!==null?null:f(_,w,I,j,null);cl(_,I)}return null}function v(_,w,I,j,O){if(typeof j=="string"&&j!==""||typeof j=="number")return _=_.get(I)||null,a(w,_,""+j,O);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Za:return _=_.get(j.key===null?I:j.key)||null,u(w,_,j,O);case $s:return _=_.get(j.key===null?I:j.key)||null,d(w,_,j,O);case lr:var L=j._init;return v(_,w,I,L(j._payload),O)}if(po(j)||no(j))return _=_.get(I)||null,f(w,_,j,O,null);cl(w,j)}return null}function T(_,w,I,j){for(var O=null,L=null,E=w,y=w=0,S=null;E!==null&&y<I.length;y++){E.index>y?(S=E,E=null):S=E.sibling;var k=g(_,E,I[y],j);if(k===null){E===null&&(E=S);break}t&&E&&k.alternate===null&&e(_,E),w=i(k,w,y),L===null?O=k:L.sibling=k,L=k,E=S}if(y===I.length)return n(_,E),ve&&Jr(_,y),O;if(E===null){for(;y<I.length;y++)E=m(_,I[y],j),E!==null&&(w=i(E,w,y),L===null?O=E:L.sibling=E,L=E);return ve&&Jr(_,y),O}for(E=r(_,E);y<I.length;y++)S=v(E,_,y,I[y],j),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?y:S.key),w=i(S,w,y),L===null?O=S:L.sibling=S,L=S);return t&&E.forEach(function(R){return e(_,R)}),ve&&Jr(_,y),O}function A(_,w,I,j){var O=no(I);if(typeof O!="function")throw Error(U(150));if(I=O.call(I),I==null)throw Error(U(151));for(var L=O=null,E=w,y=w=0,S=null,k=I.next();E!==null&&!k.done;y++,k=I.next()){E.index>y?(S=E,E=null):S=E.sibling;var R=g(_,E,k.value,j);if(R===null){E===null&&(E=S);break}t&&E&&R.alternate===null&&e(_,E),w=i(R,w,y),L===null?O=R:L.sibling=R,L=R,E=S}if(k.done)return n(_,E),ve&&Jr(_,y),O;if(E===null){for(;!k.done;y++,k=I.next())k=m(_,k.value,j),k!==null&&(w=i(k,w,y),L===null?O=k:L.sibling=k,L=k);return ve&&Jr(_,y),O}for(E=r(_,E);!k.done;y++,k=I.next())k=v(E,_,y,k.value,j),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?y:k.key),w=i(k,w,y),L===null?O=k:L.sibling=k,L=k);return t&&E.forEach(function(P){return e(_,P)}),ve&&Jr(_,y),O}function N(_,w,I,j){if(typeof I=="object"&&I!==null&&I.type===qs&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Za:e:{for(var O=I.key,L=w;L!==null;){if(L.key===O){if(O=I.type,O===qs){if(L.tag===7){n(_,L.sibling),w=s(L,I.props.children),w.return=_,_=w;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===lr&&uy(O)===L.type){n(_,L.sibling),w=s(L,I.props),w.ref=ao(_,L,I),w.return=_,_=w;break e}n(_,L);break}else e(_,L);L=L.sibling}I.type===qs?(w=ls(I.props.children,_.mode,j,I.key),w.return=_,_=w):(j=Ll(I.type,I.key,I.props,null,_.mode,j),j.ref=ao(_,w,I),j.return=_,_=j)}return o(_);case $s:e:{for(L=I.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){n(_,w.sibling),w=s(w,I.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=Sd(I,_.mode,j),w.return=_,_=w}return o(_);case lr:return L=I._init,N(_,w,L(I._payload),j)}if(po(I))return T(_,w,I,j);if(no(I))return A(_,w,I,j);cl(_,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,I),w.return=_,_=w):(n(_,w),w=Id(I,_.mode,j),w.return=_,_=w),o(_)):n(_,w)}return N}var mi=V0(!0),M0=V0(!1),iu=Br(null),ou=null,Js=null,Ff=null;function Uf(){Ff=Js=ou=null}function zf(t){var e=iu.current;ye(iu),t._currentValue=e}function Eh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oi(t,e){ou=t,Ff=Js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(Ff!==t)if(t={context:t,memoizedValue:e,next:null},Js===null){if(ou===null)throw Error(U(308));Js=t,ou.dependencies={lanes:0,firstContext:t}}else Js=Js.next=t;return e}var ns=null;function Bf(t){ns===null?ns=[t]:ns.push(t)}function F0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Bf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function $f(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gn(t,n)}return s=r.interleaved,s===null?(e.next=e,Bf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gn(t,n)}function Al(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}function cy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function au(t,e,n,r){var s=t.updateQueue;ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,a=i;do{var g=a.lane,v=a.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,A=a;switch(g=e,v=n,A.tag){case 1:if(T=A.payload,typeof T=="function"){m=T.call(v,m,g);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=A.payload,g=typeof T=="function"?T.call(v,m,g):T,g==null)break e;m=Te({},m,g);break e;case 2:ur=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=v,u=m):f=f.next=v,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ps|=o,t.lanes=o,t.memoizedState=m}}function dy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var ya={},En=Br(ya),Xo=Br(ya),Jo=Br(ya);function rs(t){if(t===ya)throw Error(U(174));return t}function qf(t,e){switch(pe(Jo,e),pe(Xo,t),pe(En,ya),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nh(e,t)}ye(En),pe(En,e)}function gi(){ye(En),ye(Xo),ye(Jo)}function z0(t){rs(Jo.current);var e=rs(En.current),n=nh(e,t.type);e!==n&&(pe(Xo,t),pe(En,n))}function Hf(t){Xo.current===t&&(ye(En),ye(Xo))}var xe=Br(0);function lu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vd=[];function Wf(){for(var t=0;t<vd.length;t++)vd[t]._workInProgressVersionPrimary=null;vd.length=0}var Rl=er.ReactCurrentDispatcher,_d=er.ReactCurrentBatchConfig,fs=0,Ee=null,Me=null,Be=null,uu=!1,No=!1,Zo=0,cS=0;function it(){throw Error(U(321))}function Kf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function Gf(t,e,n,r,s,i){if(fs=i,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rl.current=t===null||t.memoizedState===null?pS:mS,t=n(r,s),No){i=0;do{if(No=!1,Zo=0,25<=i)throw Error(U(301));i+=1,Be=Me=null,e.updateQueue=null,Rl.current=gS,t=n(r,s)}while(No)}if(Rl.current=cu,e=Me!==null&&Me.next!==null,fs=0,Be=Me=Ee=null,uu=!1,e)throw Error(U(300));return t}function Qf(){var t=Zo!==0;return Zo=0,t}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ee.memoizedState=Be=t:Be=Be.next=t,Be}function Jt(){if(Me===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=Be===null?Ee.memoizedState:Be.next;if(e!==null)Be=e,Me=t;else{if(t===null)throw Error(U(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Be===null?Ee.memoizedState=Be=t:Be=Be.next=t}return Be}function ea(t,e){return typeof e=="function"?e(t):e}function wd(t){var e=Jt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Me,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,d=i;do{var f=d.lane;if((fs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=m,o=r):u=u.next=m,Ee.lanes|=f,ps|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=a,dn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ee.lanes|=i,ps|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xd(t){var e=Jt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);dn(i,e.memoizedState)||(St=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function B0(){}function $0(t,e){var n=Ee,r=Jt(),s=e(),i=!dn(r.memoizedState,s);if(i&&(r.memoizedState=s,St=!0),r=r.queue,Yf(W0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,ta(9,H0.bind(null,n,r,s,e),void 0,null),$e===null)throw Error(U(349));fs&30||q0(n,e,s)}return s}function q0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H0(t,e,n,r){e.value=n,e.getSnapshot=r,K0(e)&&G0(t)}function W0(t,e,n){return n(function(){K0(e)&&G0(t)})}function K0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function G0(t){var e=Gn(t,1);e!==null&&cn(e,t,1,-1)}function hy(t){var e=gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:t},e.queue=t,t=t.dispatch=fS.bind(null,Ee,t),[e.memoizedState,t]}function ta(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Q0(){return Jt().memoizedState}function Pl(t,e,n,r){var s=gn();Ee.flags|=t,s.memoizedState=ta(1|e,n,void 0,r===void 0?null:r)}function Hu(t,e,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(Me!==null){var o=Me.memoizedState;if(i=o.destroy,r!==null&&Kf(r,o.deps)){s.memoizedState=ta(e,n,i,r);return}}Ee.flags|=t,s.memoizedState=ta(1|e,n,i,r)}function fy(t,e){return Pl(8390656,8,t,e)}function Yf(t,e){return Hu(2048,8,t,e)}function Y0(t,e){return Hu(4,2,t,e)}function X0(t,e){return Hu(4,4,t,e)}function J0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Z0(t,e,n){return n=n!=null?n.concat([t]):null,Hu(4,4,J0.bind(null,e,t),n)}function Xf(){}function ew(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tw(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nw(t,e,n){return fs&21?(dn(n,e)||(n=a0(),Ee.lanes|=n,ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function dS(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=_d.transition;_d.transition={};try{t(!1),e()}finally{ae=n,_d.transition=r}}function rw(){return Jt().memoizedState}function hS(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sw(t))iw(e,n);else if(n=F0(t,e,n,r),n!==null){var s=vt();cn(n,t,r,s),ow(n,e,r)}}function fS(t,e,n){var r=Cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sw(t))iw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,dn(a,o)){var u=e.interleaved;u===null?(s.next=s,Bf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=F0(t,e,s,r),n!==null&&(s=vt(),cn(n,t,r,s),ow(n,e,r))}}function sw(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function iw(t,e){No=uu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ow(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}var cu={readContext:Xt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},pS={readContext:Xt,useCallback:function(t,e){return gn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:fy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pl(4194308,4,J0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pl(4,2,t,e)},useMemo:function(t,e){var n=gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hS.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=gn();return t={current:t},e.memoizedState=t},useState:hy,useDebugValue:Xf,useDeferredValue:function(t){return gn().memoizedState=t},useTransition:function(){var t=hy(!1),e=t[0];return t=dS.bind(null,t[1]),gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,s=gn();if(ve){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),$e===null)throw Error(U(349));fs&30||q0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,fy(W0.bind(null,r,i,t),[t]),r.flags|=2048,ta(9,H0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=gn(),e=$e.identifierPrefix;if(ve){var n=Fn,r=Mn;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mS={readContext:Xt,useCallback:ew,useContext:Xt,useEffect:Yf,useImperativeHandle:Z0,useInsertionEffect:Y0,useLayoutEffect:X0,useMemo:tw,useReducer:wd,useRef:Q0,useState:function(){return wd(ea)},useDebugValue:Xf,useDeferredValue:function(t){var e=Jt();return nw(e,Me.memoizedState,t)},useTransition:function(){var t=wd(ea)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:B0,useSyncExternalStore:$0,useId:rw,unstable_isNewReconciler:!1},gS={readContext:Xt,useCallback:ew,useContext:Xt,useEffect:Yf,useImperativeHandle:Z0,useInsertionEffect:Y0,useLayoutEffect:X0,useMemo:tw,useReducer:xd,useRef:Q0,useState:function(){return xd(ea)},useDebugValue:Xf,useDeferredValue:function(t){var e=Jt();return Me===null?e.memoizedState=t:nw(e,Me.memoizedState,t)},useTransition:function(){var t=xd(ea)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:B0,useSyncExternalStore:$0,useId:rw,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Th(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wu={isMounted:function(t){return(t=t._reactInternals)?bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Cr(t),i=$n(r,s);i.payload=e,n!=null&&(i.callback=n),e=Sr(t,i,s),e!==null&&(cn(e,t,s,r),Al(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Cr(t),i=$n(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Sr(t,i,s),e!==null&&(cn(e,t,s,r),Al(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=Cr(t),s=$n(n,r);s.tag=2,e!=null&&(s.callback=e),e=Sr(t,s,r),e!==null&&(cn(e,t,r,n),Al(e,t,r))}};function py(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ko(n,r)||!Ko(s,i):!0}function aw(t,e,n){var r=!1,s=Dr,i=e.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=Ct(e)?ds:dt.current,r=e.contextTypes,i=(r=r!=null)?fi(t,s):Dr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function my(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wu.enqueueReplaceState(e,e.state,null)}function Ih(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},$f(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=Ct(e)?ds:dt.current,s.context=fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Th(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wu.enqueueReplaceState(s,s.state,null),au(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yi(t,e){try{var n="",r=e;do n+=qI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ed(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yS=typeof WeakMap=="function"?WeakMap:Map;function lw(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hu||(hu=!0,Oh=r),Sh(t,e)},n}function uw(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Sh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sh(t,e),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=RS.bind(null,t,e,n),e.then(t,t))}function yy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,Sr(n,e,1))),n.lanes|=1),t)}var vS=er.ReactCurrentOwner,St=!1;function gt(t,e,n,r){e.child=t===null?M0(e,null,n,r):mi(e,t.child,n,r)}function _y(t,e,n,r,s){n=n.render;var i=e.ref;return oi(e,s),r=Gf(t,e,n,r,i,s),n=Qf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(ve&&n&&Lf(e),e.flags|=1,gt(t,e,r,s),e.child)}function wy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ip(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,cw(t,e,i,r,s)):(t=Ll(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ko,n(o,r)&&t.ref===e.ref)return Qn(t,e,s)}return e.flags|=1,t=Nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function cw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ko(i,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Qn(t,e,s)}return bh(t,e,n,r,s)}function dw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(ei,jt),jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(ei,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe(ei,jt),jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pe(ei,jt),jt|=r;return gt(t,e,s,n),e.child}function hw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bh(t,e,n,r,s){var i=Ct(n)?ds:dt.current;return i=fi(e,i),oi(e,s),n=Gf(t,e,n,r,i,s),r=Qf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(ve&&r&&Lf(e),e.flags|=1,gt(t,e,n,s),e.child)}function xy(t,e,n,r,s){if(Ct(n)){var i=!0;nu(e)}else i=!1;if(oi(e,s),e.stateNode===null)jl(t,e),aw(e,n,r),Ih(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Xt(d):(d=Ct(n)?ds:dt.current,d=fi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==d)&&my(e,o,r,d),ur=!1;var g=e.memoizedState;o.state=g,au(e,r,o,s),u=e.memoizedState,a!==r||g!==u||bt.current||ur?(typeof f=="function"&&(Th(e,n,f,r),u=e.memoizedState),(a=ur||py(e,n,a,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,U0(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:on(e.type,a),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xt(u):(u=Ct(n)?ds:dt.current,u=fi(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==u)&&my(e,o,r,u),ur=!1,g=e.memoizedState,o.state=g,au(e,r,o,s);var T=e.memoizedState;a!==m||g!==T||bt.current||ur?(typeof v=="function"&&(Th(e,n,v,r),T=e.memoizedState),(d=ur||py(e,n,d,r,g,T,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ch(t,e,n,r,i,s)}function Ch(t,e,n,r,s,i){hw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&oy(e,n,!1),Qn(t,e,i);r=e.stateNode,vS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mi(e,t.child,null,i),e.child=mi(e,null,a,i)):gt(t,e,a,i),e.memoizedState=r.state,s&&oy(e,n,!0),e.child}function fw(t){var e=t.stateNode;e.pendingContext?iy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iy(t,e.context,!1),qf(t,e.containerInfo)}function Ey(t,e,n,r,s){return pi(),Mf(s),e.flags|=256,gt(t,e,n,r),e.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function kh(t){return{baseLanes:t,cachePool:null,transitions:null}}function pw(t,e,n){var r=e.pendingProps,s=xe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pe(xe,s&1),t===null)return xh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Qu(o,r,0,null),t=ls(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=kh(n),e.memoizedState=Nh,t):Jf(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return _S(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Nr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Nr(a,i):(i=ls(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?kh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Nh,r}return i=t.child,t=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jf(t,e){return e=Qu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dl(t,e,n,r){return r!==null&&Mf(r),mi(e,t.child,null,n),t=Jf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _S(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ed(Error(U(422))),dl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Qu({mode:"visible",children:r.children},s,0,null),i=ls(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&mi(e,t.child,null,o),e.child.memoizedState=kh(o),e.memoizedState=Nh,i);if(!(e.mode&1))return dl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=Ed(i,r,void 0),dl(t,e,o,r)}if(a=(o&t.childLanes)!==0,St||a){if(r=$e,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gn(t,s),cn(r,t,s,-1))}return sp(),r=Ed(Error(U(421))),dl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=PS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=Ir(s.nextSibling),Mt=e,ve=!0,ln=null,t!==null&&(Ht[Wt++]=Mn,Ht[Wt++]=Fn,Ht[Wt++]=hs,Mn=t.id,Fn=t.overflow,hs=e),e=Jf(e,r.children),e.flags|=4096,e)}function Ty(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Eh(t.return,e,n)}function Td(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function mw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ty(t,n,e);else if(t.tag===19)Ty(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Td(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Td(e,!0,n,null,i);break;case"together":Td(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wS(t,e,n){switch(e.tag){case 3:fw(e),pi();break;case 5:z0(e);break;case 1:Ct(e.type)&&nu(e);break;case 4:qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pe(iu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?pw(t,e,n):(pe(xe,xe.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);pe(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,dw(t,e,n)}return Qn(t,e,n)}var gw,Ah,yw,vw;gw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ah=function(){};yw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,rs(En.current);var i=null;switch(n){case"input":s=Jd(t,s),r=Jd(t,r),i=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),i=[];break;case"textarea":s=th(t,s),r=th(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=eu)}rh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Uo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ge("scroll",t),i||a===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};vw=function(t,e,n,r){n!==r&&(e.flags|=4)};function lo(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xS(t,e,n){var r=e.pendingProps;switch(Vf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Ct(e.type)&&tu(),ot(e),null;case 3:return r=e.stateNode,gi(),ye(bt),ye(dt),Wf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ul(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(Mh(ln),ln=null))),Ah(t,e),ot(e),null;case 5:Hf(e);var s=rs(Jo.current);if(n=e.type,t!==null&&e.stateNode!=null)yw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ot(e),null}if(t=rs(En.current),ul(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vn]=e,r[Yo]=i,t=(e.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(s=0;s<go.length;s++)ge(go[s],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":Pg(r,i),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ge("invalid",r);break;case"textarea":Dg(r,i),ge("invalid",r)}rh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ll(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ll(r.textContent,a,t),s=["children",""+a]):Uo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ge("scroll",r)}switch(n){case"input":el(r),jg(r,i,!0);break;case"textarea":el(r),Og(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=eu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=W_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vn]=e,t[Yo]=r,gw(t,e,!1,!1),e.stateNode=t;e:{switch(o=sh(n,r),n){case"dialog":ge("cancel",t),ge("close",t),s=r;break;case"iframe":case"object":case"embed":ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<go.length;s++)ge(go[s],t);s=r;break;case"source":ge("error",t),s=r;break;case"img":case"image":case"link":ge("error",t),ge("load",t),s=r;break;case"details":ge("toggle",t),s=r;break;case"input":Pg(t,r),s=Jd(t,r),ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),ge("invalid",t);break;case"textarea":Dg(t,r),s=th(t,r),ge("invalid",t);break;default:s=r}rh(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?Q_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&K_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&zo(t,u):typeof u=="number"&&zo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ge("scroll",t):u!=null&&Ef(t,i,u,o))}switch(n){case"input":el(t),jg(t,r,!1);break;case"textarea":el(t),Og(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ni(t,!!r.multiple,i,!1):r.defaultValue!=null&&ni(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)vw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=rs(Jo.current),rs(En.current),ul(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(i=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ll(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return ot(e),null;case 13:if(ye(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ve&&Dt!==null&&e.mode&1&&!(e.flags&128))L0(),pi(),e.flags|=98560,i=!1;else if(i=ul(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[vn]=e}else pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else ln!==null&&(Mh(ln),ln=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Ue===0&&(Ue=3):sp())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return gi(),Ah(t,e),t===null&&Go(e.stateNode.containerInfo),ot(e),null;case 10:return zf(e.type._context),ot(e),null;case 17:return Ct(e.type)&&tu(),ot(e),null;case 19:if(ye(xe),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)lo(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lu(t),o!==null){for(e.flags|=128,lo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(xe,xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pe()>vi&&(e.flags|=128,r=!0,lo(i,!1),e.lanes=4194304)}else{if(!r)if(t=lu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ve)return ot(e),null}else 2*Pe()-i.renderingStartTime>vi&&n!==1073741824&&(e.flags|=128,r=!0,lo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pe(),e.sibling=null,n=xe.current,pe(xe,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return rp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function ES(t,e){switch(Vf(e),e.tag){case 1:return Ct(e.type)&&tu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gi(),ye(bt),ye(dt),Wf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hf(e),null;case 13:if(ye(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(xe),null;case 4:return gi(),null;case 10:return zf(e.type._context),null;case 22:case 23:return rp(),null;case 24:return null;default:return null}}var hl=!1,ut=!1,TS=typeof WeakSet=="function"?WeakSet:Set,$=null;function Zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Rh(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var Iy=!1;function IS(t,e){if(ph=Xl,t=T0(),Of(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===t)break t;if(g===n&&++d===s&&(a=o),g===i&&++f===r&&(u=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:t,selectionRange:n},Xl=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var A=T.memoizedProps,N=T.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?A:on(e.type,A),N);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(j){Ce(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return T=Iy,Iy=!1,T}function ko(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rh(e,n,i)}s=s.next}while(s!==r)}}function Ku(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ph(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _w(t){var e=t.alternate;e!==null&&(t.alternate=null,_w(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[Yo],delete e[vh],delete e[oS],delete e[aS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ww(t){return t.tag===5||t.tag===3||t.tag===4}function Sy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ww(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eu));else if(r!==4&&(t=t.child,t!==null))for(jh(t,e,n),t=t.sibling;t!==null;)jh(t,e,n),t=t.sibling}function Dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dh(t,e,n),t=t.sibling;t!==null;)Dh(t,e,n),t=t.sibling}var Ke=null,an=!1;function or(t,e,n){for(n=n.child;n!==null;)xw(t,e,n),n=n.sibling}function xw(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Fu,n)}catch{}switch(n.tag){case 5:ut||Zs(n,e);case 6:var r=Ke,s=an;Ke=null,or(t,e,n),Ke=r,an=s,Ke!==null&&(an?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(an?(t=Ke,n=n.stateNode,t.nodeType===8?gd(t.parentNode,n):t.nodeType===1&&gd(t,n),Ho(t)):gd(Ke,n.stateNode));break;case 4:r=Ke,s=an,Ke=n.stateNode.containerInfo,an=!0,or(t,e,n),Ke=r,an=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Rh(n,e,o),s=s.next}while(s!==r)}or(t,e,n);break;case 1:if(!ut&&(Zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ce(n,e,a)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,or(t,e,n),ut=r):or(t,e,n);break;default:or(t,e,n)}}function by(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TS),e.forEach(function(r){var s=jS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ke=a.stateNode,an=!1;break e;case 3:Ke=a.stateNode.containerInfo,an=!0;break e;case 4:Ke=a.stateNode.containerInfo,an=!0;break e}a=a.return}if(Ke===null)throw Error(U(160));xw(i,o,s),Ke=null,an=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ce(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ew(e,t),e=e.sibling}function Ew(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sn(e,t),mn(t),r&4){try{ko(3,t,t.return),Ku(3,t)}catch(A){Ce(t,t.return,A)}try{ko(5,t,t.return)}catch(A){Ce(t,t.return,A)}}break;case 1:sn(e,t),mn(t),r&512&&n!==null&&Zs(n,n.return);break;case 5:if(sn(e,t),mn(t),r&512&&n!==null&&Zs(n,n.return),t.flags&32){var s=t.stateNode;try{zo(s,"")}catch(A){Ce(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&q_(s,i),sh(a,o);var d=sh(a,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Q_(s,m):f==="dangerouslySetInnerHTML"?K_(s,m):f==="children"?zo(s,m):Ef(s,f,m,d)}switch(a){case"input":Zd(s,i);break;case"textarea":H_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?ni(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?ni(s,!!i.multiple,i.defaultValue,!0):ni(s,!!i.multiple,i.multiple?[]:"",!1))}s[Yo]=i}catch(A){Ce(t,t.return,A)}}break;case 6:if(sn(e,t),mn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){Ce(t,t.return,A)}}break;case 3:if(sn(e,t),mn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ho(e.containerInfo)}catch(A){Ce(t,t.return,A)}break;case 4:sn(e,t),mn(t);break;case 13:sn(e,t),mn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(tp=Pe())),r&4&&by(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(d=ut)||f,sn(e,t),ut=d):sn(e,t),mn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for($=t,f=t.child;f!==null;){for(m=$=f;$!==null;){switch(g=$,v=g.child,g.tag){case 0:case 11:case 14:case 15:ko(4,g,g.return);break;case 1:Zs(g,g.return);var T=g.stateNode;if(typeof T.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(A){Ce(r,n,A)}}break;case 5:Zs(g,g.return);break;case 22:if(g.memoizedState!==null){Ny(m);continue}}v!==null?(v.return=g,$=v):Ny(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=G_("display",o))}catch(A){Ce(t,t.return,A)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(A){Ce(t,t.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:sn(e,t),mn(t),r&4&&by(t);break;case 21:break;default:sn(e,t),mn(t)}}function mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ww(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(zo(s,""),r.flags&=-33);var i=Sy(t);Dh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Sy(t);jh(t,a,o);break;default:throw Error(U(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SS(t,e,n){$=t,Tw(t)}function Tw(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hl;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||ut;a=hl;var d=ut;if(hl=o,(ut=u)&&!d)for($=s;$!==null;)o=$,u=o.child,o.tag===22&&o.memoizedState!==null?ky(s):u!==null?(u.return=o,$=u):ky(s);for(;i!==null;)$=i,Tw(i),i=i.sibling;$=s,hl=a,ut=d}Cy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):Cy(t)}}function Cy(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Ku(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&dy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ho(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ut||e.flags&512&&Ph(e)}catch(g){Ce(e,e.return,g)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Ny(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function ky(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ku(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ce(e,s,u)}}var i=e.return;try{Ph(e)}catch(u){Ce(e,i,u)}break;case 5:var o=e.return;try{Ph(e)}catch(u){Ce(e,o,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var bS=Math.ceil,du=er.ReactCurrentDispatcher,Zf=er.ReactCurrentOwner,Gt=er.ReactCurrentBatchConfig,re=0,$e=null,Oe=null,Xe=0,jt=0,ei=Br(0),Ue=0,na=null,ps=0,Gu=0,ep=0,Ao=null,Tt=null,tp=0,vi=1/0,Ln=null,hu=!1,Oh=null,br=null,fl=!1,vr=null,fu=0,Ro=0,Lh=null,Dl=-1,Ol=0;function vt(){return re&6?Pe():Dl!==-1?Dl:Dl=Pe()}function Cr(t){return t.mode&1?re&2&&Xe!==0?Xe&-Xe:uS.transition!==null?(Ol===0&&(Ol=a0()),Ol):(t=ae,t!==0||(t=window.event,t=t===void 0?16:p0(t.type)),t):1}function cn(t,e,n,r){if(50<Ro)throw Ro=0,Lh=null,Error(U(185));pa(t,n,r),(!(re&2)||t!==$e)&&(t===$e&&(!(re&2)&&(Gu|=n),Ue===4&&dr(t,Xe)),Nt(t,r),n===1&&re===0&&!(e.mode&1)&&(vi=Pe()+500,qu&&$r()))}function Nt(t,e){var n=t.callbackNode;u2(t,e);var r=Yl(t,t===$e?Xe:0);if(r===0)n!==null&&Mg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mg(n),e===1)t.tag===0?lS(Ay.bind(null,t)):j0(Ay.bind(null,t)),sS(function(){!(re&6)&&$r()}),n=null;else{switch(l0(r)){case 1:n=Cf;break;case 4:n=i0;break;case 16:n=Ql;break;case 536870912:n=o0;break;default:n=Ql}n=Rw(n,Iw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Iw(t,e){if(Dl=-1,Ol=0,re&6)throw Error(U(327));var n=t.callbackNode;if(ai()&&t.callbackNode!==n)return null;var r=Yl(t,t===$e?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pu(t,r);else{e=r;var s=re;re|=2;var i=bw();($e!==t||Xe!==e)&&(Ln=null,vi=Pe()+500,as(t,e));do try{kS();break}catch(a){Sw(t,a)}while(!0);Uf(),du.current=i,re=s,Oe!==null?e=0:($e=null,Xe=0,e=Ue)}if(e!==0){if(e===2&&(s=uh(t),s!==0&&(r=s,e=Vh(t,s))),e===1)throw n=na,as(t,0),dr(t,r),Nt(t,Pe()),n;if(e===6)dr(t,r);else{if(s=t.current.alternate,!(r&30)&&!CS(s)&&(e=pu(t,r),e===2&&(i=uh(t),i!==0&&(r=i,e=Vh(t,i))),e===1))throw n=na,as(t,0),dr(t,r),Nt(t,Pe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Zr(t,Tt,Ln);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=tp+500-Pe(),10<e)){if(Yl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yh(Zr.bind(null,t,Tt,Ln),e);break}Zr(t,Tt,Ln);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-un(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bS(r/1960))-r,10<r){t.timeoutHandle=yh(Zr.bind(null,t,Tt,Ln),r);break}Zr(t,Tt,Ln);break;case 5:Zr(t,Tt,Ln);break;default:throw Error(U(329))}}}return Nt(t,Pe()),t.callbackNode===n?Iw.bind(null,t):null}function Vh(t,e){var n=Ao;return t.current.memoizedState.isDehydrated&&(as(t,e).flags|=256),t=pu(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&Mh(e)),t}function Mh(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function CS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~ep,e&=~Gu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function Ay(t){if(re&6)throw Error(U(327));ai();var e=Yl(t,0);if(!(e&1))return Nt(t,Pe()),null;var n=pu(t,e);if(t.tag!==0&&n===2){var r=uh(t);r!==0&&(e=r,n=Vh(t,r))}if(n===1)throw n=na,as(t,0),dr(t,e),Nt(t,Pe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,Tt,Ln),Nt(t,Pe()),null}function np(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(vi=Pe()+500,qu&&$r())}}function ms(t){vr!==null&&vr.tag===0&&!(re&6)&&ai();var e=re;re|=1;var n=Gt.transition,r=ae;try{if(Gt.transition=null,ae=1,t)return t()}finally{ae=r,Gt.transition=n,re=e,!(re&6)&&$r()}}function rp(){jt=ei.current,ye(ei)}function as(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rS(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(Vf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tu();break;case 3:gi(),ye(bt),ye(dt),Wf();break;case 5:Hf(r);break;case 4:gi();break;case 13:ye(xe);break;case 19:ye(xe);break;case 10:zf(r.type._context);break;case 22:case 23:rp()}n=n.return}if($e=t,Oe=t=Nr(t.current,null),Xe=jt=e,Ue=0,na=null,ep=Gu=ps=0,Tt=Ao=null,ns!==null){for(e=0;e<ns.length;e++)if(n=ns[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ns=null}return t}function Sw(t,e){do{var n=Oe;try{if(Uf(),Rl.current=cu,uu){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}uu=!1}if(fs=0,Be=Me=Ee=null,No=!1,Zo=0,Zf.current=null,n===null||n.return===null){Ue=1,na=e,Oe=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=Xe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=yy(o);if(v!==null){v.flags&=-257,vy(v,o,a,i,e),v.mode&1&&gy(i,d,e),e=v,u=d;var T=e.updateQueue;if(T===null){var A=new Set;A.add(u),e.updateQueue=A}else T.add(u);break e}else{if(!(e&1)){gy(i,d,e),sp();break e}u=Error(U(426))}}else if(ve&&a.mode&1){var N=yy(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),vy(N,o,a,i,e),Mf(yi(u,a));break e}}i=u=yi(u,a),Ue!==4&&(Ue=2),Ao===null?Ao=[i]:Ao.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=lw(i,u,e);cy(i,_);break e;case 1:a=u;var w=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(br===null||!br.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=uw(i,a,e);cy(i,j);break e}}i=i.return}while(i!==null)}Nw(n)}catch(O){e=O,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function bw(){var t=du.current;return du.current=cu,t===null?cu:t}function sp(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),$e===null||!(ps&268435455)&&!(Gu&268435455)||dr($e,Xe)}function pu(t,e){var n=re;re|=2;var r=bw();($e!==t||Xe!==e)&&(Ln=null,as(t,e));do try{NS();break}catch(s){Sw(t,s)}while(!0);if(Uf(),re=n,du.current=r,Oe!==null)throw Error(U(261));return $e=null,Xe=0,Ue}function NS(){for(;Oe!==null;)Cw(Oe)}function kS(){for(;Oe!==null&&!e2();)Cw(Oe)}function Cw(t){var e=Aw(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?Nw(t):Oe=e,Zf.current=null}function Nw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ES(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Oe=null;return}}else if(n=xS(n,e,jt),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Ue===0&&(Ue=5)}function Zr(t,e,n){var r=ae,s=Gt.transition;try{Gt.transition=null,ae=1,AS(t,e,n,r)}finally{Gt.transition=s,ae=r}return null}function AS(t,e,n,r){do ai();while(vr!==null);if(re&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(c2(t,i),t===$e&&(Oe=$e=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fl||(fl=!0,Rw(Ql,function(){return ai(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=ae;ae=1;var a=re;re|=4,Zf.current=null,IS(t,n),Ew(n,t),Y2(mh),Xl=!!ph,mh=ph=null,t.current=n,SS(n),t2(),re=a,ae=o,Gt.transition=i}else t.current=n;if(fl&&(fl=!1,vr=t,fu=s),i=t.pendingLanes,i===0&&(br=null),s2(n.stateNode),Nt(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(hu)throw hu=!1,t=Oh,Oh=null,t;return fu&1&&t.tag!==0&&ai(),i=t.pendingLanes,i&1?t===Lh?Ro++:(Ro=0,Lh=t):Ro=0,$r(),null}function ai(){if(vr!==null){var t=l0(fu),e=Gt.transition,n=ae;try{if(Gt.transition=null,ae=16>t?16:t,vr===null)var r=!1;else{if(t=vr,vr=null,fu=0,re&6)throw Error(U(331));var s=re;for(re|=4,$=t.current;$!==null;){var i=$,o=i.child;if($.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for($=d;$!==null;){var f=$;switch(f.tag){case 0:case 11:case 15:ko(8,f,i)}var m=f.child;if(m!==null)m.return=f,$=m;else for(;$!==null;){f=$;var g=f.sibling,v=f.return;if(_w(f),f===d){$=null;break}if(g!==null){g.return=v,$=g;break}$=v}}}var T=i.alternate;if(T!==null){var A=T.child;if(A!==null){T.child=null;do{var N=A.sibling;A.sibling=null,A=N}while(A!==null)}}$=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$=o;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ko(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,$=_;break e}$=i.return}}var w=t.current;for($=w;$!==null;){o=$;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,$=I;else e:for(o=w;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ku(9,a)}}catch(O){Ce(a,a.return,O)}if(a===o){$=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,$=j;break e}$=a.return}}if(re=s,$r(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Fu,t)}catch{}r=!0}return r}finally{ae=n,Gt.transition=e}}return!1}function Ry(t,e,n){e=yi(n,e),e=lw(t,e,1),t=Sr(t,e,1),e=vt(),t!==null&&(pa(t,1,e),Nt(t,e))}function Ce(t,e,n){if(t.tag===3)Ry(t,t,n);else for(;e!==null;){if(e.tag===3){Ry(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){t=yi(n,t),t=uw(e,t,1),e=Sr(e,t,1),t=vt(),e!==null&&(pa(e,1,t),Nt(e,t));break}}e=e.return}}function RS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Xe&n)===n&&(Ue===4||Ue===3&&(Xe&130023424)===Xe&&500>Pe()-tp?as(t,0):ep|=n),Nt(t,e)}function kw(t,e){e===0&&(t.mode&1?(e=rl,rl<<=1,!(rl&130023424)&&(rl=4194304)):e=1);var n=vt();t=Gn(t,e),t!==null&&(pa(t,e,n),Nt(t,n))}function PS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kw(t,n)}function jS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),kw(t,n)}var Aw;Aw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,wS(t,e,n);St=!!(t.flags&131072)}else St=!1,ve&&e.flags&1048576&&D0(e,su,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jl(t,e),t=e.pendingProps;var s=fi(e,dt.current);oi(e,n),s=Gf(null,e,r,t,s,n);var i=Qf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(r)?(i=!0,nu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$f(e),s.updater=Wu,e.stateNode=s,s._reactInternals=e,Ih(e,r,t,n),e=Ch(null,e,r,!0,i,n)):(e.tag=0,ve&&i&&Lf(e),gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=OS(r),t=on(r,t),s){case 0:e=bh(null,e,r,t,n);break e;case 1:e=xy(null,e,r,t,n);break e;case 11:e=_y(null,e,r,t,n);break e;case 14:e=wy(null,e,r,on(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),bh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),xy(t,e,r,s,n);case 3:e:{if(fw(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,U0(t,e),au(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=yi(Error(U(423)),e),e=Ey(t,e,r,n,s);break e}else if(r!==s){s=yi(Error(U(424)),e),e=Ey(t,e,r,n,s);break e}else for(Dt=Ir(e.stateNode.containerInfo.firstChild),Mt=e,ve=!0,ln=null,n=M0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pi(),r===s){e=Qn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return z0(e),t===null&&xh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gh(r,s)?o=null:i!==null&&gh(r,i)&&(e.flags|=32),hw(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&xh(e),null;case 13:return pw(t,e,n);case 4:return qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mi(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),_y(t,e,r,s,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pe(iu,r._currentValue),r._currentValue=o,i!==null)if(dn(i.value,o)){if(i.children===s.children&&!bt.current){e=Qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=$n(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Eh(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Eh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,oi(e,n),s=Xt(s),r=r(s),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,s=on(r,e.pendingProps),s=on(r.type,s),wy(t,e,r,s,n);case 15:return cw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),jl(t,e),e.tag=1,Ct(r)?(t=!0,nu(e)):t=!1,oi(e,n),aw(e,r,s),Ih(e,r,s,n),Ch(null,e,r,!0,t,n);case 19:return mw(t,e,n);case 22:return dw(t,e,n)}throw Error(U(156,e.tag))};function Rw(t,e){return s0(t,e)}function DS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new DS(t,e,n,r)}function ip(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OS(t){if(typeof t=="function")return ip(t)?1:0;if(t!=null){if(t=t.$$typeof,t===If)return 11;if(t===Sf)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ll(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ip(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qs:return ls(n.children,s,i,e);case Tf:o=8,s|=8;break;case Gd:return t=Kt(12,n,e,s|2),t.elementType=Gd,t.lanes=i,t;case Qd:return t=Kt(13,n,e,s),t.elementType=Qd,t.lanes=i,t;case Yd:return t=Kt(19,n,e,s),t.elementType=Yd,t.lanes=i,t;case z_:return Qu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F_:o=10;break e;case U_:o=9;break e;case If:o=11;break e;case Sf:o=14;break e;case lr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ls(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Qu(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=z_,t.lanes=n,t.stateNode={isHidden:!1},t}function Id(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Sd(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=id(0),this.expirationTimes=id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function op(t,e,n,r,s,i,o,a,u){return t=new LS(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$f(i),t}function VS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$s,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Pw(t){if(!t)return Dr;t=t._reactInternals;e:{if(bs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ct(n))return P0(t,n,e)}return e}function jw(t,e,n,r,s,i,o,a,u){return t=op(n,r,!0,t,s,i,o,a,u),t.context=Pw(null),n=t.current,r=vt(),s=Cr(n),i=$n(r,s),i.callback=e??null,Sr(n,i,s),t.current.lanes=s,pa(t,s,r),Nt(t,r),t}function Yu(t,e,n,r){var s=e.current,i=vt(),o=Cr(s);return n=Pw(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Sr(s,e,o),t!==null&&(cn(t,s,o,i),Al(t,s,o)),o}function mu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Py(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ap(t,e){Py(t,e),(t=t.alternate)&&Py(t,e)}var Dw=typeof reportError=="function"?reportError:function(t){console.error(t)};function lp(t){this._internalRoot=t}Xu.prototype.render=lp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Yu(t,e,null,null)};Xu.prototype.unmount=lp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ms(function(){Yu(null,t,null,null)}),e[Kn]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=d0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&f0(t)}};function up(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jy(){}function MS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=mu(o);i.call(d)}}var o=jw(e,r,t,0,null,!1,!1,"",jy);return t._reactRootContainer=o,t[Kn]=o.current,Go(t.nodeType===8?t.parentNode:t),ms(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=mu(u);a.call(d)}}var u=op(t,0,!1,null,null,!1,!1,"",jy);return t._reactRootContainer=u,t[Kn]=u.current,Go(t.nodeType===8?t.parentNode:t),ms(function(){Yu(e,u,n,r)}),u}function Zu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=mu(o);a.call(u)}}Yu(e,o,t,s)}else o=MS(n,e,t,s,r);return mu(o)}u0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mo(e.pendingLanes);n!==0&&(Nf(e,n|1),Nt(e,Pe()),!(re&6)&&(vi=Pe()+500,$r()))}break;case 13:ms(function(){var r=Gn(t,1);if(r!==null){var s=vt();cn(r,t,1,s)}}),ap(t,1)}};kf=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=vt();cn(e,t,134217728,n)}ap(t,134217728)}};c0=function(t){if(t.tag===13){var e=Cr(t),n=Gn(t,e);if(n!==null){var r=vt();cn(n,t,e,r)}ap(t,e)}};d0=function(){return ae};h0=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};oh=function(t,e,n){switch(e){case"input":if(Zd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=$u(r);if(!s)throw Error(U(90));$_(r),Zd(r,s)}}}break;case"textarea":H_(t,n);break;case"select":e=n.value,e!=null&&ni(t,!!n.multiple,e,!1)}};J_=np;Z_=ms;var FS={usingClientEntryPoint:!1,Events:[ga,Gs,$u,Y_,X_,np]},uo={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},US={bundleType:uo.bundleType,version:uo.version,rendererPackageName:uo.rendererPackageName,rendererConfig:uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n0(t),t===null?null:t.stateNode},findFiberByHostInstance:uo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{Fu=pl.inject(US),xn=pl}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FS;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!up(e))throw Error(U(200));return VS(t,e,null,n)};Ut.createRoot=function(t,e){if(!up(t))throw Error(U(299));var n=!1,r="",s=Dw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=op(t,1,!1,null,null,n,!1,r,s),t[Kn]=e.current,Go(t.nodeType===8?t.parentNode:t),new lp(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=n0(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return ms(t)};Ut.hydrate=function(t,e,n){if(!Ju(e))throw Error(U(200));return Zu(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!up(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Dw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jw(e,null,t,1,n??null,s,!1,i,o),t[Kn]=e.current,Go(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xu(e)};Ut.render=function(t,e,n){if(!Ju(e))throw Error(U(200));return Zu(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!Ju(t))throw Error(U(40));return t._reactRootContainer?(ms(function(){Zu(null,null,t,!1,function(){t._reactRootContainer=null,t[Kn]=null})}),!0):!1};Ut.unstable_batchedUpdates=np;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ju(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Zu(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function Ow(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ow)}catch(t){console.error(t)}}Ow(),O_.exports=Ut;var zS=O_.exports,Lw,Dy=zS;Lw=Dy.createRoot,Dy.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ra(){return ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ra.apply(this,arguments)}var _r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_r||(_r={}));const Oy="popstate";function BS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Fh("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:gu(s)}return qS(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $S(){return Math.random().toString(36).substr(2,8)}function Ly(t,e){return{usr:t.state,key:t.key,idx:e}}function Fh(t,e,n,r){return n===void 0&&(n=null),ra({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ri(e):e,{state:n,key:e&&e.key||r||$S()})}function gu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ri(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=_r.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(ra({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){a=_r.Pop;let N=f(),_=N==null?null:N-d;d=N,u&&u({action:a,location:A.location,delta:_})}function g(N,_){a=_r.Push;let w=Fh(A.location,N,_);d=f()+1;let I=Ly(w,d),j=A.createHref(w);try{o.pushState(I,"",j)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(j)}i&&u&&u({action:a,location:A.location,delta:1})}function v(N,_){a=_r.Replace;let w=Fh(A.location,N,_);d=f();let I=Ly(w,d),j=A.createHref(w);o.replaceState(I,"",j),i&&u&&u({action:a,location:A.location,delta:0})}function T(N){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof N=="string"?N:gu(N);return w=w.replace(/ $/,"%20"),je(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let A={get action(){return a},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Oy,m),u=N,()=>{s.removeEventListener(Oy,m),u=null}},createHref(N){return e(s,N)},createURL:T,encodeLocation(N){let _=T(N);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:v,go(N){return o.go(N)}};return A}var Vy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vy||(Vy={}));function HS(t,e,n){return n===void 0&&(n="/"),WS(t,e,n)}function WS(t,e,n,r){let s=typeof e=="string"?Ri(e):e,i=cp(s.pathname||"/",n);if(i==null)return null;let o=Mw(t);KS(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let d=ib(i);a=nb(o[u],d)}return a}function Mw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=kr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Mw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:eb(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of Fw(i.path))s(i,o,u)}),e}function Fw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Fw(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function KS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GS=/^:[\w-]+$/,QS=3,YS=2,XS=1,JS=10,ZS=-2,My=t=>t==="*";function eb(t,e){let n=t.split("/"),r=n.length;return n.some(My)&&(r+=ZS),e&&(r+=YS),n.filter(s=>!My(s)).reduce((s,i)=>s+(GS.test(i)?QS:i===""?XS:JS),r)}function tb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function nb(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],d=a===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=rb({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:kr([i,m.pathname]),pathnameBase:ub(kr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=kr([i,m.pathnameBase]))}return o}function rb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=sb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:v}=f;if(g==="*"){let A=a[m]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const T=a[m];return v&&!T?d[g]=void 0:d[g]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function sb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function ib(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ob(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ri(t):t;return{pathname:n?n.startsWith("/")?n:ab(n,e):e,search:cb(r),hash:db(s)}}function ab(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function bd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dp(t,e){let n=lb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ri(t):(s=ra({},t),je(!s.pathname||!s.pathname.includes("?"),bd("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),bd("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),bd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}a=m>=0?e[m]:"/"}let u=ob(s,a),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const kr=t=>t.join("/").replace(/\/\/+/g,"/"),ub=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,db=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Uw=["post","put","patch","delete"];new Set(Uw);const fb=["get",...Uw];new Set(fb);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sa(){return sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sa.apply(this,arguments)}const fp=C.createContext(null),pb=C.createContext(null),qr=C.createContext(null),ec=C.createContext(null),tr=C.createContext({outlet:null,matches:[],isDataRoute:!1}),zw=C.createContext(null);function mb(t,e){let{relative:n}=e===void 0?{}:e;Pi()||je(!1);let{basename:r,navigator:s}=C.useContext(qr),{hash:i,pathname:o,search:a}=$w(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:kr([r,o])),s.createHref({pathname:u,search:a,hash:i})}function Pi(){return C.useContext(ec)!=null}function ji(){return Pi()||je(!1),C.useContext(ec).location}function Bw(t){C.useContext(qr).static||C.useLayoutEffect(t)}function pp(){let{isDataRoute:t}=C.useContext(tr);return t?Ab():gb()}function gb(){Pi()||je(!1);let t=C.useContext(fp),{basename:e,future:n,navigator:r}=C.useContext(qr),{matches:s}=C.useContext(tr),{pathname:i}=ji(),o=JSON.stringify(dp(s,n.v7_relativeSplatPath)),a=C.useRef(!1);return Bw(()=>{a.current=!0}),C.useCallback(function(d,f){if(f===void 0&&(f={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let m=hp(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:kr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}const yb=C.createContext(null);function vb(t){let e=C.useContext(tr).outlet;return e&&C.createElement(yb.Provider,{value:t},e)}function $w(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(qr),{matches:s}=C.useContext(tr),{pathname:i}=ji(),o=JSON.stringify(dp(s,r.v7_relativeSplatPath));return C.useMemo(()=>hp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function _b(t,e){return wb(t,e)}function wb(t,e,n,r){Pi()||je(!1);let{navigator:s}=C.useContext(qr),{matches:i}=C.useContext(tr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=ji(),f;if(e){var m;let N=typeof e=="string"?Ri(e):e;u==="/"||(m=N.pathname)!=null&&m.startsWith(u)||je(!1),f=N}else f=d;let g=f.pathname||"/",v=g;if(u!=="/"){let N=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let T=HS(t,{pathname:v}),A=Sb(T&&T.map(N=>Object.assign({},N,{params:Object.assign({},a,N.params),pathname:kr([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:kr([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,n,r);return e&&A?C.createElement(ec.Provider,{value:{location:sa({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_r.Pop}},A):A}function xb(){let t=kb(),e=hb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,null)}const Eb=C.createElement(xb,null);class Tb extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(tr.Provider,{value:this.props.routeContext},C.createElement(zw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ib(t){let{routeContext:e,match:n,children:r}=t,s=C.useContext(fp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(tr.Provider,{value:e},r)}function Sb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);f>=0||je(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:v}=n,T=m.route.loader&&g[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let v,T=!1,A=null,N=null;n&&(v=a&&m.route.id?a[m.route.id]:void 0,A=m.route.errorElement||Eb,u&&(d<0&&g===0?(T=!0,N=null):d===g&&(T=!0,N=m.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,g+1)),w=()=>{let I;return v?I=A:T?I=N:m.route.Component?I=C.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=f,C.createElement(Ib,{match:m,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:I})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?C.createElement(Tb,{location:n.location,revalidation:n.revalidation,component:A,error:v,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var qw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qw||{}),yu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yu||{});function bb(t){let e=C.useContext(fp);return e||je(!1),e}function Cb(t){let e=C.useContext(pb);return e||je(!1),e}function Nb(t){let e=C.useContext(tr);return e||je(!1),e}function Hw(t){let e=Nb(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function kb(){var t;let e=C.useContext(zw),n=Cb(yu.UseRouteError),r=Hw(yu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ab(){let{router:t}=bb(qw.UseNavigateStable),e=Hw(yu.UseNavigateStable),n=C.useRef(!1);return Bw(()=>{n.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,sa({fromRouteId:e},i)))},[t,e])}function Rb(t){let{to:e,replace:n,state:r,relative:s}=t;Pi()||je(!1);let{future:i,static:o}=C.useContext(qr),{matches:a}=C.useContext(tr),{pathname:u}=ji(),d=pp(),f=hp(e,dp(a,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return C.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Ww(t){return vb(t.context)}function Et(t){je(!1)}function Pb(t){let{basename:e="/",children:n=null,location:r,navigationType:s=_r.Pop,navigator:i,static:o=!1,future:a}=t;Pi()&&je(!1);let u=e.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:u,navigator:i,static:o,future:sa({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=Ri(r));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:T="default"}=r,A=C.useMemo(()=>{let N=cp(f,u);return N==null?null:{location:{pathname:N,search:m,hash:g,state:v,key:T},navigationType:s}},[u,f,m,g,v,T,s]);return A==null?null:C.createElement(qr.Provider,{value:d},C.createElement(ec.Provider,{children:n,value:A}))}function jb(t){let{children:e,location:n}=t;return _b(Uh(e),n)}new Promise(()=>{});function Uh(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,Uh(r.props.children,i));return}r.type!==Et&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Uh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zh(){return zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zh.apply(this,arguments)}function Db(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ob(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Lb(t,e){return t.button===0&&(!e||e==="_self")&&!Ob(t)}const Vb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Mb="6";try{window.__reactRouterVersion=Mb}catch{}const Fb="startTransition",Fy=RI[Fb];function Ub(t){let{basename:e,children:n,future:r,window:s}=t,i=C.useRef();i.current==null&&(i.current=BS({window:s,v5Compat:!0}));let o=i.current,[a,u]=C.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=C.useCallback(m=>{d&&Fy?Fy(()=>u(m)):u(m)},[u,d]);return C.useLayoutEffect(()=>o.listen(f),[o,f]),C.createElement(Pb,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const zb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ot=C.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:u,to:d,preventScrollReset:f,unstable_viewTransition:m}=e,g=Db(e,Vb),{basename:v}=C.useContext(qr),T,A=!1;if(typeof d=="string"&&Bb.test(d)&&(T=d,zb))try{let I=new URL(window.location.href),j=d.startsWith("//")?new URL(I.protocol+d):new URL(d),O=cp(j.pathname,v);j.origin===I.origin&&O!=null?d=O+j.search+j.hash:A=!0}catch{}let N=mb(d,{relative:s}),_=$b(d,{replace:o,state:a,target:u,preventScrollReset:f,relative:s,unstable_viewTransition:m});function w(I){r&&r(I),I.defaultPrevented||_(I)}return C.createElement("a",zh({},g,{href:T||N,onClick:A||i?r:w,ref:n,target:u}))});var Uy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uy||(Uy={}));var zy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zy||(zy={}));function $b(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,u=pp(),d=ji(),f=$w(t,{relative:o});return C.useCallback(m=>{if(Lb(m,n)){m.preventDefault();let g=r!==void 0?r:gu(d)===gu(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a})}},[d,u,f,r,s,n,t,i,o,a])}var Kw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},By=yt.createContext&&yt.createContext(Kw),qb=["attr","size","title"];function Hb(t,e){if(t==null)return{};var n=Wb(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wb(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vu(){return vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vu.apply(this,arguments)}function $y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _u(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$y(Object(n),!0).forEach(function(r){Kb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$y(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kb(t,e,n){return e=Gb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gb(t){var e=Qb(t,"string");return typeof e=="symbol"?e:e+""}function Qb(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gw(t){return t&&t.map((e,n)=>yt.createElement(e.tag,_u({key:n},e.attr),Gw(e.child)))}function ue(t){return e=>yt.createElement(Yb,vu({attr:_u({},t.attr)},e),Gw(t.child))}function Yb(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=Hb(t,qb),a=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),yt.createElement("svg",vu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:_u(_u({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&yt.createElement("title",null,i),t.children)};return By!==void 0?yt.createElement(By.Consumer,null,n=>e(n)):e(Kw)}function Xb(t){return ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"},child:[]}]})(t)}function Jb(t){return ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(t)}function Zb(t){return ue({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M560 288h-80v96l-32-21.3-32 21.3v-96h-80c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16h224c8.8 0 16-7.2 16-16V304c0-8.8-7.2-16-16-16zm-384-64h224c8.8 0 16-7.2 16-16V16c0-8.8-7.2-16-16-16h-80v96l-32-21.3L256 96V0h-80c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16zm64 64h-80v96l-32-21.3L96 384v-96H16c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16h224c8.8 0 16-7.2 16-16V304c0-8.8-7.2-16-16-16z"},child:[]}]})(t)}function eC(t){return ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function tC(t){return ue({tag:"svg",attr:{viewBox:"0 0 544 512"},child:[{tag:"path",attr:{d:"M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"},child:[]}]})(t)}function nC(t){return ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(t)}function rC(t){return ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function sC(t){return ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}var qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},iC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Yw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|d>>6,v=d&63;u||(v=64,o||(g=64)),r.push(n[f],n[m],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||d==null||m==null)throw new oC;const g=i<<2|a>>4;if(r.push(g),d!==64){const v=a<<4&240|d>>2;if(r.push(v),m!==64){const T=d<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aC=function(t){const e=Qw(t);return Yw.encodeByteArray(e,!0)},wu=function(t){return aC(t).replace(/\./g,"")},Xw=function(t){try{return Yw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=()=>lC().__FIREBASE_DEFAULTS__,cC=()=>{if(typeof process>"u"||typeof qy>"u")return;const t=qy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Xw(t[1]);return e&&JSON.parse(e)},tc=()=>{try{return uC()||cC()||dC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jw=t=>{var e,n;return(n=(e=tc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zw=t=>{const e=Jw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ex=()=>{var t;return(t=tc())===null||t===void 0?void 0:t.config},tx=t=>{var e;return(e=tc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wu(JSON.stringify(n)),wu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function pC(){var t;const e=(t=tc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yC(){const t=ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vC(){return!pC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sx(){try{return typeof indexedDB=="object"}catch{return!1}}function ix(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function _C(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="FirebaseError";class tn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wC,Object.setPrototypeOf(this,tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cs.prototype.create)}}class Cs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?xC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new tn(s,a,r)}}function xC(t,e){return t.replace(EC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const EC=/\{\$([^}]+)}/g;function TC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ia(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Hy(i)&&Hy(o)){if(!ia(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Hy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function vo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function IC(t,e){const n=new SC(t,e);return n.subscribe.bind(n)}class SC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Cd),s.error===void 0&&(s.error=Cd),s.complete===void 0&&(s.complete=Cd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=1e3,NC=2,kC=4*60*60*1e3,AC=.5;function Wy(t,e=CC,n=NC){const r=e*Math.pow(n,t),s=Math.round(AC*r*(Math.random()-.5)*2);return Math.min(kC,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t){return t&&t._delegate?t._delegate:t}class Zt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jC(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PC(t){return t===es?void 0:t}function jC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const OC={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},LC=te.INFO,VC={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},MC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=VC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nc{constructor(e){this.name=e,this._logLevel=LC,this._logHandler=MC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const FC=(t,e)=>e.some(n=>t instanceof n);let Ky,Gy;function UC(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zC(){return Gy||(Gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ox=new WeakMap,Bh=new WeakMap,ax=new WeakMap,Nd=new WeakMap,mp=new WeakMap;function BC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ar(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ox.set(n,t)}).catch(()=>{}),mp.set(e,t),e}function $C(t){if(Bh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bh.set(t,e)}let $h={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ax.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qC(t){$h=t($h)}function HC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kd(this),e,...n);return ax.set(r,e.sort?e.sort():[e]),Ar(r)}:zC().includes(t)?function(...e){return t.apply(kd(this),e),Ar(ox.get(this))}:function(...e){return Ar(t.apply(kd(this),e))}}function WC(t){return typeof t=="function"?HC(t):(t instanceof IDBTransaction&&$C(t),FC(t,UC())?new Proxy(t,$h):t)}function Ar(t){if(t instanceof IDBRequest)return BC(t);if(Nd.has(t))return Nd.get(t);const e=WC(t);return e!==t&&(Nd.set(t,e),mp.set(e,t)),e}const kd=t=>mp.get(t);function lx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ar(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ar(o.result),u.oldVersion,u.newVersion,Ar(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const KC=["get","getKey","getAll","getAllKeys","count"],GC=["put","add","delete","clear"],Ad=new Map;function Qy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ad.get(e))return Ad.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=GC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KC.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),s&&u.done]))[0]};return Ad.set(e,i),i}qC(t=>({...t,get:(e,n,r)=>Qy(e,n)||t.get(e,n,r),has:(e,n)=>!!Qy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qh="@firebase/app",Yy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new nc("@firebase/app"),XC="@firebase/app-compat",JC="@firebase/analytics-compat",ZC="@firebase/analytics",eN="@firebase/app-check-compat",tN="@firebase/app-check",nN="@firebase/auth",rN="@firebase/auth-compat",sN="@firebase/database",iN="@firebase/data-connect",oN="@firebase/database-compat",aN="@firebase/functions",lN="@firebase/functions-compat",uN="@firebase/installations",cN="@firebase/installations-compat",dN="@firebase/messaging",hN="@firebase/messaging-compat",fN="@firebase/performance",pN="@firebase/performance-compat",mN="@firebase/remote-config",gN="@firebase/remote-config-compat",yN="@firebase/storage",vN="@firebase/storage-compat",_N="@firebase/firestore",wN="@firebase/vertexai-preview",xN="@firebase/firestore-compat",EN="firebase",TN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="[DEFAULT]",IN={[qh]:"fire-core",[XC]:"fire-core-compat",[ZC]:"fire-analytics",[JC]:"fire-analytics-compat",[tN]:"fire-app-check",[eN]:"fire-app-check-compat",[nN]:"fire-auth",[rN]:"fire-auth-compat",[sN]:"fire-rtdb",[iN]:"fire-data-connect",[oN]:"fire-rtdb-compat",[aN]:"fire-fn",[lN]:"fire-fn-compat",[uN]:"fire-iid",[cN]:"fire-iid-compat",[dN]:"fire-fcm",[hN]:"fire-fcm-compat",[fN]:"fire-perf",[pN]:"fire-perf-compat",[mN]:"fire-rc",[gN]:"fire-rc-compat",[yN]:"fire-gcs",[vN]:"fire-gcs-compat",[_N]:"fire-fst",[xN]:"fire-fst-compat",[wN]:"fire-vertex","fire-js":"fire-js",[EN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=new Map,SN=new Map,Wh=new Map;function Xy(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hn(t){const e=t.name;if(Wh.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Wh.set(e,t);for(const n of xu.values())Xy(n,t);for(const n of SN.values())Xy(n,t);return!0}function Di(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Cs("app","Firebase",bN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=TN;function rc(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=ex()),!n)throw Rr.create("no-options");const i=xu.get(s);if(i){if(ia(n,i.options)&&ia(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const o=new DC(s);for(const u of Wh.values())o.addComponent(u);const a=new CN(n,r,o);return xu.set(s,a),a}function gp(t=Hh){const e=xu.get(t);if(!e&&t===Hh&&ex())return rc();if(!e)throw Rr.create("no-app",{appName:t});return e}function kt(t,e,n){var r;let s=(r=IN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(a.join(" "));return}hn(new Zt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="firebase-heartbeat-database",kN=1,oa="firebase-heartbeat-store";let Rd=null;function ux(){return Rd||(Rd=lx(NN,kN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Rd}async function AN(t){try{const n=(await ux()).transaction(oa),r=await n.objectStore(oa).get(cx(t));return await n.done,r}catch(e){if(e instanceof tn)Yn.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(n.message)}}}async function Jy(t,e){try{const r=(await ux()).transaction(oa,"readwrite");await r.objectStore(oa).put(e,cx(t)),await r.done}catch(n){if(n instanceof tn)Yn.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yn.warn(r.message)}}}function cx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=1024,PN=30*24*60*60*1e3;class jN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ON(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=PN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zy(),{heartbeatsToSend:r,unsentEntries:s}=DN(this._heartbeatsCache.heartbeats),i=wu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yn.warn(n),""}}}function Zy(){return new Date().toISOString().substring(0,10)}function DN(t,e=RN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ev(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ev(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ON{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sx()?ix().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ev(t){return wu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){hn(new Zt("platform-logger",e=>new QC(e),"PRIVATE")),hn(new Zt("heartbeat",e=>new jN(e),"PRIVATE")),kt(qh,Yy,t),kt(qh,Yy,"esm2017"),kt("fire-js","")}LN("");const dx="@firebase/installations",yp="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=1e4,fx=`w:${yp}`,px="FIS_v2",VN="https://firebaseinstallations.googleapis.com/v1",MN=60*60*1e3,FN="installations",UN="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},gs=new Cs(FN,UN,zN);function mx(t){return t instanceof tn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx({projectId:t}){return`${VN}/projects/${t}/installations`}function yx(t){return{token:t.token,requestStatus:2,expiresIn:$N(t.expiresIn),creationTime:Date.now()}}async function vx(t,e){const r=(await e.json()).error;return gs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function _x({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function BN(t,{refreshToken:e}){const n=_x(t);return n.append("Authorization",qN(e)),n}async function wx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $N(t){return Number(t.replace("s","000"))}function qN(t){return`${px} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=gx(t),s=_x(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:px,appId:t.appId,sdkVersion:fx},a={method:"POST",headers:s,body:JSON.stringify(o)},u=await wx(()=>fetch(r,a));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:yx(d.authToken)}}else throw await vx("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=/^[cdef][\w-]{21}$/,Kh="";function GN(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=QN(t);return KN.test(n)?n:Kh}catch{return Kh}}function QN(t){return WN(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=new Map;function Tx(t,e){const n=sc(t);Ix(n,e),YN(n,e)}function Ix(t,e){const n=Ex.get(t);if(n)for(const r of n)r(e)}function YN(t,e){const n=XN();n&&n.postMessage({key:t,fid:e}),JN()}let ss=null;function XN(){return!ss&&"BroadcastChannel"in self&&(ss=new BroadcastChannel("[Firebase] FID Change"),ss.onmessage=t=>{Ix(t.data.key,t.data.fid)}),ss}function JN(){Ex.size===0&&ss&&(ss.close(),ss=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="firebase-installations-database",ek=1,ys="firebase-installations-store";let Pd=null;function vp(){return Pd||(Pd=lx(ZN,ek,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ys)}}})),Pd}async function Eu(t,e){const n=sc(t),s=(await vp()).transaction(ys,"readwrite"),i=s.objectStore(ys),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Tx(t,e.fid),e}async function Sx(t){const e=sc(t),r=(await vp()).transaction(ys,"readwrite");await r.objectStore(ys).delete(e),await r.done}async function ic(t,e){const n=sc(t),s=(await vp()).transaction(ys,"readwrite"),i=s.objectStore(ys),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Tx(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _p(t){let e;const n=await ic(t.appConfig,r=>{const s=tk(r),i=nk(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Kh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function tk(t){const e=t||{fid:GN(),registrationStatus:0};return bx(e)}function nk(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(gs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=rk(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sk(t)}:{installationEntry:e}}async function rk(t,e){try{const n=await HN(t,e);return Eu(t.appConfig,n)}catch(n){throw mx(n)&&n.customData.serverCode===409?await Sx(t.appConfig):await Eu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function sk(t){let e=await tv(t.appConfig);for(;e.registrationStatus===1;)await xx(100),e=await tv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await _p(t);return r||n}return e}function tv(t){return ic(t,e=>{if(!e)throw gs.create("installation-not-found");return bx(e)})}function bx(t){return ik(t)?{fid:t.fid,registrationStatus:0}:t}function ik(t){return t.registrationStatus===1&&t.registrationTime+hx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok({appConfig:t,heartbeatServiceProvider:e},n){const r=ak(t,n),s=BN(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:fx,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},u=await wx(()=>fetch(r,a));if(u.ok){const d=await u.json();return yx(d)}else throw await vx("Generate Auth Token",u)}function ak(t,{fid:e}){return`${gx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wp(t,e=!1){let n;const r=await ic(t.appConfig,i=>{if(!Cx(i))throw gs.create("not-registered");const o=i.authToken;if(!e&&ck(o))return i;if(o.requestStatus===1)return n=lk(t,e),i;{if(!navigator.onLine)throw gs.create("app-offline");const a=hk(i);return n=uk(t,a),a}});return n?await n:r.authToken}async function lk(t,e){let n=await nv(t.appConfig);for(;n.authToken.requestStatus===1;)await xx(100),n=await nv(t.appConfig);const r=n.authToken;return r.requestStatus===0?wp(t,e):r}function nv(t){return ic(t,e=>{if(!Cx(e))throw gs.create("not-registered");const n=e.authToken;return fk(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function uk(t,e){try{const n=await ok(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Eu(t.appConfig,r),n}catch(n){if(mx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Sx(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Eu(t.appConfig,r)}throw n}}function Cx(t){return t!==void 0&&t.registrationStatus===2}function ck(t){return t.requestStatus===2&&!dk(t)}function dk(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+MN}function hk(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function fk(t){return t.requestStatus===1&&t.requestTime+hx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(t){const e=t,{installationEntry:n,registrationPromise:r}=await _p(e);return r?r.catch(console.error):wp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(t,e=!1){const n=t;return await gk(n),(await wp(n,e)).token}async function gk(t){const{registrationPromise:e}=await _p(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){if(!t||!t.options)throw jd("App Configuration");if(!t.name)throw jd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw jd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function jd(t){return gs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="installations",vk="installations-internal",_k=t=>{const e=t.getProvider("app").getImmediate(),n=yk(e),r=Di(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},wk=t=>{const e=t.getProvider("app").getImmediate(),n=Di(e,Nx).getImmediate();return{getId:()=>pk(n),getToken:s=>mk(n,s)}};function xk(){hn(new Zt(Nx,_k,"PUBLIC")),hn(new Zt(vk,wk,"PRIVATE"))}xk();kt(dx,yp);kt(dx,yp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="analytics",Ek="firebase_id",Tk="origin",Ik=60*1e3,Sk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At=new nc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qt=new Cs("analytics","Analytics",bk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t){if(!t.startsWith(xp)){const e=Qt.create("invalid-gtag-resource",{gtagURL:t});return At.warn(e.message),""}return t}function kx(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Nk(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function kk(t,e){const n=Nk("firebase-js-sdk-policy",{createScriptURL:Ck}),r=document.createElement("script"),s=`${xp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Ak(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Rk(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await kx(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(a){At.error(a)}t("config",s,i)}async function Pk(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await kx(n);for(const u of o){const d=a.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){At.error(i)}}function jk(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,u]=o;await Pk(t,e,n,a,u)}else if(i==="config"){const[a,u]=o;await Rk(t,e,n,r,a,u)}else if(i==="consent"){const[a,u]=o;t("consent",a,u)}else if(i==="get"){const[a,u,d]=o;t("get",a,u,d)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){At.error(a)}}return s}function Dk(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=jk(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function Ok(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(xp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=30,Vk=1e3;class Mk{constructor(e={},n=Vk){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ax=new Mk;function Fk(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Uk(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Fk(r)},i=Sk.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Qt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function zk(t,e=Ax,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Qt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Qt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new qk;return setTimeout(async()=>{a.abort()},Ik),Rx({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Rx(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Ax){var i;const{appId:o,measurementId:a}=t;try{await Bk(r,e)}catch(u){if(a)return At.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=await Uk(t);return s.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!$k(d)){if(s.deleteThrottleMetadata(o),a)return At.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:a};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?Wy(n,s.intervalMillis,Lk):Wy(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(o,m),At.debug(`Calling attemptFetch again in ${f} millis`),Rx(t,m,r,s)}}function Bk(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Qt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $k(t){if(!(t instanceof tn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class qk{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Hk(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(){if(sx())try{await ix()}catch(t){return At.warn(Qt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return At.warn(Qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Kk(t,e,n,r,s,i,o){var a;const u=zk(t);u.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&At.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>At.error(v)),e.push(u);const d=Wk().then(v=>{if(v)return r.getId()}),[f,m]=await Promise.all([u,d]);Ok(i)||kk(i,f.measurementId),s("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[Tk]="firebase",g.update=!0,m!=null&&(g[Ek]=m),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.app=e}_delete(){return delete Po[this.app.options.appId],Promise.resolve()}}let Po={},sv=[];const iv={};let Dd="dataLayer",Qk="gtag",ov,Px,av=!1;function Yk(){const t=[];if(rx()&&t.push("This is a browser extension environment."),_C()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Qt.create("invalid-analytics-context",{errorInfo:e});At.warn(n.message)}}function Xk(t,e,n){Yk();const r=t.options.appId;if(!r)throw Qt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)At.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qt.create("no-api-key");if(Po[r]!=null)throw Qt.create("already-exists",{id:r});if(!av){Ak(Dd);const{wrappedGtag:i,gtagCore:o}=Dk(Po,sv,iv,Dd,Qk);Px=i,ov=o,av=!0}return Po[r]=Kk(t,sv,iv,e,ov,Dd,n),new Gk(t)}function Jk(t,e,n,r){t=Ie(t),Hk(Px,Po[t.app.options.appId],e,n,r).catch(s=>At.error(s))}const lv="@firebase/analytics",uv="0.10.8";function Zk(){hn(new Zt(rv,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Xk(r,s,n)},"PUBLIC")),hn(new Zt("analytics-internal",t,"PRIVATE")),kt(lv,uv),kt(lv,uv,"esm2017");function t(e){try{const n=e.getProvider(rv).getImmediate();return{logEvent:(r,s,i)=>Jk(n,r,s,i)}}catch(n){throw Qt.create("interop-component-reg-failed",{reason:n})}}}Zk();var eA="firebase",tA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt(eA,tA,"app");function Ep(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function jx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nA=jx,Dx=new Cs("auth","Firebase",jx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new nc("@firebase/auth");function rA(t,...e){Tu.logLevel<=te.WARN&&Tu.warn(`Auth (${Ns}): ${t}`,...e)}function Vl(t,...e){Tu.logLevel<=te.ERROR&&Tu.error(`Auth (${Ns}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,...e){throw Tp(t,...e)}function Tn(t,...e){return Tp(t,...e)}function Ox(t,e,n){const r=Object.assign(Object.assign({},nA()),{[e]:n});return new Cs("auth","Firebase",r).create(e,{appName:t.name})}function qn(t){return Ox(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Dx.create(t,...e)}function G(t,e,...n){if(!t)throw Tp(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vl(e),new Error(e)}function Xn(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sA(){return cv()==="http:"||cv()==="https:"}function cv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sA()||rx()||"connection"in navigator)?navigator.onLine:!0}function oA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=fC()||gC()}get(){return iA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new _a(3e4,6e4);function Hr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nr(t,e,n,r,s={}){return Vx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=va(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return mC()||(d.referrerPolicy="no-referrer"),Lx.fetch()(Mx(t,t.config.apiHost,n,a),d)})}async function Vx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},aA),e);try{const s=new cA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ml(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,d]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ml(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ml(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ml(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ox(t,f,d);fn(t,f)}}catch(s){if(s instanceof tn)throw s;fn(t,"network-request-failed",{message:String(s)})}}async function wa(t,e,n,r,s={}){const i=await nr(t,e,n,r,s);return"mfaPendingCredential"in i&&fn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Mx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ip(t.config,s):`${t.config.apiScheme}://${s}`}function uA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),lA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Tn(t,e,r);return s.customData._tokenResponse=n,s}function dv(t){return t!==void 0&&t.enterprise!==void 0}class dA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function hA(t,e){return nr(t,"GET","/v2/recaptchaConfig",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e){return nr(t,"POST","/v1/accounts:delete",e)}async function Fx(t,e){return nr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pA(t,e=!1){const n=Ie(t),r=await n.getIdToken(e),s=Sp(r);G(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:jo(Od(s.auth_time)),issuedAtTime:jo(Od(s.iat)),expirationTime:jo(Od(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Od(t){return Number(t)*1e3}function Sp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Xw(n);return s?JSON.parse(s):(Vl("Failed to decode base64 JWT payload"),null)}catch(s){return Vl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hv(t){const e=Sp(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _i(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof tn&&mA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jo(this.lastLoginAt),this.creationTime=jo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await _i(t,Fx(n,{idToken:r}));G(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ux(i.providerUserInfo):[],a=vA(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Qh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function yA(t){const e=Ie(t);await Iu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ux(t){return t.map(e=>{var{providerId:n}=e,r=Ep(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(t,e){const n=await Vx(t,{},async()=>{const r=va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Mx(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Lx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wA(t,e){return nr(t,"POST","/v2/accounts:revokeToken",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=hv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await _A(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new li;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(G(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(G(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new li,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ep(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _i(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pA(this,e)}reload(){return yA(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Iu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(qn(this.auth));const e=await this.getIdToken();return await _i(this,fA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,_=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:I,emailVerified:j,isAnonymous:O,providerData:L,stsTokenManager:E}=n;G(I&&E,e,"internal-error");const y=li.fromJSON(this.name,E);G(typeof I=="string",e,"internal-error"),ar(m,e.name),ar(g,e.name),G(typeof j=="boolean",e,"internal-error"),G(typeof O=="boolean",e,"internal-error"),ar(v,e.name),ar(T,e.name),ar(A,e.name),ar(N,e.name),ar(_,e.name),ar(w,e.name);const S=new zn({uid:I,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:O,photoURL:T,phoneNumber:v,tenantId:A,stsTokenManager:y,createdAt:_,lastLoginAt:w});return L&&Array.isArray(L)&&(S.providerData=L.map(k=>Object.assign({},k))),N&&(S._redirectEventId=N),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new li;s.updateFromServerResponse(n);const i=new zn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Iu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];G(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ux(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new li;a.updateFromIdToken(r);const u=new zn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;function Bn(t){Xn(t instanceof Function,"Expected a class definition");let e=fv.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zx.type="NONE";const pv=zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t,e,n){return`firebase:${t}:${e}:${n}`}class ui{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ml(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ml("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ui(Bn(pv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Bn(pv);const o=Ml(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=await d._get(o);if(f){const m=zn._fromJSON(e,f);d!==i&&(a=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ui(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ui(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kx(e))return"Blackberry";if(Gx(e))return"Webos";if($x(e))return"Safari";if((e.includes("chrome/")||qx(e))&&!e.includes("edge/"))return"Chrome";if(Wx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Bx(t=ht()){return/firefox\//i.test(t)}function $x(t=ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qx(t=ht()){return/crios\//i.test(t)}function Hx(t=ht()){return/iemobile/i.test(t)}function Wx(t=ht()){return/android/i.test(t)}function Kx(t=ht()){return/blackberry/i.test(t)}function Gx(t=ht()){return/webos/i.test(t)}function bp(t=ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xA(t=ht()){var e;return bp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EA(){return yC()&&document.documentMode===10}function Qx(t=ht()){return bp(t)||Wx(t)||Gx(t)||Kx(t)||/windows phone/i.test(t)||Hx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t,e=[]){let n;switch(t){case"Browser":n=mv(ht());break;case"Worker":n=`${mv(ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ns}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(t,e={}){return nr(t,"GET","/v2/passwordPolicy",Hr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=6;class bA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:SA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gv(this),this.idTokenSubscription=new gv(this),this.beforeStateQueue=new TA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ui.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fx(this,{idToken:e}),r=await zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Iu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(qn(this));const n=e?Ie(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IA(this),n=new bA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bn(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await ui.create(this,[Bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ks(t){return Ie(t)}class gv{constructor(e){this.auth=e,this.observer=null,this.addObserver=IC(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NA(t){oc=t}function Xx(t){return oc.loadJS(t)}function kA(){return oc.recaptchaEnterpriseScript}function AA(){return oc.gapiScript}function RA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const PA="recaptcha-enterprise",jA="NO_RECAPTCHA";class DA{constructor(e){this.type=PA,this.auth=ks(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{hA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new dA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;dv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(jA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&dv(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=kA();u.length!==0&&(u+=a),Xx(u).then(()=>{s(a,i,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function yv(t,e,n,r=!1){const s=new DA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Yh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await yv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await yv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t,e){const n=Di(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ia(i,e??{}))return s;fn(s,"already-initialized")}return n.initialize({options:e})}function LA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VA(t,e,n){const r=ks(t);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Jx(e),{host:o,port:a}=MA(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),FA()}function Jx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MA(t){const e=Jx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:vv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:vv(o)}}}function vv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function UA(t,e){return nr(t,"POST","/v1/accounts:update",e)}async function zA(t,e){return nr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t,e){return wa(t,"POST","/v1/accounts:signInWithPassword",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e){return wa(t,"POST","/v1/accounts:signInWithEmailLink",Hr(t,e))}async function qA(t,e){return wa(t,"POST","/v1/accounts:signInWithEmailLink",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Cp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new aa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new aa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,n,"signInWithPassword",BA);case"emailLink":return $A(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,r,"signUpPassword",zA);case"emailLink":return qA(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ci(t,e){return wa(t,"POST","/v1/accounts:signInWithIdp",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="http://localhost";class vs extends Cp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ep(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new vs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ci(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ci(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ci(e,n)}buildRequest(){const e={requestUri:HA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=va(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KA(t){const e=yo(vo(t)).link,n=e?yo(vo(e)).deep_link_id:null,r=yo(vo(t)).deep_link_id;return(r?yo(vo(r)).link:null)||r||n||e||t}class Np{constructor(e){var n,r,s,i,o,a;const u=yo(vo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=WA((s=u.mode)!==null&&s!==void 0?s:null);G(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=KA(e);try{return new Np(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.providerId=Oi.PROVIDER_ID}static credential(e,n){return aa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Np.parseLink(n);return G(r,"argument-error"),aa._fromEmailAndCode(e,r.code,r.tenantId)}}Oi.PROVIDER_ID="password";Oi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Zx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends xa{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends xa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends xa{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends xa{constructor(){super("twitter.com")}static credential(e,n){return vs._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return mr.credential(n,r)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t,e){return wa(t,"POST","/v1/accounts:signUp",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zn._fromIdTokenResponse(e,r,s),o=_v(r);return new _s({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=_v(r);return new _s({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function _v(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends tn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Su.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Su(e,n,r,s)}}function e1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Su._fromErrorAndOperation(t,i,e,r):i})}async function QA(t,e,n=!1){const r=await _i(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _s._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(t,e,n=!1){const{auth:r}=t;if(_n(r.app))return Promise.reject(qn(r));const s="reauthenticate";try{const i=await _i(t,e1(r,s,e,t),n);G(i.idToken,r,"internal-error");const o=Sp(i.idToken);G(o,r,"internal-error");const{sub:a}=o;return G(t.uid===a,r,"user-mismatch"),_s._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&fn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(t,e,n=!1){if(_n(t.app))return Promise.reject(qn(t));const r="signIn",s=await e1(t,r,e),i=await _s._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function XA(t,e){return t1(ks(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(t){const e=ks(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JA(t,e,n){if(_n(t.app))return Promise.reject(qn(t));const r=ks(t),o=await Yh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&n1(t),u}),a=await _s._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function ZA(t,e,n){return _n(t.app)?Promise.reject(qn(t)):XA(Ie(t),Oi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&n1(t),r})}function eR(t,e){return tR(Ie(t),null,e)}async function tR(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await _i(t,UA(r,i));await t._updateTokensIfNecessary(o,!0)}function nR(t,e,n,r){return Ie(t).onIdTokenChanged(e,n,r)}function rR(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function r1(t){return Ie(t).signOut()}const bu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bu,"1"),this.storage.removeItem(bu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=1e3,iR=10;class i1 extends s1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);EA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,iR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}i1.type="LOCAL";const oR=i1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends s1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}o1.type="SESSION";const a1=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ac(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async d=>d(n.origin,i)),u=await aR(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ac.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const d=kp("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function uR(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function cR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hR(){return l1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebaseLocalStorageDb",fR=1,Cu="firebaseLocalStorage",c1="fbase_key";class Ea{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lc(t,e){return t.transaction([Cu],e?"readwrite":"readonly").objectStore(Cu)}function pR(){const t=indexedDB.deleteDatabase(u1);return new Ea(t).toPromise()}function Xh(){const t=indexedDB.open(u1,fR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cu,{keyPath:c1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cu)?e(r):(r.close(),await pR(),e(await Xh()))})})}async function wv(t,e,n){const r=lc(t,!0).put({[c1]:e,value:n});return new Ea(r).toPromise()}async function mR(t,e){const n=lc(t,!1).get(e),r=await new Ea(n).toPromise();return r===void 0?null:r.value}function xv(t,e){const n=lc(t,!0).delete(e);return new Ea(n).toPromise()}const gR=800,yR=3;class d1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>yR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ac._getInstance(hR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cR(),!this.activeServiceWorker)return;this.sender=new lR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xh();return await wv(e,bu,"1"),await xv(e,bu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=lc(s,!1).getAll();return new Ea(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d1.type="LOCAL";const vR=d1;new _a(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t,e){return e?Bn(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends Cp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wR(t){return t1(t.auth,new Ap(t),t.bypassAuthState)}function xR(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),YA(n,new Ap(t),t.bypassAuthState)}async function ER(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),QA(n,new Ap(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wR;case"linkViaPopup":case"linkViaRedirect":return ER;case"reauthViaPopup":case"reauthViaRedirect":return xR;default:fn(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new _a(2e3,1e4);class ti extends h1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ti.currentPopupAction&&ti.currentPopupAction.cancel(),ti.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ti.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TR.get())};e()}}ti.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="pendingRedirect",Fl=new Map;class SR extends h1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fl.get(this.auth._key());if(!e){try{const r=await bR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fl.set(this.auth._key(),e)}return this.bypassAuthState||Fl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bR(t,e){const n=kR(e),r=NR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function CR(t,e){Fl.set(t._key(),e)}function NR(t){return Bn(t._redirectPersistence)}function kR(t){return Ml(IR,t.config.apiKey,t.name)}async function AR(t,e,n=!1){if(_n(t.app))return Promise.reject(qn(t));const r=ks(t),s=_R(r,e),o=await new SR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=10*60*1e3;class PR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!f1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ev(e))}saveEventToCache(e){this.cachedEventUids.add(Ev(e)),this.lastProcessedEventTime=Date.now()}}function Ev(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function f1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return f1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e={}){return nr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LR=/^https?/;async function VR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DR(t);for(const n of e)try{if(MR(n))return}catch{}fn(t,"unauthorized-domain")}function MR(t){const e=Gh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!LR.test(n))return!1;if(OR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new _a(3e4,6e4);function Tv(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UR(t){return new Promise((e,n)=>{var r,s,i;function o(){Tv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tv(),n(Tn(t,"network-request-failed"))},timeout:FR.get()})}if(!((s=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=In().gapi)===null||i===void 0)&&i.load)o();else{const a=RA("iframefcb");return In()[a]=()=>{gapi.load?o():n(Tn(t,"network-request-failed"))},Xx(`${AA()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ul=null,e})}let Ul=null;function zR(t){return Ul=Ul||UR(t),Ul}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new _a(5e3,15e3),$R="__/auth/iframe",qR="emulator/auth/iframe",HR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KR(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ip(e,qR):`https://${t.config.authDomain}/${$R}`,r={apiKey:e.apiKey,appName:t.name,v:Ns},s=WR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${va(r).slice(1)}`}async function GR(t){const e=await zR(t),n=In().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:KR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),a=In().setTimeout(()=>{i(o)},BR.get());function u(){In().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YR=500,XR=600,JR="_blank",ZR="http://localhost";class Iv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eP(t,e,n,r=YR,s=XR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},QR),{width:r.toString(),height:s.toString(),top:i,left:o}),d=ht().toLowerCase();n&&(a=qx(d)?JR:n),Bx(d)&&(e=e||ZR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[v,T])=>`${g}${v}=${T},`,"");if(xA(d)&&a!=="_self")return tP(e||"",a),new Iv(null);const m=window.open(e||"",a,f);G(m,t,"popup-blocked");try{m.focus()}catch{}return new Iv(m)}function tP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="__/auth/handler",rP="emulator/auth/handler",sP=encodeURIComponent("fac");async function Sv(t,e,n,r,s,i){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ns,eventId:s};if(e instanceof Zx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",TC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof xa){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const u=await t._getAppCheckToken(),d=u?`#${sP}=${encodeURIComponent(u)}`:"";return`${iP(t)}?${va(a).slice(1)}${d}`}function iP({config:t}){return t.emulator?Ip(t,rP):`https://${t.authDomain}/${nP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="webStorageSupport";class oP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a1,this._completeRedirectFn=AR,this._overrideRedirectResult=CR}async _openPopup(e,n,r,s){var i;Xn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Sv(e,n,r,Gh(),s);return eP(e,o,kp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Sv(e,n,r,Gh(),s);return uR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GR(e),r=new PR(e);return n.register("authEvent",s=>(G(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ld,{type:Ld},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ld];o!==void 0&&n(!!o),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qx()||$x()||bp()}}const aP=oP;var bv="@firebase/auth",Cv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cP(t){hn(new Zt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yx(t)},d=new CA(r,s,i,u);return LA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hn(new Zt("auth-internal",e=>{const n=ks(e.getProvider("auth").getImmediate());return(r=>new lP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kt(bv,Cv,uP(t)),kt(bv,Cv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=5*60,hP=tx("authIdTokenMaxAge")||dP;let Nv=null;const fP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hP)return;const s=n==null?void 0:n.token;Nv!==s&&(Nv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Rp(t=gp()){const e=Di(t,"auth");if(e.isInitialized())return e.getImmediate();const n=OA(t,{popupRedirectResolver:aP,persistence:[vR,oR,a1]}),r=tx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=fP(i.toString());rR(n,o,()=>o(n.currentUser)),nR(n,a=>o(a))}}const s=Jw("auth");return s&&VA(n,`http://${s}`),n}function pP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",pP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cP("Browser");var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,p1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function S(){}S.prototype=y.prototype,E.D=y.prototype,E.prototype=new S,E.prototype.constructor=E,E.C=function(k,R,P){for(var b=Array(arguments.length-2),he=2;he<arguments.length;he++)b[he-2]=arguments[he];return y.prototype[R].apply(k,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,S){S||(S=0);var k=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)k[R]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(R=0;16>R;++R)k[R]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=E.g[0],S=E.g[1],R=E.g[2];var P=E.g[3],b=y+(P^S&(R^P))+k[0]+3614090360&4294967295;y=S+(b<<7&4294967295|b>>>25),b=P+(R^y&(S^R))+k[1]+3905402710&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(S^P&(y^S))+k[2]+606105819&4294967295,R=P+(b<<17&4294967295|b>>>15),b=S+(y^R&(P^y))+k[3]+3250441966&4294967295,S=R+(b<<22&4294967295|b>>>10),b=y+(P^S&(R^P))+k[4]+4118548399&4294967295,y=S+(b<<7&4294967295|b>>>25),b=P+(R^y&(S^R))+k[5]+1200080426&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(S^P&(y^S))+k[6]+2821735955&4294967295,R=P+(b<<17&4294967295|b>>>15),b=S+(y^R&(P^y))+k[7]+4249261313&4294967295,S=R+(b<<22&4294967295|b>>>10),b=y+(P^S&(R^P))+k[8]+1770035416&4294967295,y=S+(b<<7&4294967295|b>>>25),b=P+(R^y&(S^R))+k[9]+2336552879&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(S^P&(y^S))+k[10]+4294925233&4294967295,R=P+(b<<17&4294967295|b>>>15),b=S+(y^R&(P^y))+k[11]+2304563134&4294967295,S=R+(b<<22&4294967295|b>>>10),b=y+(P^S&(R^P))+k[12]+1804603682&4294967295,y=S+(b<<7&4294967295|b>>>25),b=P+(R^y&(S^R))+k[13]+4254626195&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(S^P&(y^S))+k[14]+2792965006&4294967295,R=P+(b<<17&4294967295|b>>>15),b=S+(y^R&(P^y))+k[15]+1236535329&4294967295,S=R+(b<<22&4294967295|b>>>10),b=y+(R^P&(S^R))+k[1]+4129170786&4294967295,y=S+(b<<5&4294967295|b>>>27),b=P+(S^R&(y^S))+k[6]+3225465664&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^S&(P^y))+k[11]+643717713&4294967295,R=P+(b<<14&4294967295|b>>>18),b=S+(P^y&(R^P))+k[0]+3921069994&4294967295,S=R+(b<<20&4294967295|b>>>12),b=y+(R^P&(S^R))+k[5]+3593408605&4294967295,y=S+(b<<5&4294967295|b>>>27),b=P+(S^R&(y^S))+k[10]+38016083&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^S&(P^y))+k[15]+3634488961&4294967295,R=P+(b<<14&4294967295|b>>>18),b=S+(P^y&(R^P))+k[4]+3889429448&4294967295,S=R+(b<<20&4294967295|b>>>12),b=y+(R^P&(S^R))+k[9]+568446438&4294967295,y=S+(b<<5&4294967295|b>>>27),b=P+(S^R&(y^S))+k[14]+3275163606&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^S&(P^y))+k[3]+4107603335&4294967295,R=P+(b<<14&4294967295|b>>>18),b=S+(P^y&(R^P))+k[8]+1163531501&4294967295,S=R+(b<<20&4294967295|b>>>12),b=y+(R^P&(S^R))+k[13]+2850285829&4294967295,y=S+(b<<5&4294967295|b>>>27),b=P+(S^R&(y^S))+k[2]+4243563512&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^S&(P^y))+k[7]+1735328473&4294967295,R=P+(b<<14&4294967295|b>>>18),b=S+(P^y&(R^P))+k[12]+2368359562&4294967295,S=R+(b<<20&4294967295|b>>>12),b=y+(S^R^P)+k[5]+4294588738&4294967295,y=S+(b<<4&4294967295|b>>>28),b=P+(y^S^R)+k[8]+2272392833&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^S)+k[11]+1839030562&4294967295,R=P+(b<<16&4294967295|b>>>16),b=S+(R^P^y)+k[14]+4259657740&4294967295,S=R+(b<<23&4294967295|b>>>9),b=y+(S^R^P)+k[1]+2763975236&4294967295,y=S+(b<<4&4294967295|b>>>28),b=P+(y^S^R)+k[4]+1272893353&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^S)+k[7]+4139469664&4294967295,R=P+(b<<16&4294967295|b>>>16),b=S+(R^P^y)+k[10]+3200236656&4294967295,S=R+(b<<23&4294967295|b>>>9),b=y+(S^R^P)+k[13]+681279174&4294967295,y=S+(b<<4&4294967295|b>>>28),b=P+(y^S^R)+k[0]+3936430074&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^S)+k[3]+3572445317&4294967295,R=P+(b<<16&4294967295|b>>>16),b=S+(R^P^y)+k[6]+76029189&4294967295,S=R+(b<<23&4294967295|b>>>9),b=y+(S^R^P)+k[9]+3654602809&4294967295,y=S+(b<<4&4294967295|b>>>28),b=P+(y^S^R)+k[12]+3873151461&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^S)+k[15]+530742520&4294967295,R=P+(b<<16&4294967295|b>>>16),b=S+(R^P^y)+k[2]+3299628645&4294967295,S=R+(b<<23&4294967295|b>>>9),b=y+(R^(S|~P))+k[0]+4096336452&4294967295,y=S+(b<<6&4294967295|b>>>26),b=P+(S^(y|~R))+k[7]+1126891415&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~S))+k[14]+2878612391&4294967295,R=P+(b<<15&4294967295|b>>>17),b=S+(P^(R|~y))+k[5]+4237533241&4294967295,S=R+(b<<21&4294967295|b>>>11),b=y+(R^(S|~P))+k[12]+1700485571&4294967295,y=S+(b<<6&4294967295|b>>>26),b=P+(S^(y|~R))+k[3]+2399980690&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~S))+k[10]+4293915773&4294967295,R=P+(b<<15&4294967295|b>>>17),b=S+(P^(R|~y))+k[1]+2240044497&4294967295,S=R+(b<<21&4294967295|b>>>11),b=y+(R^(S|~P))+k[8]+1873313359&4294967295,y=S+(b<<6&4294967295|b>>>26),b=P+(S^(y|~R))+k[15]+4264355552&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~S))+k[6]+2734768916&4294967295,R=P+(b<<15&4294967295|b>>>17),b=S+(P^(R|~y))+k[13]+1309151649&4294967295,S=R+(b<<21&4294967295|b>>>11),b=y+(R^(S|~P))+k[4]+4149444226&4294967295,y=S+(b<<6&4294967295|b>>>26),b=P+(S^(y|~R))+k[11]+3174756917&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~S))+k[2]+718787259&4294967295,R=P+(b<<15&4294967295|b>>>17),b=S+(P^(R|~y))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var S=y-this.blockSize,k=this.B,R=this.h,P=0;P<y;){if(R==0)for(;P<=S;)s(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<y;)if(k[R++]=E.charCodeAt(P++),R==this.blockSize){s(this,k),R=0;break}}else for(;P<y;)if(k[R++]=E[P++],R==this.blockSize){s(this,k),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var S=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=S&255,S/=256;for(this.u(E),E=Array(16),y=S=0;4>y;++y)for(var k=0;32>k;k+=8)E[S++]=this.g[y]>>>k&255;return E};function i(E,y){var S=a;return Object.prototype.hasOwnProperty.call(S,E)?S[E]:S[E]=y(E)}function o(E,y){this.h=y;for(var S=[],k=!0,R=E.length-1;0<=R;R--){var P=E[R]|0;k&&P==y||(S[R]=P,k=!1)}this.g=S}var a={};function u(E){return-128<=E&&128>E?i(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return N(d(-E));for(var y=[],S=1,k=0;E>=S;k++)y[k]=E/S|0,S*=4294967296;return new o(y,0)}function f(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return N(f(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(y,8)),k=m,R=0;R<E.length;R+=8){var P=Math.min(8,E.length-R),b=parseInt(E.substring(R,R+P),y);8>P?(P=d(Math.pow(y,P)),k=k.j(P).add(d(b))):(k=k.j(S),k=k.add(d(b)))}return k}var m=u(0),g=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-N(this).m();for(var E=0,y=1,S=0;S<this.g.length;S++){var k=this.i(S);E+=(0<=k?k:4294967296+k)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(A(this))return"-"+N(this).toString(E);for(var y=d(Math.pow(E,6)),S=this,k="";;){var R=j(S,y).g;S=_(S,R.j(y));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(E);if(S=R,T(S))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=_(this,E),A(E)?-1:T(E)?0:1};function N(E){for(var y=E.g.length,S=[],k=0;k<y;k++)S[k]=~E.g[k];return new o(S,~E.h).add(g)}t.abs=function(){return A(this)?N(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),S=[],k=0,R=0;R<=y;R++){var P=k+(this.i(R)&65535)+(E.i(R)&65535),b=(P>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);k=b>>>16,P&=65535,b&=65535,S[R]=b<<16|P}return new o(S,S[S.length-1]&-2147483648?-1:0)};function _(E,y){return E.add(N(y))}t.j=function(E){if(T(this)||T(E))return m;if(A(this))return A(E)?N(this).j(N(E)):N(N(this).j(E));if(A(E))return N(this.j(N(E)));if(0>this.l(v)&&0>E.l(v))return d(this.m()*E.m());for(var y=this.g.length+E.g.length,S=[],k=0;k<2*y;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<E.g.length;R++){var P=this.i(k)>>>16,b=this.i(k)&65535,he=E.i(R)>>>16,fe=E.i(R)&65535;S[2*k+2*R]+=b*fe,w(S,2*k+2*R),S[2*k+2*R+1]+=P*fe,w(S,2*k+2*R+1),S[2*k+2*R+1]+=b*he,w(S,2*k+2*R+1),S[2*k+2*R+2]+=P*he,w(S,2*k+2*R+2)}for(k=0;k<y;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=y;k<2*y;k++)S[k]=0;return new o(S,0)};function w(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function I(E,y){this.g=E,this.h=y}function j(E,y){if(T(y))throw Error("division by zero");if(T(E))return new I(m,m);if(A(E))return y=j(N(E),y),new I(N(y.g),N(y.h));if(A(y))return y=j(E,N(y)),new I(N(y.g),y.h);if(30<E.g.length){if(A(E)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var S=g,k=y;0>=k.l(E);)S=O(S),k=O(k);var R=L(S,1),P=L(k,1);for(k=L(k,2),S=L(S,2);!T(k);){var b=P.add(k);0>=b.l(E)&&(R=R.add(S),P=b),k=L(k,1),S=L(S,1)}return y=_(E,R.j(y)),new I(R,y)}for(R=m;0<=E.l(y);){for(S=Math.max(1,Math.floor(E.m()/y.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=d(S),b=P.j(y);A(b)||0<b.l(E);)S-=k,P=d(S),b=P.j(y);T(P)&&(P=g),R=R.add(P),E=_(E,b)}return new I(R,E)}t.A=function(E){return j(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)&E.i(k);return new o(S,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)|E.i(k);return new o(S,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)^E.i(k);return new o(S,this.h^E.h)};function O(E){for(var y=E.g.length+1,S=[],k=0;k<y;k++)S[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(S,E.h)}function L(E,y){var S=y>>5;y%=32;for(var k=E.g.length-S,R=[],P=0;P<k;P++)R[P]=0<y?E.i(P+S)>>>y|E.i(P+S+1)<<32-y:E.i(P+S);return new o(R,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,us=o}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var m1,_o,g1,zl,Jh,y1,v1,_1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof gl=="object"&&gl];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var D=l[x];if(!(D in p))break e;p=p[D]}l=l[l.length-1],x=p[l],h=h(x),h!=x&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,x=!1,D={next:function(){if(!x&&p<l.length){var V=p++;return{value:h(V,l[V]),done:!1}}return x=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,x),l.apply(h,D)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var x=p.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function T(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(x,D,V){for(var z=Array(arguments.length-2),de=2;de<arguments.length;de++)z[de-2]=arguments[de];return h.prototype[D].apply(x,z)}}function A(l){const h=l.length;if(0<h){const p=Array(h);for(let x=0;x<h;x++)p[x]=l[x];return p}return[]}function N(l,h){for(let p=1;p<arguments.length;p++){const x=arguments[p];if(u(x)){const D=l.length||0,V=x.length||0;l.length=D+V;for(let z=0;z<V;z++)l[D+z]=x[z]}else l.push(x)}}class _{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var O=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function L(l,h,p){for(const x in l)h.call(p,l[x],x,l)}function E(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,h){let p,x;for(let D=1;D<arguments.length;D++){x=arguments[D];for(p in x)l[p]=x[p];for(let V=0;V<S.length;V++)p=S[V],Object.prototype.hasOwnProperty.call(x,p)&&(l[p]=x[p])}}function R(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){a.setTimeout(()=>{throw l},0)}function b(){var l=K;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class he{constructor(){this.h=this.g=null}add(h,p){const x=fe.get();x.set(h,p),this.h?this.h.next=x:this.g=x,this.h=x}}var fe=new _(()=>new tt,l=>l.reset());class tt{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,B=!1,K=new he,J=()=>{const l=a.Promise.resolve(void 0);Ve=()=>{l.then(we)}};var we=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(p){P(p)}var h=fe;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var An=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Rn(l,h){if(Ae.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{j(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Pn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Rn.aa.h.call(this)}}T(Rn,Ae);var Pn={2:"touch",3:"pen",4:"mouse"};Rn.prototype.h=function(){Rn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var jn="closure_listenable_"+(1e6*Math.random()|0),OT=0;function LT(l,h,p,x,D){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!x,this.ha=D,this.key=++OT,this.da=this.fa=!1}function Da(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Oa(l){this.src=l,this.g={},this.h=0}Oa.prototype.add=function(l,h,p,x,D){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var z=Pc(l,h,x,D);return-1<z?(h=l[z],p||(h.fa=!1)):(h=new LT(h,this.src,V,!!x,D),h.fa=p,l.push(h)),h};function Rc(l,h){var p=h.type;if(p in l.g){var x=l.g[p],D=Array.prototype.indexOf.call(x,h,void 0),V;(V=0<=D)&&Array.prototype.splice.call(x,D,1),V&&(Da(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Pc(l,h,p,x){for(var D=0;D<l.length;++D){var V=l[D];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==x)return D}return-1}var jc="closure_lm_"+(1e6*Math.random()|0),Dc={};function Cm(l,h,p,x,D){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Cm(l,h[V],p,x,D);return null}return p=Am(p),l&&l[jn]?l.K(h,p,d(x)?!!x.capture:!1,D):VT(l,h,p,!1,x,D)}function VT(l,h,p,x,D,V){if(!h)throw Error("Invalid event type");var z=d(D)?!!D.capture:!!D,de=Lc(l);if(de||(l[jc]=de=new Oa(l)),p=de.add(h,p,x,z,V),p.proxy)return p;if(x=MT(),p.proxy=x,x.src=l,x.listener=p,l.addEventListener)An||(D=z),D===void 0&&(D=!1),l.addEventListener(h.toString(),x,D);else if(l.attachEvent)l.attachEvent(km(h.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return p}function MT(){function l(p){return h.call(l.src,l.listener,p)}const h=FT;return l}function Nm(l,h,p,x,D){if(Array.isArray(h))for(var V=0;V<h.length;V++)Nm(l,h[V],p,x,D);else x=d(x)?!!x.capture:!!x,p=Am(p),l&&l[jn]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],p=Pc(V,p,x,D),-1<p&&(Da(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=Lc(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Pc(h,p,x,D)),(p=-1<l?h[l]:null)&&Oc(p))}function Oc(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[jn])Rc(h.i,l);else{var p=l.type,x=l.proxy;h.removeEventListener?h.removeEventListener(p,x,l.capture):h.detachEvent?h.detachEvent(km(p),x):h.addListener&&h.removeListener&&h.removeListener(x),(p=Lc(h))?(Rc(p,l),p.h==0&&(p.src=null,h[jc]=null)):Da(l)}}}function km(l){return l in Dc?Dc[l]:Dc[l]="on"+l}function FT(l,h){if(l.da)l=!0;else{h=new Rn(h,this);var p=l.listener,x=l.ha||l.src;l.fa&&Oc(l),l=p.call(x,h)}return l}function Lc(l){return l=l[jc],l instanceof Oa?l:null}var Vc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Am(l){return typeof l=="function"?l:(l[Vc]||(l[Vc]=function(h){return l.handleEvent(h)}),l[Vc])}function nt(){ce.call(this),this.i=new Oa(this),this.M=this,this.F=null}T(nt,ce),nt.prototype[jn]=!0,nt.prototype.removeEventListener=function(l,h,p,x){Nm(this,l,h,p,x)};function ft(l,h){var p,x=l.F;if(x)for(p=[];x;x=x.F)p.push(x);if(l=l.M,x=h.type||h,typeof h=="string")h=new Ae(h,l);else if(h instanceof Ae)h.target=h.target||l;else{var D=h;h=new Ae(x,l),k(h,D)}if(D=!0,p)for(var V=p.length-1;0<=V;V--){var z=h.g=p[V];D=La(z,x,!0,h)&&D}if(z=h.g=l,D=La(z,x,!0,h)&&D,D=La(z,x,!1,h)&&D,p)for(V=0;V<p.length;V++)z=h.g=p[V],D=La(z,x,!1,h)&&D}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],x=0;x<p.length;x++)Da(p[x]);delete l.g[h],l.h--}}this.F=null},nt.prototype.K=function(l,h,p,x){return this.i.add(String(l),h,!1,p,x)},nt.prototype.L=function(l,h,p,x){return this.i.add(String(l),h,!0,p,x)};function La(l,h,p,x){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,V=0;V<h.length;++V){var z=h[V];if(z&&!z.da&&z.capture==p){var de=z.listener,He=z.ha||z.src;z.fa&&Rc(l.i,z),D=de.call(He,x)!==!1&&D}}return D&&!x.defaultPrevented}function Rm(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function Pm(l){l.g=Rm(()=>{l.g=null,l.i&&(l.i=!1,Pm(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class UT extends ce{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Pm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(l){ce.call(this),this.h=l,this.g={}}T($i,ce);var jm=[];function Dm(l){L(l.g,function(h,p){this.g.hasOwnProperty(p)&&Oc(h)},l),l.g={}}$i.prototype.N=function(){$i.aa.N.call(this),Dm(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mc=a.JSON.stringify,zT=a.JSON.parse,BT=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Fc(){}Fc.prototype.h=null;function Om(l){return l.h||(l.h=l.i())}function Lm(){}var qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Uc(){Ae.call(this,"d")}T(Uc,Ae);function zc(){Ae.call(this,"c")}T(zc,Ae);var Gr={},Vm=null;function Va(){return Vm=Vm||new nt}Gr.La="serverreachability";function Mm(l){Ae.call(this,Gr.La,l)}T(Mm,Ae);function Hi(l){const h=Va();ft(h,new Mm(h))}Gr.STAT_EVENT="statevent";function Fm(l,h){Ae.call(this,Gr.STAT_EVENT,l),this.stat=h}T(Fm,Ae);function pt(l){const h=Va();ft(h,new Fm(h,l))}Gr.Ma="timingevent";function Um(l,h){Ae.call(this,Gr.Ma,l),this.size=h}T(Um,Ae);function Wi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function $T(l,h,p,x,D,V){l.info(function(){if(l.g)if(V)for(var z="",de=V.split("&"),He=0;He<de.length;He++){var se=de[He].split("=");if(1<se.length){var rt=se[0];se=se[1];var st=rt.split("_");z=2<=st.length&&st[1]=="type"?z+(rt+"="+se+"&"):z+(rt+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+x+") [attempt "+D+"]: "+h+`
`+p+`
`+z})}function qT(l,h,p,x,D,V,z){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+D+"]: "+h+`
`+p+`
`+V+" "+z})}function Ds(l,h,p,x){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+WT(l,p)+(x?" "+x:"")})}function HT(l,h){l.info(function(){return"TIMEOUT: "+h})}Ki.prototype.info=function(){};function WT(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var x=p[l];if(!(2>x.length)){var D=x[1];if(Array.isArray(D)&&!(1>D.length)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<D.length;z++)D[z]=""}}}}return Mc(p)}catch{return h}}var Ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bc;function Fa(){}T(Fa,Fc),Fa.prototype.g=function(){return new XMLHttpRequest},Fa.prototype.i=function(){return{}},Bc=new Fa;function rr(l,h,p,x){this.j=l,this.i=h,this.l=p,this.R=x||1,this.U=new $i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bm}function Bm(){this.i=null,this.g="",this.h=!1}var $m={},$c={};function qc(l,h,p){l.L=1,l.v=$a(Dn(h)),l.m=p,l.P=!0,qm(l,null)}function qm(l,h){l.F=Date.now(),Ua(l),l.A=Dn(l.v);var p=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),sg(p.i,"t",x),l.C=0,p=l.j.J,l.h=new Bm,l.g=Eg(l.j,p?h:null,!l.m),0<l.O&&(l.M=new UT(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,x=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(jm[0]=D.toString()),D=jm);for(var V=0;V<D.length;V++){var z=Cm(p,D[V],x||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Hi(),$T(l.i,l.u,l.A,l.l,l.R,l.m)}rr.prototype.ca=function(l){l=l.target;const h=this.M;h&&On(l)==3?h.j():this.Y(l)},rr.prototype.Y=function(l){try{if(l==this.g)e:{const st=On(this.g);var h=this.g.Ba();const Vs=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||dg(this.g)))){this.J||st!=4||h==7||(h==8||0>=Vs?Hi(3):Hi(2)),Hc(this);var p=this.g.Z();this.X=p;t:if(Hm(this)){var x=dg(this.g);l="";var D=x.length,V=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),Gi(this);var z="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,l+=this.h.i.decode(x[h],{stream:!(V&&h==D-1)});x.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=p==200,qT(this.i,this.u,this.A,this.l,this.R,st,p),this.o){if(this.T&&!this.K){t:{if(this.g){var de,He=this.g;if((de=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(de)){var se=de;break t}}se=null}if(p=se)Ds(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wc(this,p);else{this.o=!1,this.s=3,pt(12),Qr(this),Gi(this);break e}}if(this.P){p=!0;let nn;for(;!this.J&&this.C<z.length;)if(nn=KT(this,z),nn==$c){st==4&&(this.s=4,pt(14),p=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==$m){this.s=4,pt(15),Ds(this.i,this.l,z,"[Invalid Chunk]"),p=!1;break}else Ds(this.i,this.l,nn,null),Wc(this,nn);if(Hm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||z.length!=0||this.h.h||(this.s=1,pt(16),p=!1),this.o=this.o&&p,!p)Ds(this.i,this.l,z,"[Invalid Chunked Response]"),Qr(this),Gi(this);else if(0<z.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Jc(rt),rt.M=!0,pt(11))}}else Ds(this.i,this.l,z,null),Wc(this,z);st==4&&Qr(this),this.o&&!this.J&&(st==4?vg(this.j,this):(this.o=!1,Ua(this)))}else cI(this.g),p==400&&0<z.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Qr(this),Gi(this)}}}catch{}finally{}};function Hm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function KT(l,h){var p=l.C,x=h.indexOf(`
`,p);return x==-1?$c:(p=Number(h.substring(p,x)),isNaN(p)?$m:(x+=1,x+p>h.length?$c:(h=h.slice(x,x+p),l.C=x+p,h)))}rr.prototype.cancel=function(){this.J=!0,Qr(this)};function Ua(l){l.S=Date.now()+l.I,Wm(l,l.I)}function Wm(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Wi(g(l.ba,l),h)}function Hc(l){l.B&&(a.clearTimeout(l.B),l.B=null)}rr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(HT(this.i,this.A),this.L!=2&&(Hi(),pt(17)),Qr(this),this.s=2,Gi(this)):Wm(this,this.S-l)};function Gi(l){l.j.G==0||l.J||vg(l.j,l)}function Qr(l){Hc(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Dm(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Wc(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Kc(p.h,l))){if(!l.K&&Kc(p.h,l)&&p.G==3){try{var x=p.Da.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var D=x;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Qa(p),Ka(p);else break e;Xc(p),pt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Wi(g(p.Za,p),6e3));if(1>=Qm(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Xr(p,11)}else if((l.K||p.g==l)&&Qa(p),!w(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let se=D[h];if(p.T=se[0],se=se[1],p.G==2)if(se[0]=="c"){p.K=se[1],p.ia=se[2];const rt=se[3];rt!=null&&(p.la=rt,p.j.info("VER="+p.la));const st=se[4];st!=null&&(p.Aa=st,p.j.info("SVER="+p.Aa));const Vs=se[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(x=1.5*Vs,p.L=x,p.j.info("backChannelRequestTimeoutMs_="+x)),x=p;const nn=l.g;if(nn){const Xa=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var V=x.h;V.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Gc(V,V.h),V.h=null))}if(x.D){const Zc=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zc&&(x.ya=Zc,me(x.I,x.D,Zc))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),x=p;var z=l;if(x.qa=xg(x,x.J?x.ia:null,x.W),z.K){Ym(x.h,z);var de=z,He=x.L;He&&(de.I=He),de.B&&(Hc(de),Ua(de)),x.g=z}else gg(x);0<p.i.length&&Ga(p)}else se[0]!="stop"&&se[0]!="close"||Xr(p,7);else p.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?Xr(p,7):Yc(p):se[0]!="noop"&&p.l&&p.l.ta(se),p.v=0)}}Hi(4)}catch{}}var GT=class{constructor(l,h){this.g=l,this.map=h}};function Km(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Qm(l){return l.h?1:l.g?l.g.size:0}function Kc(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Gc(l,h){l.g?l.g.add(h):l.h=h}function Ym(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Km.prototype.cancel=function(){if(this.i=Xm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Xm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return A(l.i)}function QT(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,x=0;x<p;x++)h.push(l[x]);return h}h=[],p=0;for(x in l)h[p++]=l[x];return h}function YT(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const x in l)h[p++]=x;return h}}}function Jm(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=YT(l),x=QT(l),D=x.length,V=0;V<D;V++)h.call(void 0,x[V],p&&p[V],l)}var Zm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XT(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var x=l[p].indexOf("="),D=null;if(0<=x){var V=l[p].substring(0,x);D=l[p].substring(x+1)}else V=l[p];h(V,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Yr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Yr){this.h=l.h,za(this,l.j),this.o=l.o,this.g=l.g,Ba(this,l.s),this.l=l.l;var h=l.i,p=new Xi;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),eg(this,p),this.m=l.m}else l&&(h=String(l).match(Zm))?(this.h=!1,za(this,h[1]||"",!0),this.o=Qi(h[2]||""),this.g=Qi(h[3]||"",!0),Ba(this,h[4]),this.l=Qi(h[5]||"",!0),eg(this,h[6]||"",!0),this.m=Qi(h[7]||"")):(this.h=!1,this.i=new Xi(null,this.h))}Yr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Yi(h,tg,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Yi(h,tg,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Yi(p,p.charAt(0)=="/"?eI:ZT,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Yi(p,nI)),l.join("")};function Dn(l){return new Yr(l)}function za(l,h,p){l.j=p?Qi(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ba(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function eg(l,h,p){h instanceof Xi?(l.i=h,rI(l.i,l.h)):(p||(h=Yi(h,tI)),l.i=new Xi(h,l.h))}function me(l,h,p){l.i.set(h,p)}function $a(l){return me(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Qi(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Yi(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,JT),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function JT(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var tg=/[#\/\?@]/g,ZT=/[#\?:]/g,eI=/[#\?]/g,tI=/[#\?@]/g,nI=/#/g;function Xi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function sr(l){l.g||(l.g=new Map,l.h=0,l.i&&XT(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Xi.prototype,t.add=function(l,h){sr(this),this.i=null,l=Os(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function ng(l,h){sr(l),h=Os(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function rg(l,h){return sr(l),h=Os(l,h),l.g.has(h)}t.forEach=function(l,h){sr(this),this.g.forEach(function(p,x){p.forEach(function(D){l.call(h,D,x,this)},this)},this)},t.na=function(){sr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let x=0;x<h.length;x++){const D=l[x];for(let V=0;V<D.length;V++)p.push(h[x])}return p},t.V=function(l){sr(this);let h=[];if(typeof l=="string")rg(this,l)&&(h=h.concat(this.g.get(Os(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return sr(this),this.i=null,l=Os(this,l),rg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function sg(l,h,p){ng(l,h),0<p.length&&(l.i=null,l.g.set(Os(l,h),A(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var x=h[p];const V=encodeURIComponent(String(x)),z=this.V(x);for(x=0;x<z.length;x++){var D=V;z[x]!==""&&(D+="="+encodeURIComponent(String(z[x]))),l.push(D)}}return this.i=l.join("&")};function Os(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function rI(l,h){h&&!l.j&&(sr(l),l.i=null,l.g.forEach(function(p,x){var D=x.toLowerCase();x!=D&&(ng(this,x),sg(this,D,p))},l)),l.j=h}function sI(l,h){const p=new Ki;if(a.Image){const x=new Image;x.onload=v(ir,p,"TestLoadImage: loaded",!0,h,x),x.onerror=v(ir,p,"TestLoadImage: error",!1,h,x),x.onabort=v(ir,p,"TestLoadImage: abort",!1,h,x),x.ontimeout=v(ir,p,"TestLoadImage: timeout",!1,h,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else h(!1)}function iI(l,h){const p=new Ki,x=new AbortController,D=setTimeout(()=>{x.abort(),ir(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:x.signal}).then(V=>{clearTimeout(D),V.ok?ir(p,"TestPingServer: ok",!0,h):ir(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),ir(p,"TestPingServer: error",!1,h)})}function ir(l,h,p,x,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),x(p)}catch{}}function oI(){this.g=new BT}function aI(l,h,p){const x=p||"";try{Jm(l,function(D,V){let z=D;d(D)&&(z=Mc(D)),h.push(x+V+"="+encodeURIComponent(z))})}catch(D){throw h.push(x+"type="+encodeURIComponent("_badmap")),D}}function qa(l){this.l=l.Ub||null,this.j=l.eb||!1}T(qa,Fc),qa.prototype.g=function(){return new Ha(this.l,this.j)},qa.prototype.i=function(l){return function(){return l}}({});function Ha(l,h){nt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ha,nt),t=Ha.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Zi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ig(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ig(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ji(this):Zi(this),this.readyState==3&&ig(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ji(this))},t.Qa=function(l){this.g&&(this.response=l,Ji(this))},t.ga=function(){this.g&&Ji(this)};function Ji(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Zi(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Zi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function og(l){let h="";return L(l,function(p,x){h+=x,h+=":",h+=p,h+=`\r
`}),h}function Qc(l,h,p){e:{for(x in p){var x=!1;break e}x=!0}x||(p=og(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):me(l,h,p))}function be(l){nt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(be,nt);var lI=/^https?$/i,uI=["POST","PUT"];t=be.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bc.g(),this.v=this.o?Om(this.o):Om(Bc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){ag(this,V);return}if(l=p||"",p=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var D in x)p.set(D,x[D]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const V of x.keys())p.set(V,x.get(V));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),D=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uI,h,void 0))||x||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of p)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cg(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){ag(this,V)}};function ag(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,lg(l),Wa(l)}function lg(l){l.A||(l.A=!0,ft(l,"complete"),ft(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ft(this,"complete"),ft(this,"abort"),Wa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wa(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ug(this):this.bb())},t.bb=function(){ug(this)};function ug(l){if(l.h&&typeof o<"u"&&(!l.v[1]||On(l)!=4||l.Z()!=2)){if(l.u&&On(l)==4)Rm(l.Ea,0,l);else if(ft(l,"readystatechange"),On(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var x;if(x=z===0){var D=String(l.D).match(Zm)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),x=!lI.test(D?D.toLowerCase():"")}p=x}if(p)ft(l,"complete"),ft(l,"success");else{l.m=6;try{var V=2<On(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",lg(l)}}finally{Wa(l)}}}}function Wa(l,h){if(l.g){cg(l);const p=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||ft(l,"ready");try{p.onreadystatechange=x}catch{}}}function cg(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function On(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),zT(h)}};function dg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function cI(l){const h={};l=(l.g&&2<=On(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(w(l[x]))continue;var p=R(l[x]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[D]||[];h[D]=V,V.push(p)}E(h,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function hg(l){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eo("baseRetryDelayMs",5e3,l),this.cb=eo("retryDelaySeedMs",1e4,l),this.Wa=eo("forwardChannelMaxRetries",2,l),this.wa=eo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Km(l&&l.concurrentRequestLimit),this.Da=new oI,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hg.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,x){pt(0),this.W=l,this.H=h||{},p&&x!==void 0&&(this.H.OSID=p,this.H.OAID=x),this.F=this.X,this.I=xg(this,null,this.W),Ga(this)};function Yc(l){if(fg(l),l.G==3){var h=l.U++,p=Dn(l.I);if(me(p,"SID",l.K),me(p,"RID",h),me(p,"TYPE","terminate"),to(l,p),h=new rr(l,l.j,h),h.L=2,h.v=$a(Dn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=Eg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ua(h)}wg(l)}function Ka(l){l.g&&(Jc(l),l.g.cancel(),l.g=null)}function fg(l){Ka(l),l.u&&(a.clearTimeout(l.u),l.u=null),Qa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ga(l){if(!Gm(l.h)&&!l.s){l.s=!0;var h=l.Ga;Ve||J(),B||(Ve(),B=!0),K.add(h,l),l.B=0}}function dI(l,h){return Qm(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Wi(g(l.Ga,l,h),_g(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new rr(this,this.j,l);let V=this.o;if(this.S&&(V?(V=y(V),k(V,this.S)):V=this.S),this.m!==null||this.O||(D.H=V,V=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var x=this.i[p];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=mg(this,D,h),p=Dn(this.I),me(p,"RID",l),me(p,"CVER",22),this.D&&me(p,"X-HTTP-Session-Id",this.D),to(this,p),V&&(this.O?h="headers="+encodeURIComponent(String(og(V)))+"&"+h:this.m&&Qc(p,this.m,V)),Gc(this.h,D),this.Ua&&me(p,"TYPE","init"),this.P?(me(p,"$req",h),me(p,"SID","null"),D.T=!0,qc(D,p,null)):qc(D,p,h),this.G=2}}else this.G==3&&(l?pg(this,l):this.i.length==0||Gm(this.h)||pg(this))};function pg(l,h){var p;h?p=h.l:p=l.U++;const x=Dn(l.I);me(x,"SID",l.K),me(x,"RID",p),me(x,"AID",l.T),to(l,x),l.m&&l.o&&Qc(x,l.m,l.o),p=new rr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=mg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Gc(l.h,p),qc(p,x,h)}function to(l,h){l.H&&L(l.H,function(p,x){me(h,x,p)}),l.l&&Jm({},function(p,x){me(h,x,p)})}function mg(l,h,p){p=Math.min(l.i.length,p);var x=l.l?g(l.l.Na,l.l,l):null;e:{var D=l.i;let V=-1;for(;;){const z=["count="+p];V==-1?0<p?(V=D[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let de=!0;for(let He=0;He<p;He++){let se=D[He].g;const rt=D[He].map;if(se-=V,0>se)V=Math.max(0,D[He].g-100),de=!1;else try{aI(rt,z,"req"+se+"_")}catch{x&&x(rt)}}if(de){x=z.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,x}function gg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Ve||J(),B||(Ve(),B=!0),K.add(h,l),l.v=0}}function Xc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Wi(g(l.Fa,l),_g(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,yg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Wi(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Ka(this),yg(this))};function Jc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function yg(l){l.g=new rr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Dn(l.qa);me(h,"RID","rpc"),me(h,"SID",l.K),me(h,"AID",l.T),me(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&me(h,"TO",l.ja),me(h,"TYPE","xmlhttp"),to(l,h),l.m&&l.o&&Qc(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=$a(Dn(h)),p.m=null,p.P=!0,qm(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Ka(this),Xc(this),pt(19))};function Qa(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function vg(l,h){var p=null;if(l.g==h){Qa(l),Jc(l),l.g=null;var x=2}else if(Kc(l.h,h))p=h.D,Ym(l.h,h),x=1;else return;if(l.G!=0){if(h.o)if(x==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=l.B;x=Va(),ft(x,new Um(x,p)),Ga(l)}else gg(l);else if(D=h.s,D==3||D==0&&0<h.X||!(x==1&&dI(l,h)||x==2&&Xc(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),D){case 1:Xr(l,5);break;case 4:Xr(l,10);break;case 3:Xr(l,6);break;default:Xr(l,2)}}}function _g(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Xr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),x=l.Xa;const D=!x;x=new Yr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||za(x,"https"),$a(x),D?sI(x.toString(),p):iI(x.toString(),p)}else pt(2);l.G=0,l.l&&l.l.sa(h),wg(l),fg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function wg(l){if(l.G=0,l.ka=[],l.l){const h=Xm(l.h);(h.length!=0||l.i.length!=0)&&(N(l.ka,h),N(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function xg(l,h,p){var x=p instanceof Yr?Dn(p):new Yr(p);if(x.g!="")h&&(x.g=h+"."+x.g),Ba(x,x.s);else{var D=a.location;x=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var V=new Yr(null);x&&za(V,x),h&&(V.g=h),D&&Ba(V,D),p&&(V.l=p),x=V}return p=l.D,h=l.ya,p&&h&&me(x,p,h),me(x,"VER",l.la),to(l,x),x}function Eg(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new be(new qa({eb:p})):new be(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tg(){}t=Tg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ya(){}Ya.prototype.g=function(l,h){return new Pt(l,h)};function Pt(l,h){nt.call(this),this.g=new hg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!w(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ls(this)}T(Pt,nt),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Yc(this.g)},Pt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Mc(l),l=p);h.i.push(new GT(h.Ya++,l)),h.G==3&&Ga(h)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Yc(this.g),delete this.g,Pt.aa.N.call(this)};function Ig(l){Uc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}T(Ig,Uc);function Sg(){zc.call(this),this.status=1}T(Sg,zc);function Ls(l){this.g=l}T(Ls,Tg),Ls.prototype.ua=function(){ft(this.g,"a")},Ls.prototype.ta=function(l){ft(this.g,new Ig(l))},Ls.prototype.sa=function(l){ft(this.g,new Sg)},Ls.prototype.ra=function(){ft(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,_1=function(){return new Ya},v1=function(){return Va()},y1=Gr,Jh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,zl=Ma,zm.COMPLETE="complete",g1=zm,Lm.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",nt.prototype.listen=nt.prototype.K,_o=Lm,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,m1=be}).apply(typeof gl<"u"?gl:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Li="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new nc("@firebase/firestore");function co(){return ws.logLevel}function q(t,...e){if(ws.logLevel<=te.DEBUG){const n=e.map(Pp);ws.debug(`Firestore (${Li}): ${t}`,...n)}}function Jn(t,...e){if(ws.logLevel<=te.ERROR){const n=e.map(Pp);ws.error(`Firestore (${Li}): ${t}`,...n)}}function wi(t,...e){if(ws.logLevel<=te.WARN){const n=e.map(Pp);ws.warn(`Firestore (${Li}): ${t}`,...n)}}function Pp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Li}) INTERNAL ASSERTION FAILED: `+t;throw Jn(e),new Error(e)}function le(t,e){t||Q()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class gP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yP{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new w1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new lt(e)}}class vP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _P{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new vP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new wP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=EP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function xi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Le(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Le(0,0))}static max(){return new Y(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return la.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof la?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _e extends la{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const TP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends la{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return TP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new H(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new H(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(_e.fromString(e))}static fromName(e){return new W(_e.fromString(e).popFirst(5))}static empty(){return new W(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new _e(e.slice()))}}function IP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Or(s,W.empty(),e)}function SP(t){return new Or(t.readTime,t.key,-1)}class Or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Or(Y.min(),W.empty(),-1)}static max(){return new Or(Y.max(),W.empty(),-1)}}function bP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==CP)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++a,a===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function kP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ia(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jp.oe=-1;function uc(t){return t==null}function Nu(t){return t===0&&1/t==-1/0}function AP(t){return typeof t=="number"&&Number.isInteger(t)&&!Nu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function As(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function E1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.comparator=e,this.root=n||Ge.EMPTY}insert(e,n){return new Se(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ge.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ge.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yl(this.root,e,this.comparator,!1)}getReverseIterator(){return new yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yl(this.root,e,this.comparator,!0)}}class yl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ge{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ge.RED,this.left=s??Ge.EMPTY,this.right=i??Ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ge(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ge.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ge.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}Ge.EMPTY=null,Ge.RED=!0,Ge.BLACK=!1;Ge.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ge(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(e){return new Pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class Pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new Lt([])}unionWith(e){let n=new Je(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new T1("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const RP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(le(!!t),typeof t=="string"){let e=0;const n=RP.exec(t);if(le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xs(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Op(t){const e=t.mapValue.fields.__previous_value__;return Dp(e)?Op(e):e}function ua(t){const e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,r,s,i,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class ca{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ca("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dp(t)?4:DP(t)?9007199254740991:jP(t)?10:11:Q()}function Cn(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ua(t).isEqual(ua(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Lr(s.timestampValue),a=Lr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return xs(s.bytesValue).isEqual(xs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Re(s.geoPointValue.latitude)===Re(i.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Re(s.integerValue)===Re(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Re(s.doubleValue),a=Re(i.doubleValue);return o===a?Nu(o)===Nu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return xi(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Rv(o)!==Rv(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Cn(o[u],a[u])))return!1;return!0}(t,e);default:return Q()}}function da(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function Ei(t,e){if(t===e)return 0;const n=Es(t),r=Es(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Re(i.integerValue||i.doubleValue),u=Re(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return jv(t.timestampValue,e.timestampValue);case 4:return jv(ua(t),ua(e));case 5:return ie(t.stringValue,e.stringValue);case 6:return function(i,o){const a=xs(i),u=xs(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=ie(a[d],u[d]);if(f!==0)return f}return ie(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ie(Re(i.latitude),Re(o.latitude));return a!==0?a:ie(Re(i.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,d,f;const m=i.fields||{},g=o.fields||{},v=(a=m.value)===null||a===void 0?void 0:a.arrayValue,T=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=ie(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:Dv(v,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===vl.mapValue&&o===vl.mapValue)return 0;if(i===vl.mapValue)return 1;if(o===vl.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=ie(u[m],f[m]);if(g!==0)return g;const v=Ei(a[u[m]],d[f[m]]);if(v!==0)return v}return ie(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Q()}}function jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=Lr(t),r=Lr(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function Dv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ei(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function Ti(t){return Zh(t)}function Zh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Zh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Zh(n.fields[o])}`;return s+"}"}(t.mapValue):Q()}function ef(t){return!!t&&"integerValue"in t}function Lp(t){return!!t&&"arrayValue"in t}function Ov(t){return!!t&&"nullValue"in t}function Lv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bl(t){return!!t&&"mapValue"in t}function jP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Do(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return As(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Do(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Do(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Do(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Do(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Bl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Bl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){As(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new It(Do(this.value))}}function I1(t){const e=[];return As(t.fields,(n,r)=>{const s=new Ye([n]);if(Bl(r)){const i=I1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ct(e,0,Y.min(),Y.min(),Y.min(),It.empty(),0)}static newFoundDocument(e,n,r,s){return new ct(e,1,n,Y.min(),r,s,0)}static newNoDocument(e,n){return new ct(e,2,n,Y.min(),Y.min(),It.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,Y.min(),Y.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.position=e,this.inclusive=n}}function Vv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Ei(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n="asc"){this.field=e,this.dir=n}}function OP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{}class Fe extends S1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VP(e,n,r):n==="array-contains"?new UP(e,r):n==="in"?new zP(e,r):n==="not-in"?new BP(e,r):n==="array-contains-any"?new $P(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new MP(e,r):new FP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ei(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(Ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends S1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Nn(e,n)}matches(e){return b1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function b1(t){return t.op==="and"}function C1(t){return LP(t)&&b1(t)}function LP(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function tf(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Ti(t.value);if(C1(t))return t.filters.map(e=>tf(e)).join(",");{const e=t.filters.map(n=>tf(n)).join(",");return`${t.op}(${e})`}}function N1(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&Cn(r.value,s.value)}(t,e):t instanceof Nn?function(r,s){return s instanceof Nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&N1(o,s.filters[a]),!0):!1}(t,e):void Q()}function k1(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ti(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(k1).join(" ,")+"}"}(t):"Filter"}class VP extends Fe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class MP extends Fe{constructor(e,n){super(e,"in",n),this.keys=A1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FP extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=A1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function A1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class UP extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lp(n)&&da(n.arrayValue,this.value)}}class zP extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&da(this.value.arrayValue,n)}}class BP extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!da(this.value.arrayValue,n)}}class $P extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>da(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Fv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new qP(t,e,n,r,s,i,o)}function Vp(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),uc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ti(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ti(r)).join(",")),e.ue=n}return e.ue}function Mp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!OP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!N1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mv(t.startAt,e.startAt)&&Mv(t.endAt,e.endAt)}function nf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HP(t,e,n,r,s,i,o,a){return new cc(t,e,n,r,s,i,o,a)}function Fp(t){return new cc(t)}function Uv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WP(t){return t.collectionGroup!==null}function Oo(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Je(Ye.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Au(i,r))}),n.has(Ye.keyField().canonicalString())||e.ce.push(new Au(Ye.keyField(),r))}return e.ce}function Sn(t){const e=X(t);return e.le||(e.le=KP(e,Oo(t))),e.le}function KP(t,e){if(t.limitType==="F")return Fv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Au(s.field,i)});const n=t.endAt?new ku(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ku(t.startAt.position,t.startAt.inclusive):null;return Fv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rf(t,e,n){return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dc(t,e){return Mp(Sn(t),Sn(e))&&t.limitType===e.limitType}function R1(t){return`${Vp(Sn(t))}|lt:${t.limitType}`}function Us(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>k1(s)).join(", ")}]`),uc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ti(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ti(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function hc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Oo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const d=Vv(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Oo(r),s)||r.endAt&&!function(o,a,u){const d=Vv(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Oo(r),s))}(t,e)}function GP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function P1(t){return(e,n)=>{let r=!1;for(const s of Oo(t)){const i=QP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function QP(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),d=a.data.field(i);return u!==null&&d!==null?Ei(u,d):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return E1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new Se(W.comparator);function Zn(){return YP}const j1=new Se(W.comparator);function wo(...t){let e=j1;for(const n of t)e=e.insert(n.key,n);return e}function D1(t){let e=j1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function is(){return Lo()}function O1(){return Lo()}function Lo(){return new Vi(t=>t.toString(),(t,e)=>t.isEqual(e))}const XP=new Se(W.comparator),JP=new Je(W.comparator);function ee(...t){let e=JP;for(const n of t)e=e.add(n);return e}const ZP=new Je(ie);function ej(){return ZP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nu(e)?"-0":e}}function L1(t){return{integerValue:""+t}}function tj(t,e){return AP(e)?L1(e):Up(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this._=void 0}}function nj(t,e,n){return t instanceof Ru?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Dp(i)&&(i=Op(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ii?M1(t,e):t instanceof ha?F1(t,e):function(s,i){const o=V1(s,i),a=zv(o)+zv(s.Pe);return ef(o)&&ef(s.Pe)?L1(a):Up(s.serializer,a)}(t,e)}function rj(t,e,n){return t instanceof Ii?M1(t,e):t instanceof ha?F1(t,e):n}function V1(t,e){return t instanceof Pu?function(r){return ef(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ru extends fc{}class Ii extends fc{constructor(e){super(),this.elements=e}}function M1(t,e){const n=U1(e);for(const r of t.elements)n.some(s=>Cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ha extends fc{constructor(e){super(),this.elements=e}}function F1(t,e){let n=U1(e);for(const r of t.elements)n=n.filter(s=>!Cn(s,r));return{arrayValue:{values:n}}}class Pu extends fc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function zv(t){return Re(t.integerValue||t.doubleValue)}function U1(t){return Lp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n){this.field=e,this.transform=n}}function ij(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ii&&s instanceof Ii||r instanceof ha&&s instanceof ha?xi(r.elements,s.elements,Cn):r instanceof Pu&&s instanceof Pu?Cn(r.Pe,s.Pe):r instanceof Ru&&s instanceof Ru}(t.transform,e.transform)}class oj{constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $l(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pc{}function z1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zp(t.key,Yt.none()):new Sa(t.key,t.data,Yt.none());{const n=t.data,r=It.empty();let s=new Je(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Wr(t.key,r,new Lt(s.toArray()),Yt.none())}}function aj(t,e,n){t instanceof Sa?function(s,i,o){const a=s.value.clone(),u=$v(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Wr?function(s,i,o){if(!$l(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=$v(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(B1(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Vo(t,e,n,r){return t instanceof Sa?function(i,o,a,u){if(!$l(i.precondition,o))return a;const d=i.value.clone(),f=qv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wr?function(i,o,a,u){if(!$l(i.precondition,o))return a;const d=qv(i.fieldTransforms,u,o),f=o.data;return f.setAll(B1(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return $l(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function lj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=V1(r.transform,s||null);i!=null&&(n===null&&(n=It.empty()),n.set(r.field,i))}return n||null}function Bv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xi(r,s,(i,o)=>ij(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sa extends pc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wr extends pc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function B1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $v(t,e,n){const r=new Map;le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,rj(o,a,n[s]))}return r}function qv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,nj(i,o,e))}return r}class zp extends pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uj extends pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&aj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=O1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=z1(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&xi(this.mutations,e.mutations,(n,r)=>Bv(n,r))&&xi(this.baseMutations,e.baseMutations,(n,r)=>Bv(n,r))}}class Bp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length);let s=function(){return XP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Bp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,ne;function fj(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function $1(t){if(t===void 0)return Jn("GRPC error has no .code"),M.UNKNOWN;switch(t){case De.OK:return M.OK;case De.CANCELLED:return M.CANCELLED;case De.UNKNOWN:return M.UNKNOWN;case De.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case De.INTERNAL:return M.INTERNAL;case De.UNAVAILABLE:return M.UNAVAILABLE;case De.UNAUTHENTICATED:return M.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case De.NOT_FOUND:return M.NOT_FOUND;case De.ALREADY_EXISTS:return M.ALREADY_EXISTS;case De.PERMISSION_DENIED:return M.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case De.ABORTED:return M.ABORTED;case De.OUT_OF_RANGE:return M.OUT_OF_RANGE;case De.UNIMPLEMENTED:return M.UNIMPLEMENTED;case De.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(ne=De||(De={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=new us([4294967295,4294967295],0);function Hv(t){const e=pj().encode(t),n=new p1;return n.update(e),new Uint8Array(n.digest())}function Wv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new us([n,r],0),new us([s,i],0)]}class $p{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xo(`Invalid padding: ${n}`);if(r<0)throw new xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=us.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(us.fromNumber(r)));return s.compare(mj)===1&&(s=new us([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Hv(e),[r,s]=Wv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new $p(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Hv(e),[r,s]=Wv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ba.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mc(Y.min(),s,new Se(ie),Zn(),ee())}}class ba{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ba(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class q1{constructor(e,n){this.targetId=e,this.me=n}}class H1{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Kv{constructor(){this.fe=0,this.ge=Qv(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ee(),n=ee(),r=ee();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q()}}),new ba(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Qv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gj{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zn(),this.qe=Gv(),this.Qe=new Se(ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(nf(i))if(r===0){const o=new W(i.path);this.Ue(n,o,ct.newNoDocument(o,Y.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=xs(r).toUint8Array()}catch(u){if(u instanceof T1)return wi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new $p(o,s,i)}catch(u){return wi(u instanceof xo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&nf(a.target)){const u=new W(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ct.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ee();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new mc(e,n,this.Qe,this.ke,r);return this.ke=Zn(),this.qe=Gv(),this.Qe=new Se(ie),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Kv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Je(ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Kv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Gv(){return new Se(W.comparator)}function Qv(){return new Se(W.comparator)}const yj={asc:"ASCENDING",desc:"DESCENDING"},vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_j={and:"AND",or:"OR"};class wj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sf(t,e){return t.useProto3Json||uc(e)?e:{value:e}}function ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xj(t,e){return ju(t,e.toTimestamp())}function bn(t){return le(!!t),Y.fromTimestamp(function(n){const r=Lr(n);return new Le(r.seconds,r.nanos)}(t))}function qp(t,e){return of(t,e).canonicalString()}function of(t,e){const n=function(s){return new _e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function K1(t){const e=_e.fromString(t);return le(J1(e)),e}function af(t,e){return qp(t.databaseId,e.path)}function Vd(t,e){const n=K1(e);if(n.get(1)!==t.databaseId.projectId)throw new H(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(Q1(n))}function G1(t,e){return qp(t.databaseId,e)}function Ej(t){const e=K1(t);return e.length===4?_e.emptyPath():Q1(e)}function lf(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Q1(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Yv(t,e,n){return{name:af(t,e),fields:n.value.mapValue.fields}}function Tj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(le(f===void 0||typeof f=="string"),et.fromBase64String(f||"")):(le(f===void 0||f instanceof Buffer||f instanceof Uint8Array),et.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=d.code===void 0?M.UNKNOWN:$1(d.code);return new H(f,d.message||"")}(o);n=new H1(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vd(t,r.document.name),i=bn(r.document.updateTime),o=r.document.createTime?bn(r.document.createTime):Y.min(),a=new It({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(s,i,o,a),d=r.targetIds||[],f=r.removedTargetIds||[];n=new ql(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Vd(t,r.document),i=r.readTime?bn(r.readTime):Y.min(),o=ct.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ql([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Vd(t,r.document),i=r.removedTargetIds||[];n=new ql([],i,s,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new hj(s,i),a=r.targetId;n=new q1(a,o)}}return n}function Ij(t,e){let n;if(e instanceof Sa)n={update:Yv(t,e.key,e.value)};else if(e instanceof zp)n={delete:af(t,e.key)};else if(e instanceof Wr)n={update:Yv(t,e.key,e.data),updateMask:jj(e.fieldMask)};else{if(!(e instanceof uj))return Q();n={verify:af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ru)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ii)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ha)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:xj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q()}(t,e.precondition)),n}function Sj(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?bn(s.updateTime):bn(i);return o.isEqual(Y.min())&&(o=bn(i)),new oj(o,s.transformResults||[])}(n,e))):[]}function bj(t,e){return{documents:[G1(t,e.path)]}}function Cj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=G1(t,s);const i=function(d){if(d.length!==0)return X1(Nn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:zs(g.field),direction:Aj(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=sf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function Nj(t){let e=Ej(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=Y1(m);return g instanceof Nn&&C1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(T){return new Au(Bs(T.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,uc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,v=m.values||[];return new ku(v,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,v=m.values||[];return new ku(v,g)}(n.endAt)),HP(e,s,o,i,a,"F",u,d)}function kj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Y1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bs(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Bs(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bs(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Bs(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Bs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>Y1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function Aj(t){return yj[t]}function Rj(t){return vj[t]}function Pj(t){return _j[t]}function zs(t){return{fieldPath:t.canonicalString()}}function Bs(t){return Ye.fromServerFormat(t.fieldPath)}function X1(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Lv(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NAN"}};if(Ov(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lv(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NAN"}};if(Ov(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(n.field),op:Rj(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(s=>X1(s));return r.length===1?r[0]:{compositeFilter:{op:Pj(n.op),filters:r}}}(t):Q()}function jj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function J1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,i=Y.min(),o=Y.min(),a=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.ct=e}}function Oj(t){const e=Nj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.un=new Vj}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Or.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Vj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Je(_e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Je(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Si(0)}static kn(){return new Si(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.changes=new Vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Vo(r.mutation,s,Lt.empty(),Le.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const s=is();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=wo();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Zn();const o=Lo(),a=function(){return Lo()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Wr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Vo(f.mutation,d,f.mutation.getFieldMask(),Le.now())):o.set(d.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return a.set(d,new Fj(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Lo();let s=new Se((o,a)=>o-a),i=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Lt.empty();f=a.applyToLocalView(d,f),r.set(u,f);const m=(s.get(a.batchId)||ee()).add(u);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,m=O1();f.forEach(g=>{if(!i.has(g)){const v=z1(n.get(g),r.get(g));v!==null&&m.set(g,v),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(is());let a=-1,u=i;return o.next(d=>F.forEach(d,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ee())).next(f=>({batchId:a,changes:D1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=wo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=wo();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,u=>{const d=function(m,g){return new cc(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ct.newInvalidDocument(f)))});let a=wo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Vo(f.mutation,d,Lt.empty(),Le.now()),hc(n,d)&&(a=a.insert(u,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:bn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Oj(s.bundledQuery),readTime:bn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.overlays=new Se(W.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=is();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=is(),i=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Se((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=is(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=is(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=s)););return F.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dj(n,r));let i=this.Ir.get(n);i===void 0&&(i=ee(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.Tr=new Je(ze.Er),this.dr=new Je(ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new _e([])),r=new ze(n,e),s=new ze(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new _e([])),r=new ze(n,e),s=new ze(n,e+1);let i=ee();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||ie(e.wr,n.wr)}static Ar(e,n){return ie(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Je(ze.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cj(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new ze(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ze(n,0),s=new ze(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(ie);return n.forEach(s=>{const i=new ze(s,0),o=new ze(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new ze(new W(i),0);let a=new Je(ie);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(a=a.add(u.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ze(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.Mr=e,this.docs=function(){return new Se(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ct.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Zn();const o=n.path,a=new W(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||bP(SP(f),r)<=0||(s.has(f.key)||hc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wj(this)}getSize(e){return F.resolve(this.size)}}class Wj extends Mj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.persistence=e,this.Nr=new Vi(n=>Vp(n),Mp),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hp,this.targetCount=0,this.kr=Si.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Si(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jp(0),this.Kr=!1,this.Kr=!0,this.$r=new $j,this.referenceDelegate=e(this),this.Ur=new Kj(this),this.indexManager=new Lj,this.remoteDocumentCache=function(s){return new Hj(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Dj(n),this.Gr=new zj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new qj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new Qj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Qj extends NP{constructor(e){super(),this.currentSequenceNumber=e}}class Wp{constructor(e){this.persistence=e,this.Jr=new Hp,this.Yr=null}static Zr(e){return new Wp(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ee(),s=ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Kp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vC()?8:kP(ht())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Yj;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(co()<=te.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(co()<=te.DEBUG&&q("QueryEngine","Query:",Us(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(co()<=te.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):F.resolve())}Yi(e,n){if(Uv(n))return F.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rf(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ee(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,a);return this.ns(n,d,o,u.readTime)?this.Yi(e,rf(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Uv(n)||s.isEqual(Y.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(co()<=te.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Us(n)),this.rs(e,o,n,IP(s,-1)).next(a=>a))})}ts(e,n){let r=new Je(P1(e));return n.forEach((s,i)=>{hc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return co()<=te.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Us(n)),this.Ji.getDocumentsMatchingQuery(e,n,Or.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Se(ie),this._s=new Vi(i=>Vp(i),Mp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Zj(t,e,n,r){return new Jj(t,e,n,r)}async function Z1(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=ee();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})}function e4(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const m=d.batch,g=m.keys();let v=F.resolve();return g.forEach(T=>{v=v.next(()=>f.getEntry(u,T)).next(A=>{const N=d.docVersions.get(T);le(N!==null),A.version.compareTo(N)<0&&(m.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ee();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function eE(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function t4(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;a.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let v=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(et.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),s=s.insert(m,v),function(A,N,_){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,v,f)&&a.push(n.Ur.updateTargetData(i,v))});let u=Zn(),d=ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(n4(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(Y.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(f)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function n4(t,e,n){let r=ee(),s=ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Zn();return n.forEach((a,u)=>{const d=i.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function r4(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function s4(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function uf(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ia(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Xv(t,e,n){const r=X(t);let s=Y.min(),i=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=X(u),g=m._s.get(f);return g!==void 0?F.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,o,Sn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Y.min(),n?i:ee())).next(a=>(i4(r,GP(e),a),{documents:a,Ts:i})))}function i4(t,e,n){let r=t.us.get(e)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Jv{constructor(){this.activeTargetIds=ej()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o4{constructor(){this.so=new Jv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Jv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l=null;function Md(){return _l===null?_l=function(){return 268435456+Math.round(2147483648*Math.random())}():_l++,"0x"+_l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class c4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Md(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(q("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw wi("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Li}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=l4[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Md();return new Promise((o,a)=>{const u=new m1;u.setWithCredentials(!0),u.listenOnce(g1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zl.NO_ERROR:const f=u.getResponseJson();q(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case zl.TIMEOUT:q(at,`RPC '${e}' ${i} timed out`),a(new H(M.DEADLINE_EXCEEDED,"Request time out"));break;case zl.HTTP_ERROR:const m=u.getStatus();if(q(at,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const T=function(N){const _=N.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(_)>=0?_:M.UNKNOWN}(v.status);a(new H(T,v.message))}else a(new H(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new H(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{q(at,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);q(at,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Md(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_1(),a=v1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");q(at,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);let g=!1,v=!1;const T=new u4({Io:N=>{v?q(at,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(g||(q(at,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),q(at,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},To:()=>m.close()}),A=(N,_,w)=>{N.listen(_,I=>{try{w(I)}catch(j){setTimeout(()=>{throw j},0)}})};return A(m,_o.EventType.OPEN,()=>{v||(q(at,`RPC '${e}' stream ${s} transport opened.`),T.yo())}),A(m,_o.EventType.CLOSE,()=>{v||(v=!0,q(at,`RPC '${e}' stream ${s} transport closed`),T.So())}),A(m,_o.EventType.ERROR,N=>{v||(v=!0,wi(at,`RPC '${e}' stream ${s} transport errored:`,N),T.So(new H(M.UNAVAILABLE,"The operation could not be completed")))}),A(m,_o.EventType.MESSAGE,N=>{var _;if(!v){const w=N.data[0];le(!!w);const I=w,j=I.error||((_=I[0])===null||_===void 0?void 0:_.error);if(j){q(at,`RPC '${e}' stream ${s} received error:`,j);const O=j.status;let L=function(S){const k=De[S];if(k!==void 0)return $1(k)}(O),E=j.message;L===void 0&&(L=M.INTERNAL,E="Unknown error status: "+O+" with message "+j.message),v=!0,T.So(new H(L,E)),m.close()}else q(at,`RPC '${e}' stream ${s} received:`,w),T.bo(w)}}),A(a,y1.STAT_EVENT,N=>{N.stat===Jh.PROXY?q(at,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Jh.NOPROXY&&q(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function Fd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){return new wj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d4 extends nE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Tj(this.serializer,e),r=function(i){if(!("targetChange"in i))return Y.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?bn(o.readTime):Y.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=lf(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=nf(u)?{documents:bj(i,u)}:{query:Cj(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=W1(i,o.resumeToken);const d=sf(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=ju(i,o.snapshotVersion.toTimestamp());const d=sf(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=kj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=lf(this.serializer),n.removeTarget=e,this.a_(n)}}class h4 extends nE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Sj(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=lf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ij(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,of(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,of(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class p4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jn(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Rs(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=X(u);d.L_.add(4),await Ca(d),d.q_.set("Unknown"),d.L_.delete(4),await yc(d)}(this))})}),this.q_=new p4(r,s)}}async function yc(t){if(Rs(t))for(const e of t.B_)await e(!0)}async function Ca(t){for(const e of t.B_)await e(!1)}function rE(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Xp(n)?Yp(n):Mi(n).r_()&&Qp(n,e))}function Gp(t,e){const n=X(t),r=Mi(n);n.N_.delete(e),r.r_()&&sE(n,e),n.N_.size===0&&(r.r_()?r.o_():Rs(n)&&n.q_.set("Unknown"))}function Qp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mi(t).A_(e)}function sE(t,e){t.Q_.xe(e),Mi(t).R_(e)}function Yp(t){t.Q_=new gj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mi(t).start(),t.q_.v_()}function Xp(t){return Rs(t)&&!Mi(t).n_()&&t.N_.size>0}function Rs(t){return X(t).L_.size===0}function iE(t){t.Q_=void 0}async function g4(t){t.q_.set("Online")}async function y4(t){t.N_.forEach((e,n)=>{Qp(t,e)})}async function v4(t,e){iE(t),Xp(t)?(t.q_.M_(e),Yp(t)):t.q_.set("Unknown")}async function _4(t,e,n){if(t.q_.set("Online"),e instanceof H1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Du(t,r)}else if(e instanceof ql?t.Q_.Ke(e):e instanceof q1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Y.min()))try{const r=await eE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(et.EMPTY_BYTE_STRING,f.snapshotVersion)),sE(i,u);const m=new wr(f.target,u,d,f.sequenceNumber);Qp(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Du(t,r)}}async function Du(t,e,n){if(!Ia(e))throw e;t.L_.add(1),await Ca(t),t.q_.set("Offline"),n||(n=()=>eE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await yc(t)})}function oE(t,e){return e().catch(n=>Du(t,n,e))}async function vc(t){const e=X(t),n=Vr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;w4(e);)try{const s=await r4(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,x4(e,s)}catch(s){await Du(e,s)}aE(e)&&lE(e)}function w4(t){return Rs(t)&&t.O_.length<10}function x4(t,e){t.O_.push(e);const n=Vr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function aE(t){return Rs(t)&&!Vr(t).n_()&&t.O_.length>0}function lE(t){Vr(t).start()}async function E4(t){Vr(t).p_()}async function T4(t){const e=Vr(t);for(const n of t.O_)e.m_(n.mutations)}async function I4(t,e,n){const r=t.O_.shift(),s=Bp.from(r,e,n);await oE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await vc(t)}async function S4(t,e){e&&Vr(t).V_&&await async function(r,s){if(function(o){return fj(o)&&o!==M.ABORTED}(s.code)){const i=r.O_.shift();Vr(r).s_(),await oE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await vc(r)}}(t,e),aE(t)&&lE(t)}async function e_(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Rs(n);n.L_.add(3),await Ca(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await yc(n)}async function b4(t,e){const n=X(t);e?(n.L_.delete(2),await yc(n)):e||(n.L_.add(2),await Ca(n),n.q_.set("Unknown"))}function Mi(t){return t.K_||(t.K_=function(n,r,s){const i=X(n);return i.w_(),new d4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:g4.bind(null,t),Ro:y4.bind(null,t),mo:v4.bind(null,t),d_:_4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Xp(t)?Yp(t):t.q_.set("Unknown")):(await t.K_.stop(),iE(t))})),t.K_}function Vr(t){return t.U_||(t.U_=function(n,r,s){const i=X(n);return i.w_(),new h4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:E4.bind(null,t),mo:S4.bind(null,t),f_:T4.bind(null,t),g_:I4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vc(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Jp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zp(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),Ia(t))return new H(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=wo(),this.sortedSet=new Se(this.comparator)}static emptySet(e){return new di(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.W_=new Se(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class bi{constructor(e,n,r,s,i,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bi(e,n,di.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class N4{constructor(){this.queries=n_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=n_(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new H(M.ABORTED,"Firestore shutting down"))}}function n_(){return new Vi(t=>R1(t),dc)}async function uE(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new C4,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Zp(o,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&em(n)}async function cE(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k4(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&em(n)}function A4(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function em(t){t.Y_.forEach(e=>{e.next()})}var cf,r_;(r_=cf||(cf={})).ea="default",r_.Cache="cache";class dE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==cf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.key=e}}class fE{constructor(e){this.key=e}}class R4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ee(),this.mutatedKeys=ee(),this.Aa=P1(e),this.Ra=new di(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new t_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),v=hc(this.query,m)?m:null,T=!!g&&this.mutatedKeys.has(g.key),A=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let N=!1;g&&v?g.data.isEqual(v.data)?T!==A&&(r.track({type:3,doc:v}),N=!0):this.ga(g,v)||(r.track({type:2,doc:v}),N=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),N=!0):g&&!v&&(r.track({type:1,doc:g}),N=!0,(u||d)&&(a=!0)),N&&(v?(o=o.add(v),i=A?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(v,T){const A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return A(v)-A(T)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new bi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new t_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new fE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new hE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class P4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class j4{constructor(e){this.key=e,this.va=!1}}class D4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vi(a=>R1(a),dc),this.Ma=new Map,this.xa=new Set,this.Oa=new Se(W.comparator),this.Na=new Map,this.La=new Hp,this.Ba={},this.ka=new Map,this.qa=Si.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function O4(t,e,n=!0){const r=_E(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await pE(r,e,n,!0),s}async function L4(t,e){const n=_E(t);await pE(n,e,!0,!1)}async function pE(t,e,n,r){const s=await s4(t.localStore,Sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await V4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&rE(t.remoteStore,s),a}async function V4(t,e,n,r,s){t.Ka=(m,g,v)=>async function(A,N,_,w){let I=N.view.ma(_);I.ns&&(I=await Xv(A.localStore,N.query,!1).then(({documents:E})=>N.view.ma(E,I)));const j=w&&w.targetChanges.get(N.targetId),O=w&&w.targetMismatches.get(N.targetId)!=null,L=N.view.applyChanges(I,A.isPrimaryClient,j,O);return i_(A,N.targetId,L.wa),L.snapshot}(t,m,g,v);const i=await Xv(t.localStore,e,!0),o=new R4(e,i.Ts),a=o.ma(i.documents),u=ba.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(a,t.isPrimaryClient,u);i_(t,n,d.wa);const f=new P4(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function M4(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!dc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await uf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gp(r.remoteStore,s.targetId),df(r,s.targetId)}).catch(Ta)):(df(r,s.targetId),await uf(r.localStore,s.targetId,!0))}async function F4(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gp(n.remoteStore,r.targetId))}async function U4(t,e,n){const r=K4(t);try{const s=await function(o,a){const u=X(o),d=Le.now(),f=a.reduce((v,T)=>v.add(T.key),ee());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=Zn(),A=ee();return u.cs.getEntries(v,f).next(N=>{T=N,T.forEach((_,w)=>{w.isValidDocument()||(A=A.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,T)).next(N=>{m=N;const _=[];for(const w of a){const I=lj(w,m.get(w.key).overlayedDocument);I!=null&&_.push(new Wr(w.key,I,I1(I.value.mapValue),Yt.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,_,a)}).next(N=>{g=N;const _=N.applyToLocalDocumentSet(m,A);return u.documentOverlayCache.saveOverlays(v,N.batchId,_)})}).then(()=>({batchId:g.batchId,changes:D1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Se(ie)),d=d.insert(a,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Na(r,s.changes),await vc(r.remoteStore)}catch(s){const i=Zp(s,"Failed to persist write");n.reject(i)}}async function mE(t,e){const n=X(t);try{const r=await t4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?le(o.va):s.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await Na(n,r,e)}catch(r){await Ta(r)}}function s_(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=X(o);u.onlineState=a;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(a)&&(d=!0)}),d&&em(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function z4(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Se(W.comparator);o=o.insert(i,ct.newNoDocument(i,Y.min()));const a=ee().add(i),u=new mc(Y.min(),new Map,new Se(ie),o,a);await mE(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),tm(r)}else await uf(r.localStore,e,!1).then(()=>df(r,e,n)).catch(Ta)}async function B4(t,e){const n=X(t),r=e.batch.batchId;try{const s=await e4(n.localStore,e);yE(n,r,null),gE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Na(n,s)}catch(s){await Ta(s)}}async function $4(t,e,n){const r=X(t);try{const s=await function(o,a){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(le(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);yE(r,e,n),gE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Na(r,s)}catch(s){await Ta(s)}}function gE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function yE(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function df(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||vE(t,r)})}function vE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Gp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),tm(t))}function i_(t,e,n){for(const r of n)r instanceof hE?(t.La.addReference(r.key,e),q4(t,r)):r instanceof fE?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||vE(t,r.key)):Q()}function q4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),tm(t))}function tm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(_e.fromString(e)),r=t.qa.next();t.Na.set(r,new j4(n)),t.Oa=t.Oa.insert(n,r),rE(t.remoteStore,new wr(Sn(Fp(n.path)),r,"TargetPurposeLimboResolution",jp.oe))}}async function Na(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Kp.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=X(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,g=>F.forEach(g.$i,v=>f.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>F.forEach(g.Ui,v=>f.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!Ia(m))throw m;q("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const v=f.os.get(g),T=v.snapshotVersion,A=v.withLastLimboFreeSnapshotVersion(T);f.os=f.os.insert(g,A)}}}(r.localStore,i))}async function H4(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await Z1(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new H(M.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Na(n,r.hs)}}function W4(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return ee().add(r.key);{let s=ee();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function _E(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z4.bind(null,e),e.Ca.d_=k4.bind(null,e.eventManager),e.Ca.$a=A4.bind(null,e.eventManager),e}function K4(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$4.bind(null,e),e}class Ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Zj(this.persistence,new Xj,e.initialUser,this.serializer)}Ga(e){return new Gj(Wp.Zr,this.serializer)}Wa(e){return new o4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ou.provider={build:()=>new Ou};class hf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>s_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=H4.bind(null,this.syncEngine),await b4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new N4}()}createDatastore(e){const n=gc(e.databaseInfo.databaseId),r=function(i){return new c4(i)}(e.databaseInfo);return function(i,o,a,u){return new f4(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new m4(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>s_(this.syncEngine,n,0),function(){return Zv.D()?new Zv:new a4}())}createSyncEngine(e,n){return function(s,i,o,a,u,d,f){const m=new D4(s,i,o,a,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ca(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hf.provider={build:()=>new hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=x1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ud(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Z1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function o_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Q4(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>e_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>e_(e.remoteStore,s)),t._onlineComponents=e}async function Q4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ud(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;wi("Error using user provided cache. Falling back to memory cache: "+n),await Ud(t,new Ou)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Ud(t,new Ou);return t._offlineComponents}async function xE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await o_(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await o_(t,new hf))),t._onlineComponents}function Y4(t){return xE(t).then(e=>e.syncEngine)}async function EE(t){const e=await xE(t),n=e.eventManager;return n.onListen=O4.bind(null,e.syncEngine),n.onUnlisten=M4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=L4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=F4.bind(null,e.syncEngine),n}function X4(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,d){const f=new wE({next:g=>{f.Za(),o.enqueueAndForget(()=>cE(i,m));const v=g.docs.has(a);!v&&g.fromCache?d.reject(new H(M.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&u&&u.source==="server"?d.reject(new H(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new dE(Fp(a.path),f,{includeMetadataChanges:!0,_a:!0});return uE(i,m)}(await EE(t),t.asyncQueue,e,n,r)),r.promise}function J4(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,d){const f=new wE({next:g=>{f.Za(),o.enqueueAndForget(()=>cE(i,m)),g.fromCache&&u.source==="server"?d.reject(new H(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new dE(a,f,{includeMetadataChanges:!0,_a:!0});return uE(i,m)}(await EE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t,e,n){if(!n)throw new H(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Z4(t,e,n,r){if(e===!0&&r===!0)throw new H(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function l_(t){if(!W.isDocumentKey(t))throw new H(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function u_(t){if(W.isDocumentKey(t))throw new H(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nm(t);throw new H(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _c{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mP;switch(r.type){case"firstParty":return new _P(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=a_.get(n);r&&(q("ComponentProvider","Removing Datastore"),a_.delete(n),r.terminate())}(this),Promise.resolve()}}function eD(t,e,n,r={}){var s;const i=(t=pn(t,_c))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=lt.MOCK_USER;else{a=nx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new H(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lt(d)}t._authCredentials=new gP(new w1(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wc(this.firestore,e,this._query)}}class Rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}}class Pr extends wc{constructor(e,n,r){super(e,n,Fp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new W(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function Kr(t,e,...n){if(t=Ie(t),IE("collection","path",e),t instanceof _c){const r=_e.fromString(e,...n);return u_(r),new Pr(t,null,r)}{if(!(t instanceof Rt||t instanceof Pr))throw new H(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return u_(r),new Pr(t.firestore,null,r)}}function qe(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=x1.newId()),IE("doc","path",e),t instanceof _c){const r=_e.fromString(e,...n);return l_(r),new Rt(t,null,new W(r))}{if(!(t instanceof Rt||t instanceof Pr))throw new H(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return l_(r),new Rt(t.firestore,t instanceof Pr?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tE(this,"async_queue_retry"),this.Vu=()=>{const r=Fd();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Fd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Fd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Hn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ia(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Jn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Jp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ps extends _c{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new d_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new d_(e),this._firestoreClient=void 0,await e}}}function SE(t,e){const n=typeof t=="object"?t:gp(),r=typeof t=="string"?t:"(default)",s=Di(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Zw("firestore");i&&eD(s,...i)}return s}function rm(t){if(t._terminated)throw new H(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tD(t),t._firestoreClient}function tD(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,d,f){return new PP(a,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,TE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new G4(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ci(et.fromBase64String(e))}catch(n){throw new H(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ci(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=/^__.*__$/;class rD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sa(e,this.data,n,this.fieldTransforms)}}class bE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class Tc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Tc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(CE(this.Cu)&&nD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class sD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gc(e)}Qu(e,n,r,s=!1){return new Tc({Cu:e,methodName:n,qu:r,path:Ye.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function om(t){const e=t._freezeSettings(),n=gc(t._databaseId);return new sD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function NE(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);lm("Data must be an object, but it was:",o,r);const a=kE(r,o);let u,d;if(i.merge)u=new Lt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=ff(e,m,n);if(!o.contains(g))throw new H(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);RE(f,g)||f.push(g)}u=new Lt(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new rD(new It(a),u,d)}class Ic extends Ec{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ic}}function iD(t,e,n){return new Tc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class am extends Ec{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=iD(this,e,!0),r=this.Ku.map(i=>ka(i,n)),s=new Ii(r);return new sj(e.path,s)}isEqual(e){return e instanceof am&&ia(this.Ku,e.Ku)}}function oD(t,e,n,r){const s=t.Qu(1,e,n);lm("Data must be an object, but it was:",s,r);const i=[],o=It.empty();As(r,(u,d)=>{const f=um(e,u,n);d=Ie(d);const m=s.Nu(f);if(d instanceof Ic)i.push(f);else{const g=ka(d,m);g!=null&&(i.push(f),o.set(f,g))}});const a=new Lt(i);return new bE(o,a,s.fieldTransforms)}function aD(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[ff(e,r,n)],u=[s];if(i.length%2!=0)throw new H(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(ff(e,i[g])),u.push(i[g+1]);const d=[],f=It.empty();for(let g=a.length-1;g>=0;--g)if(!RE(d,a[g])){const v=a[g];let T=u[g];T=Ie(T);const A=o.Nu(v);if(T instanceof Ic)d.push(v);else{const N=ka(T,A);N!=null&&(d.push(v),f.set(v,N))}}const m=new Lt(d);return new bE(f,m,o.fieldTransforms)}function ka(t,e){if(AE(t=Ie(t)))return lm("Unsupported field value:",e,t),kE(t,e);if(t instanceof Ec)return function(r,s){if(!CE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=ka(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Le.fromDate(r);return{timestampValue:ju(s.serializer,i)}}if(r instanceof Le){const i=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ju(s.serializer,i)}}if(r instanceof sm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ci)return{bytesValue:W1(s.serializer,r._byteString)};if(r instanceof Rt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof im)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Up(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${nm(r)}`)}(t,e)}function kE(t,e){const n={};return E1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(t,(r,s)=>{const i=ka(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function AE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof sm||t instanceof Ci||t instanceof Rt||t instanceof Ec||t instanceof im)}function lm(t,e,n){if(!AE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=nm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ff(t,e,n){if((e=Ie(e))instanceof xc)return e._internalPath;if(typeof e=="string")return um(t,e);throw Lu("Field path arguments must be of type string or ",t,!1,void 0,n)}const lD=new RegExp("[~\\*/\\[\\]]");function um(t,e,n){if(e.search(lD)>=0)throw Lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xc(...e.split("."))._internalPath}catch{throw Lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new H(M.INVALID_ARGUMENT,a+t+u)}function RE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uD extends PE{data(){return super.data()}}function jE(t,e){return typeof e=="string"?um(t,e):e instanceof xc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dD{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return As(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Re(o.doubleValue));return new im(i)}convertGeoPoint(e){return new sm(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Op(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ua(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);le(J1(r));const s=new ca(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OE extends PE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Hl extends OE{data(e={}){return super.data(e)}}class hD{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Eo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hl(this._firestore,this._userDataWriter,r.key,r,new Eo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Hl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Eo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Hl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Eo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:fD(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t){t=pn(t,Rt);const e=pn(t.firestore,Ps);return X4(rm(e),t._key).then(n=>pD(e,t,n))}class LE extends dD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ci(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function Aa(t){t=pn(t,wc);const e=pn(t.firestore,Ps),n=rm(e),r=new LE(e);return cD(t._query),J4(n,t._query).then(s=>new hD(e,r,t,s))}function js(t,e,n){t=pn(t,Rt);const r=pn(t.firestore,Ps),s=DE(t.converter,e,n);return bc(r,[NE(om(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Yt.none())])}function Fi(t,e,n,...r){t=pn(t,Rt);const s=pn(t.firestore,Ps),i=om(s);let o;return o=typeof(e=Ie(e))=="string"||e instanceof xc?aD(i,"updateDoc",t._key,e,n,r):oD(i,"updateDoc",t._key,e),bc(s,[o.toMutation(t._key,Yt.exists(!0))])}function cm(t){return bc(pn(t.firestore,Ps),[new zp(t._key,Yt.none())])}function dm(t,e){const n=pn(t.firestore,Ps),r=qe(t),s=DE(t.converter,e);return bc(n,[NE(om(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Yt.exists(!1))]).then(()=>r)}function bc(t,e){return function(r,s){const i=new Hn;return r.asyncQueue.enqueueAndForget(async()=>U4(await Y4(r),s,i)),i.promise}(rm(t),e)}function pD(t,e,n){const r=n.docs.get(e._key),s=new LE(t);return new OE(t,s,e._key,r,new Eo(n.hasPendingWrites,n.fromCache),e.converter)}function mD(...t){return new am("arrayUnion",t)}(function(e,n=!0){(function(s){Li=s})(Ns),hn(new Zt("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ps(new yP(r.getProvider("auth-internal")),new xP(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ca(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),kt(Av,"4.7.3",e),kt(Av,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebasestorage.googleapis.com",ME="storageBucket",gD=2*60*1e3,yD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke extends tn{constructor(e,n,r=0){super(zd(e),`Firebase Storage: ${n} (${zd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ke.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ne;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ne||(Ne={}));function zd(t){return"storage/"+t}function hm(){const t="An unknown error occurred, please check the error payload for server response.";return new ke(Ne.UNKNOWN,t)}function vD(t){return new ke(Ne.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _D(t){return new ke(Ne.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ke(Ne.UNAUTHENTICATED,t)}function xD(){return new ke(Ne.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ED(t){return new ke(Ne.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function TD(){return new ke(Ne.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ID(){return new ke(Ne.CANCELED,"User canceled the upload/download.")}function SD(t){return new ke(Ne.INVALID_URL,"Invalid URL '"+t+"'.")}function bD(t){return new ke(Ne.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function CD(){return new ke(Ne.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ME+"' property when initializing the app?")}function ND(){return new ke(Ne.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kD(){return new ke(Ne.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AD(t){return new ke(Ne.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pf(t){return new ke(Ne.INVALID_ARGUMENT,t)}function FE(){return new ke(Ne.APP_DELETED,"The Firebase app was deleted.")}function RD(t){return new ke(Ne.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mo(t,e){return new ke(Ne.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ho(t){throw new ke(Ne.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Vt.makeFromUrl(e,n)}catch{return new Vt(e,"")}if(r.path==="")return r;throw bD(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),T={bucket:1,path:3},A=n===VE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",_=new RegExp(`^https?://${A}/${s}/${N}`,"i"),I=[{regex:a,indices:u,postModify:i},{regex:v,indices:T,postModify:d},{regex:_,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<I.length;j++){const O=I[j],L=O.regex.exec(e);if(L){const E=L[O.indices.bucket];let y=L[O.indices.path];y||(y=""),r=new Vt(E,y),O.postModify(r);break}}if(r==null)throw SD(e);return r}}class PD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let d=!1;function f(...N){d||(d=!0,e.apply(null,N))}function m(N){s=setTimeout(()=>{s=null,t(v,u())},N)}function g(){i&&clearTimeout(i)}function v(N,..._){if(d){g();return}if(N){g(),f.call(null,N,..._);return}if(u()||o){g(),f.call(null,N,..._);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,m(I)}let T=!1;function A(N){T||(T=!0,g(),!d&&(s!==null?(N||(a=2),clearTimeout(s),m(0)):N||(a=1)))}return m(0),i=setTimeout(()=>{o=!0,A(!0)},n),A}function DD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t){return t!==void 0}function LD(t){return typeof t=="object"&&!Array.isArray(t)}function fm(t){return typeof t=="string"||t instanceof String}function h_(t){return pm()&&t instanceof Blob}function pm(){return typeof Blob<"u"}function f_(t,e,n,r){if(r<e)throw pf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw pf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function UE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var cs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(cs||(cs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,r,s,i,o,a,u,d,f,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new wl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===cs.NO_ERROR,u=i.getStatus();if(!a||VD(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===cs.ABORT;r(!1,new wl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new wl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());OD(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=hm();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?FE():ID();o(u)}else{const u=TD();o(u)}};this.canceled_?n(!1,new wl(!1,null,!0)):this.backoffId_=jD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function FD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function UD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function BD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $D(t,e,n,r,s,i,o=!0){const a=UE(t.urlParams),u=t.url+a,d=Object.assign({},t.headers);return zD(d,e),FD(d,n),UD(d,i),BD(d,r),new MD(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function HD(...t){const e=qD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(pm())return new Blob(t);throw new ke(Ne.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){if(typeof atob>"u")throw AD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bd{constructor(e,n){this.data=e,this.contentType=n||null}}function GD(t,e){switch(t){case wn.RAW:return new Bd(zE(e));case wn.BASE64:case wn.BASE64URL:return new Bd(BE(t,e));case wn.DATA_URL:return new Bd(YD(e),XD(e))}throw hm()}function zE(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function QD(t){let e;try{e=decodeURIComponent(t)}catch{throw Mo(wn.DATA_URL,"Malformed data URL.")}return zE(e)}function BE(t,e){switch(t){case wn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Mo(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case wn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Mo(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=KD(e)}catch(s){throw s.message.includes("polyfill")?s:Mo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class $E{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Mo(wn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=JD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function YD(t){const e=new $E(t);return e.base64?BE(wn.BASE64,e.rest):QD(e.rest)}function XD(t){return new $E(t).contentType}function JD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){let r=0,s="";h_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(h_(this.data_)){const r=this.data_,s=WD(r,e,n);return s===null?null:new gr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new gr(r,!0)}}static getBlob(...e){if(pm()){const n=e.map(r=>r instanceof gr?r.data_:r);return new gr(HD.apply(null,n))}else{const n=e.map(o=>fm(o)?GD(wn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new gr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t){let e;try{e=JSON.parse(t)}catch{return null}return LD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function e5(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function HE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(t,e){return e}class mt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||t5}}let xl=null;function n5(t){return!fm(t)||t.length<2?t:HE(t)}function WE(){if(xl)return xl;const t=[];t.push(new mt("bucket")),t.push(new mt("generation")),t.push(new mt("metageneration")),t.push(new mt("name","fullPath",!0));function e(i,o){return n5(o)}const n=new mt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new mt("size");return s.xform=r,t.push(s),t.push(new mt("timeCreated")),t.push(new mt("updated")),t.push(new mt("md5Hash",null,!0)),t.push(new mt("cacheControl",null,!0)),t.push(new mt("contentDisposition",null,!0)),t.push(new mt("contentEncoding",null,!0)),t.push(new mt("contentLanguage",null,!0)),t.push(new mt("contentType",null,!0)),t.push(new mt("metadata","customMetadata",!0)),xl=t,xl}function r5(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Vt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function s5(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return r5(r,t),r}function KE(t,e,n){const r=qE(e);return r===null?null:s5(t,r,n)}function i5(t,e,n,r){const s=qE(e);if(s===null||!fm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,m=t.fullPath,g="/b/"+o(f)+"/o/"+o(m),v=Cc(g,n,r),T=UE({alt:"media",token:d});return v+T})[0]}function o5(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class mm{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t){if(!t)throw hm()}function a5(t,e){function n(r,s){const i=KE(t,s,e);return GE(i!==null),i}return n}function l5(t,e){function n(r,s){const i=KE(t,s,e);return GE(i!==null),i5(i,s,t.host,t._protocol)}return n}function QE(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=xD():s=wD():n.getStatus()===402?s=_D(t.bucket):n.getStatus()===403?s=ED(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function YE(t){const e=QE(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=vD(t.path)),i.serverResponse=s.serverResponse,i}return n}function u5(t,e,n){const r=e.fullServerUrl(),s=Cc(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new mm(s,i,l5(t,n),o);return a.errorHandler=YE(e),a}function c5(t,e){const n=e.fullServerUrl(),r=Cc(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const a=new mm(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=YE(e),a}function d5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function h5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=d5(null,e)),r}function f5(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let j=0;j<2;j++)I=I+Math.random().toString().slice(2);return I}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const d=h5(e,r,s),f=o5(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",v=gr.getBlob(m,r,g);if(v===null)throw ND();const T={name:d.fullPath},A=Cc(i,t.host,t._protocol),N="POST",_=t.maxUploadRetryTime,w=new mm(A,N,a5(t,n),_);return w.urlParams=T,w.headers=o,w.body=v.uploadData(),w.errorHandler=QE(e),w}class p5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=cs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=cs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw ho("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ho("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ho("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ho("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ho("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class m5 extends p5{initXhr(){this.xhr_.responseType="text"}}function gm(){return new m5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this._service=e,n instanceof Vt?this._location=n:this._location=Vt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ts(e,n)}get root(){const e=new Vt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HE(this._location.path)}get storage(){return this._service}get parent(){const e=ZD(this._location.path);if(e===null)return null;const n=new Vt(this._location.bucket,e);return new Ts(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw RD(e)}}function g5(t,e,n){t._throwIfRoot("uploadBytes");const r=f5(t.storage,t._location,WE(),new gr(e,!0),n);return t.storage.makeRequestWithTokens(r,gm).then(s=>({metadata:s,ref:t}))}function y5(t){t._throwIfRoot("getDownloadURL");const e=u5(t.storage,t._location,WE());return t.storage.makeRequestWithTokens(e,gm).then(n=>{if(n===null)throw kD();return n})}function v5(t){t._throwIfRoot("deleteObject");const e=c5(t.storage,t._location);return t.storage.makeRequestWithTokens(e,gm)}function _5(t,e){const n=e5(t._location.path,e),r=new Vt(t._location.bucket,n);return new Ts(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t){return/^[A-Za-z]+:\/\//.test(t)}function x5(t,e){return new Ts(t,e)}function XE(t,e){if(t instanceof ym){const n=t;if(n._bucket==null)throw CD();const r=new Ts(n,n._bucket);return e!=null?XE(r,e):r}else return e!==void 0?_5(t,e):t}function E5(t,e){if(e&&w5(e)){if(t instanceof ym)return x5(t,e);throw pf("To use ref(service, url), the first argument must be a Storage instance.")}else return XE(t,e)}function p_(t,e){const n=e==null?void 0:e[ME];return n==null?null:Vt.makeFromBucketSpec(n,t)}function T5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:nx(s,t.app.options.projectId))}class ym{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=VE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gD,this._maxUploadRetryTime=yD,this._requests=new Set,s!=null?this._bucket=Vt.makeFromBucketSpec(s,this._host):this._bucket=p_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vt.makeFromBucketSpec(this._url,e):this._bucket=p_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){f_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){f_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ts(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new PD(FE());{const o=$D(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const m_="@firebase/storage",g_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="storage";function ZE(t,e,n){return t=Ie(t),g5(t,e,n)}function eT(t){return t=Ie(t),y5(t)}function I5(t){return t=Ie(t),v5(t)}function Ra(t,e){return t=Ie(t),E5(t,e)}function tT(t=gp(),e){t=Ie(t);const r=Di(t,JE).getImmediate({identifier:e}),s=Zw("storage");return s&&S5(r,...s),r}function S5(t,e,n,r={}){T5(t,e,n,r)}function b5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ym(n,r,s,e,Ns)}function C5(){hn(new Zt(JE,b5,"PUBLIC").setMultipleInstances(!0)),kt(m_,g_,""),kt(m_,g_,"esm2017")}C5();var We=[];for(var $d=0;$d<256;++$d)We.push(($d+256).toString(16).slice(1));function N5(t,e=0){return(We[t[e+0]]+We[t[e+1]]+We[t[e+2]]+We[t[e+3]]+"-"+We[t[e+4]]+We[t[e+5]]+"-"+We[t[e+6]]+We[t[e+7]]+"-"+We[t[e+8]]+We[t[e+9]]+"-"+We[t[e+10]]+We[t[e+11]]+We[t[e+12]]+We[t[e+13]]+We[t[e+14]]+We[t[e+15]]).toLowerCase()}var El,k5=new Uint8Array(16);function A5(){if(!El&&(El=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!El))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return El(k5)}var R5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const y_={randomUUID:R5};function Is(t,e,n){if(y_.randomUUID&&!t)return y_.randomUUID();t=t||{};var r=t.random||(t.rng||A5)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,N5(r)}const P5={apiKey:"AIzaSyAUjmhfD8H5UCGpiCsBsMXNXQW9zJncc4M",authDomain:"appointmentsystem-7864c.firebaseapp.com",projectId:"appointmentsystem-7864c",storageBucket:"appointmentsystem-7864c.appspot.com",messagingSenderId:"280218126477",appId:"1:280218126477:web:9e151ec4f281396bc9fac4",measurementId:"G-NGXN1SZ3QW"},vm=rc(P5);Rp(vm);const kn=SE(vm),nT=tT(vm),rT="items_images",Mr="inventoryItems",j5="inventoryItemsUpdates",sT="inventoryTickets",_m=async(t,e)=>{try{const n=qe(kn,t,e),r=await Sc(n);return r.exists()?r.data():null}catch(n){throw console.error(`Error getting document: ${e}`,n),n}};async function D5(t,e){try{const n=qe(kn,e,t);await cm(n),console.log(`Document with ID ${t} successfully removed.`)}catch(n){console.error("Error removing document: ",n)}}async function O5(t,e){const n=Ra(nT,`${rT}/${e}`);return ZE(n,t)}async function L5(t){const e=Ra(nT,`${rT}/${t}`);return await eT(e)}async function V5(t){try{const e=await _m(Mr,t);if(!e.exists)return!1;const n=e.data();return!!(n&&n.availablity)}catch(e){return console.error("Error validating item:",e),!1}}async function v_(t,e){lT("updateAvailability",[t,e]);const n=qe(kn,Mr,t);try{await Fi(n,{availability:e}),console.log(`Document ${t} availability successfully updated to ${e}!`)}catch(r){throw console.error("Error updating document: ",r),r}}async function M5(t,e){const n={data:t,availability:!0};if(await _m(Mr,n.data.item_id)==null){console.log("adding new item");const s=`image_${n.data.item_id}`,i=await O5(e,s);if(i){const o=await L5(s);return n.data.item_image_url=o,await js(qe(kn,Mr,n.data.item_id),n),!0}else console.log(`uploadImageResponse was a fail? ${i}`)}else return console.log("item already in inventory"),!1}async function iT(){const t=await Kr(kn,Mr),e=await Aa(t);let n=[];return e.forEach(r=>{n.push(r.data())}),n}async function oT(t,e,n){const r=qe(kn,Mr,t),s=await _m(Mr,t),i={item_id:t,item_name:s.data.item_name,made_by:n,timestamp:new Date().toLocaleString("fr-BE",{timeZone:"Europe/Brussels"}),data:{new_quantity:e,old_quantity:s.data.item_quantity}};try{if(V5(t)){if(v_(t,!1),e<0)throw new Error(`Cannot update quantity for item ${t}, insufficient stock.`);await Fi(r,{"data.item_quantity":e}).then(await U5(i)),console.log(`Document ${t} successfully updated!`),v_(t,!0)}}catch(o){throw console.error("Error updating document: ",o),o}}async function F5(t){await D5(t,Mr),lT("removeItem",[t])}async function U5(t){return await dm(Kr(kn,j5),t)}async function z5(t){console.log(t),await dm(Kr(kn,sT),t)}async function aT(){const t=await Kr(kn,sT),e=await Aa(t);let n=[];return e.forEach(r=>{n.push({id:r.id,data:r.data()})}),n}function lT(t,e){const n={function_name:t,function_params:e,function_call_time:new Date().toLocaleString("fr-BE",{timeZone:"Europe/Brussels"})};js(qe(kn,"logs",Is()),n)}function B5(t){return ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M331.3 308.7L278.6 256l52.7-52.7c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-52.7-52.7c-6.2-6.2-15.6-7.1-22.6 0-7.1 7.1-6 16.6 0 22.6l52.7 52.7-52.7 52.7c-6.7 6.7-6.4 16.3 0 22.6 6.4 6.4 16.4 6.2 22.6 0l52.7-52.7 52.7 52.7c6.2 6.2 16.4 6.2 22.6 0 6.3-6.2 6.3-16.4 0-22.6z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(t)}function $5(t){return ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M128 496H48V304h80zm224 0h-80V208h80zm112 0h-80V96h80zm-224 0h-80V16h80z"},child:[]}]})(t)}function Fr(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Circle_Chev_Down"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12.35,13.85a.492.492,0,0,1-.7,0l-3-3a.495.495,0,0,1,.7-.7L12,12.79l2.65-2.64a.495.495,0,0,1,.7.7Z"},child:[]},{tag:"path",attr:{d:"M21.933,12A9.933,9.933,0,1,1,12,2.067,9.944,9.944,0,0,1,21.933,12ZM3.067,12A8.933,8.933,0,1,0,12,3.067,8.943,8.943,0,0,0,3.067,12Z"},child:[]}]}]}]})(t)}function Ur(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Circle_Chev_Up"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M11.65,10.15a.492.492,0,0,1,.7,0l3,3a.495.495,0,0,1-.7.7L12,11.21,9.35,13.85a.495.495,0,0,1-.7-.7Z"},child:[]},{tag:"path",attr:{d:"M2.067,12A9.933,9.933,0,1,1,12,21.934,9.944,9.944,0,0,1,2.067,12Zm18.866,0A8.933,8.933,0,1,0,12,20.934,8.943,8.943,0,0,0,20.933,12Z"},child:[]}]}]}]})(t)}function q5(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Circle_Minus"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M15,11.5h0a.5.5,0,0,1,0,1H9a.5.5,0,0,1,0-1Z"},child:[]},{tag:"path",attr:{d:"M12,21.934A9.933,9.933,0,1,1,21.932,12,9.945,9.945,0,0,1,12,21.934ZM12,3.068A8.933,8.933,0,1,0,20.932,12,8.944,8.944,0,0,0,12,3.068Z"},child:[]}]}]}]})(t)}function H5(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Circle_Plus"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M15,12.5H12.5V15a.5.5,0,0,1-1,0V12.5H9a.5.5,0,0,1,0-1h2.5V9a.5.5,0,0,1,1,0v2.5H15A.5.5,0,0,1,15,12.5Z"},child:[]},{tag:"path",attr:{d:"M12,21.932A9.934,9.934,0,1,1,21.932,12,9.944,9.944,0,0,1,12,21.932ZM12,3.065A8.934,8.934,0,1,0,20.932,12,8.944,8.944,0,0,0,12,3.065Z"},child:[]}]}]}]})(t)}function uT(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Unlock"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.44,9.33h-1.1c0-.97.01-1.95,0-2.92A4.343,4.343,0,0,0,8.36,4.04c-.36.53.51,1.03.87.5a3.365,3.365,0,0,1,5.23-.39c1.04,1.11.88,2.57.88,3.96V9.33H6.56a2.5,2.5,0,0,0-2.5,2.5v7.61a2.507,2.507,0,0,0,2.5,2.5H17.44a2.507,2.507,0,0,0,2.5-2.5V11.83A2.5,2.5,0,0,0,17.44,9.33Zm1.5,10.11a1.511,1.511,0,0,1-1.5,1.5H6.56a1.511,1.511,0,0,1-1.5-1.5V11.83a1.5,1.5,0,0,1,1.5-1.5H17.44a1.5,1.5,0,0,1,1.5,1.5Z"},child:[]},{tag:"path",attr:{d:"M13,14.95a.984.984,0,0,1-.5.86v1.5a.5.5,0,0,1-1,0v-1.5a.984.984,0,0,1-.5-.86,1,1,0,0,1,2,0Z"},child:[]}]}]}]})(t)}const W5=({connectedUser:t})=>{const[e,n]=C.useState(!1),[r,s]=C.useState(!1),[i,o]=C.useState(null),[a,u]=C.useState([]),[d,f]=C.useState(!1);async function m(){u(await iT())}async function g(T){T.preventDefault(),n(!0),s(!0),o(c.jsx(G5,{UpdateItemsList:[d,f],PopupSetters:[r,s],PopupHolder:[i,o],ClickedAddItemSetters:[e,n]}))}async function v(T){T.preventDefault(),s(!1),o(null),n(!1)}return C.useEffect(()=>{m()},[]),C.useEffect(()=>{d===!0&&(m(),f(!1))},[d]),c.jsxs("div",{className:`relative ${e?"overflow-hidden":""} w-full`,children:[r&&c.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:c.jsxs("div",{className:"bg-white p-8 w-[350px] md:w-[500px] shadow-lg z-50 flex flex-col",children:[c.jsx("button",{onClick:v,className:"text-red-500 text-end text-3xl font-bold ml-auto",children:c.jsx(B5,{})}),i]})}),c.jsx("div",{className:"flex text-4xl font-bold text-white bg-[var(--brand-black)] px-2 py-3",children:c.jsx("h1",{className:"text-center my-auto",children:"Stock"})}),c.jsxs("div",{id:"item-list",className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-5 2xl:grid-cols-6 bg-white py-10 px-5 border-[var(--brand-black)] border-[0.25rem]",children:[c.jsx("div",{className:"inventoryListCard",children:c.jsx("button",{disabled:e,onClick:g,className:"text-gray-600 hover:text-white disabled:bg-gray-600 grid justify-center items-center text-3xl card cardBorder cardAnimation",children:c.jsx(rC,{})})}),a.map((T,A)=>c.jsx("div",{className:"inventoryListCard",children:c.jsx(K5,{itemData:T,PopupSetters:[r,s],PopupHolder:[i,o],UpdateItemsList:[d,f],ConnectedUser:t})},A))]})]})},K5=({itemData:t,PopupSetters:e,PopupHolder:n,UpdateItemsList:r,ConnectedUser:s})=>{const i=({itemData:a,UpdateItemsList:u,PopupSetters:d,PopupHolder:f})=>{const[m,g]=C.useState(!1),[v,T]=C.useState(["",!1]),[A,N]=C.useState(Number(a.data.item_quantity)),[_,w]=C.useState(!1);function I(y){N(y.target.value)}function j(y){y.preventDefault(),N(A+1)}function O(y){y.preventDefault(),N(A-1)}async function L(y){y.preventDefault();try{await oT(a.data.item_id,A,s).then(S=>{T(["Nouvelle quantité sauvegardée",!0]),u[1](!0)})}catch(S){T([`Une erreur est parvenue, esseyez encore.

${toString(S)}`,!1])}}async function E(y){y.preventDefault();try{await F5(a.data.item_id).then(S=>{u[1](!0),w(!1),d[1](!1),f[1](null)})}catch(S){T([`Une erreur est parvenue, esseyez encore !

${S}`,!1])}}return c.jsxs("div",{className:"",children:[_?c.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:c.jsxs("div",{className:"bg-white p-8 w-[400px] md:w-[700px] shadow-lg z-50 flex flex-col",children:[c.jsx("span",{className:"text-center py-5 text-3xl font-bold",children:"Etez-vous sûr de supprimer l'objet?"}),c.jsxs("div",{className:"grid md:flex justify-center items-center gap-5",children:[c.jsx("button",{onClick:E,className:"button-1 bg-red-500 border-red-500 hover:text-red-500 hover:border-red-500",children:"Supprimer"}),c.jsx("button",{onClick:()=>{w(!1)},className:"button-2",children:"Annuler"})]})]})}):c.jsx(c.Fragment,{}),c.jsxs("div",{id:"holder",className:"flex flex-col overflow-hidden",children:[c.jsx("h3",{className:"font-bold text-3xl pb-3 max-h-[100px] overflow-auto",children:a.data.item_name}),c.jsx("img",{src:a.data.item_image_url,className:"max-w-[350px] max-h-[350px] md:mx-auto"}),c.jsxs("div",{id:"details tab",className:"grid ",children:[c.jsx("button",{onClick:()=>{g(!m)},className:"bg-gray-200 p-2",children:c.jsxs("div",{className:"grid grid-flow-col justify-between",children:[c.jsx("span",{children:"Détails"}),c.jsx("span",{className:"m-auto text-xl",children:m?c.jsx(Jb,{}):c.jsx(Xb,{})})]})}),m?c.jsxs("div",{id:"details",className:"grid",children:[c.jsxs("div",{className:"grid grid-cols-2 border-b-[0.05rem] border-gray-400",children:[c.jsx("label",{children:"Item ID : "}),c.jsx("label",{className:"overflow-auto",children:a.data.item_id})]}),c.jsxs("div",{className:"grid grid-cols-2 border-b-[0.05rem] border-gray-400",children:[c.jsx("label",{children:"Item Quantity : "}),c.jsx("label",{children:a.data.item_quantity})]}),c.jsxs("div",{className:"grid grid-cols-2 border-b-[0.05rem] border-gray-400",children:[c.jsx("label",{children:"Item Buy Price : "}),c.jsxs("label",{children:[a.data.item_buy_price,"€"]})]}),c.jsxs("div",{className:"grid grid-cols-2 border-b-[0.05rem] border-gray-400",children:[c.jsx("label",{children:"Item Sell Price : "}),c.jsxs("label",{children:[a.data.item_sell_price,"€"]})]}),c.jsxs("div",{className:"grid grid-cols-2 border-b-[0.05rem] border-gray-400",children:[c.jsx("label",{children:"Item Added Time : "}),c.jsx("label",{children:a.data.item_added_time})]}),c.jsxs("div",{className:"grid grid-cols-2 border-b-[0.05rem] border-gray-400",children:[c.jsx("label",{children:"Item Image URL : "}),c.jsx("label",{className:"overflow-auto max-h-14",children:a.data.item_image_url})]})]}):c.jsx(c.Fragment,{})]}),c.jsxs("div",{className:"flex justify-center items-center gap-5",children:[c.jsx("button",{onClick:O,className:"text-red-700 text-3xl md:text-5xl rounded-full",children:c.jsx(q5,{})}),c.jsxs("div",{className:"flex py-2",children:[c.jsx("label",{className:"text-xl p-2",children:"Stock :"}),c.jsx("input",{type:"number",value:A,onChange:I,className:"font-bold border-[var(--brand-black)] border-[0.10rem] px-1 mx-5 w-[50px] text-center"})]}),c.jsx("button",{onClick:j,className:"text-green-700 text-3xl md:text-5xl rounded-full",children:c.jsx(H5,{})})]}),c.jsxs("div",{className:"flex justify-center items-center gap-5 pb-5",children:[c.jsxs("div",{className:"grid",children:[c.jsx("label",{className:"text-xl p-2",children:"Prix Achat :"}),c.jsxs("label",{className:"font-medium px-1 text-center",children:[a.data.item_buy_price,"€"]})]}),c.jsxs("div",{className:"grid",children:[c.jsx("label",{className:"text-xl p-2",children:"Prix Vente :"}),c.jsxs("label",{className:"font-medium px-1 text-center",children:[a.data.item_sell_price,"€"]})]})]}),c.jsx("p",{className:`${v[1]?"text-green-500":"text-red-500"} px-2 text-center`,children:v}),c.jsxs("div",{className:"grid md:flex justify-center py-2 gap-5",children:[c.jsx("button",{onClick:L,className:"button-1",children:"Sauvegarder"}),c.jsx("button",{onClick:()=>{w(!0)},className:"button-2 border-red-500 text-red-500 hover:bg-red-500",children:"Supprimer"})]})]})]})};function o(a){a.preventDefault(),e[1](!0),n[1](c.jsx(i,{itemData:t,UpdateItemsList:r,PopupSetters:e,PopupHolder:n}))}return c.jsxs("div",{onClick:o,className:`card grid overflow-hidden ${t.data.item_quantity<=0?"border-red-500 border-[0.25rem]":"cardBorder"}`,children:[c.jsx("img",{src:t.data.item_image_url,className:"mx-auto w-[100px] h-[100px] lg:w-[225px] lg:h-[225px] xl:w-[250px] xl:h-[250px]"}),c.jsxs("div",{className:"grid",children:[c.jsx("label",{className:"max-h-[50px] overflow-auto text-center font-bold pt-1 lg:text-2xl",children:t.data.item_name}),c.jsxs("label",{className:"border-t-[0.05rem] border-[var(--brand-black)] text-center lg:text-xl",children:["Stock : ",c.jsx("span",{className:"font-medium",children:t.data.item_quantity})]})]})]})},G5=({UpdateItemsList:t,PopupSetters:e,PopupHolder:n,ClickedAddItemSetters:r})=>{const[s,i]=C.useState(null),[o,a]=C.useState(""),[u,d]=C.useState(0),[f,m]=C.useState(0),[g,v]=C.useState(0),[T,A]=C.useState([]);async function N(_){_.preventDefault();const w={item_id:o.split(" ").join("_"),item_name:o,item_quantity:u,item_buy_price:f,item_sell_price:g,item_image_url:"",item_added_time:new Date().toLocaleString("en-GB",{timeZone:"UTC"})};if(s!==null)try{const I=await M5(w,s);console.log(I),t[1](!0),r[1](!1),e[1](!1),n[1](null)}catch(I){A([`Une erreur est parvenue, esseyez encore !

${I}`,!1])}else A(["Selectionnez une image !",!1])}return c.jsx("div",{className:"",children:c.jsxs("div",{id:"holder",className:"flex flex-col",children:[c.jsx("h3",{className:"font-bold text-3xl pb-3",children:"Nouveau Objet"}),c.jsxs("form",{id:"input holder",className:"py-5 px-2 grid gap-2",onSubmit:N,children:[c.jsxs("div",{className:"grid grid-cols-2 text-end",children:[c.jsx("label",{className:"px-2",children:"Nom Objet : "}),c.jsx("input",{type:"text",required:!0,placeholder:o,onChange:_=>{a(_.target.value)},className:"border-[var(--brand-black)] border-[0.15rem] px-1"})]}),c.jsxs("div",{className:"grid grid-cols-2 text-end",children:[c.jsx("label",{className:"px-2",children:"Quantité de départ : "}),c.jsx("input",{type:"number",placeholder:u,onChange:_=>{d(_.target.value)},className:"border-[var(--brand-black)] border-[0.15rem] px-1"})]}),c.jsxs("div",{className:"grid grid-cols-2 text-end",children:[c.jsxs("label",{className:"px-2",children:["Prix d'",c.jsx("span",{className:"font-bold",children:"achat"})," par unité (€) : "]}),c.jsx("input",{type:"decimal",placeholder:`${f}€`,onChange:_=>{m(_.target.value)},className:"border-[var(--brand-black)] border-[0.15rem] px-1"})]}),c.jsxs("div",{className:"grid grid-cols-2 text-end",children:[c.jsxs("label",{className:"px-2",children:["Prix de ",c.jsx("span",{className:"font-bold",children:"vente"})," par unité (€) : "]}),c.jsx("input",{type:"decimal",placeholder:`${g}€`,onChange:_=>{v(_.target.value)},className:"border-[var(--brand-black)] border-[0.15rem] px-1"})]}),c.jsxs("div",{className:"grid grid-cols-2 text-end",children:[c.jsx("label",{className:"px-2",children:"Photo (500x500) : "}),c.jsx("input",{type:"file",onChange:_=>{i(_.target.files[0])}})]}),c.jsx("p",{className:`${T[1]?"text-green-500":"text-red-500 font-bold"} px-2 text-center`,children:T}),c.jsx("button",{type:"submit",className:"button-1",children:"Sauvegarder"})]})]})})};function Q5(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03L21 4.96 19.25 4l-3.7 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2zM12 2l4 4-4 4-1.41-1.41L12.17 7H8V5h4.17l-1.59-1.59L12 2z"},child:[]}]})(t)}function Y5(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"},child:[]}]})(t)}function X5(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z"},child:[]}]})(t)}function J5(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M16 2L21 6.999V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918C3 2.44405 3.44495 2 3.9934 2H16ZM13 9H11V15H16V13H13V9Z"},child:[]}]})(t)}const Z5=({connectedUser:t})=>{const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,o]=C.useState([]);async function a(){n(await iT())}function u(T,A){T.preventDefault();const N=r.findIndex(_=>_[0]===A);if(N!==-1){const _=r.map((w,I)=>I===N?[w[0],w[1]+1]:w);s(_)}else s([...r,[A,1]]);console.log(r)}function d(T,A){T.preventDefault();const N=r.findIndex(_=>_[0]===A);if(N!==-1){const _=r.map((w,I)=>{if(I===N){const j=w[1]-1;return j>0?[w[0],j]:null}return w}).filter(Boolean);s(_)}}function f(){let T=0;return r.map((A,N)=>{T=T+A[0].data.item_sell_price*A[1]}),T.toFixed(2)}function m(T){let A=[];return T.map((N,_)=>{A.push({item:{item_id:N[0].data.item_id,item_name:N[0].data.item_name,item_sell_price:N[0].data.item_sell_price,item_buy_price:N[0].data.item_buy_price},quantity:N[1]})}),A}async function g(T){T.preventDefault();const A={meta:{timestamp:new Date().toLocaleString("fr-BE",{timeZone:"Europe/Brussels"}),created_by:t},items:m(r),total_amount:f()};try{await Promise.all(r.map(async(N,_)=>{const w=e.findIndex(I=>I.data.item_id===N[0].data.item_id);if(w!==-1){const I=e[w].data.item_quantity-N[1];await oT(N[0].data.item_id,I,t)}else throw new Error(`Item ${N[0].data.item_id} not found`)})),o(["Confirmation du tiket réussie !",!1]),console.log(`TICKET : ${A}`),await z5(A),await new Promise(N=>setTimeout(N,3e3)),s([]),o([])}catch(N){console.log(N),o([N.message,!0])}}C.useEffect(()=>{a()},[]);const v=({itemData:T})=>c.jsxs("div",{className:`${T.data.item_quantity<=0?"bg-gray-300":"bg-white"} shadow-md shadow-black/25 flex flex-col p-3`,children:[c.jsx("div",{className:"w-[75px] h-[75px] grid m-auto md:w-[100px] md:h-[100px] xl:w-[150px] xl:h-[150px] overflow-hidden",children:c.jsx("img",{src:T.data.item_image_url,className:"w-fit"})}),c.jsxs("div",{className:"grid py-2 h-[150px]",children:[c.jsx("label",{className:"overflow-auto max-h-[75px] my-auto text-xl font-bold text-center lg:text-2xl ",children:T.data.item_name}),c.jsxs("label",{className:"font-medium px-1 my-auto text-center text-lg md:text-xl lg:text-2xl",children:[T.data.item_sell_price,"€"]})]})]});return c.jsx("div",{children:c.jsxs("div",{className:"flex flex-col bg-[var(--brand-black)] px-2 py-3 ",children:[c.jsx("h1",{className:"text-start my-auto pb-5 text-4xl font-bold text-white",children:"Vente"}),c.jsxs("div",{className:"grid md:grid-flow-col",children:[c.jsx("div",{id:"item_grid",className:"md:ml-auto md:min-w-[350px] md:w-fit special-vente-shadow-1 bg-[var(--brand-white)] py-5 px-5 gap-2 h-[750px] overflow-y-auto grid grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:e.map((T,A)=>c.jsx("button",{className:"grid",disabled:T.data.item_quantity<=0,onClick:N=>{u(N,T)},children:c.jsx(v,{itemData:T})},A))}),c.jsxs("div",{id:"ticket + confirm button",className:"md:mr-auto flex flex-col special-vente-shadow-1 mb-auto",children:[c.jsxs("div",{id:"tiket",className:"bg-gray-100 py-5 grid ",children:[c.jsx("label",{className:" text-2xl font-bold pb-2 px-2 ",children:"Ticket"}),c.jsx("div",{id:"list of items",className:"border-y-black border-[0.15rem] flex flex-col h-[450px] md:w-[250px] xl:w-[350px] 2xl:w-[450px] overflow-y-auto",children:r.map((T,A)=>c.jsxs("div",{className:"flex py-5",children:[c.jsxs("label",{className:"px-2 font-bold text-lg",children:["x",T[1]]}),c.jsx("label",{className:"max-w-[250px] max-h-[50px] overflow-auto text-lg",children:T[0].data.item_name}),c.jsx("div",{className:"grid ml-auto mr-5",children:c.jsx("button",{onClick:N=>{d(N,T[0])},className:"text-2xl text-red-600",children:c.jsx(sC,{})})})]},A))}),c.jsx("div",{className:"grid",children:c.jsxs("label",{className:"px-3 py-1 font-bold text-xl md:text-2xl ",children:["Total : ",f()," €"]})})]}),c.jsxs("div",{className:"bg-gray-100 p-5 grid",children:[c.jsx("label",{className:`${i[1]?"text-red-500 font-bold":"text-green-500"} py-5 text-center`,children:i}),c.jsx("button",{onClick:T=>{g(T)},className:"px-5 py-2 m-auto text-xl text-white bg-[var(--brand-black)] border-[var(--brand-black)] border-[0.15rem]",children:" Confirmer "})]})]})]})]})})};function qd(t,e){return[...t].sort((n,r)=>{const s=a=>{const[u,d]=a.split(" "),[f,m,g]=u.split("/").map(Number),[v,T,A]=d.split(":").map(Number);return new Date(g,m-1,f,v,T,A)},i=s(n.data.meta.timestamp),o=s(r.data.meta.timestamp);return e?i-o:o-i})}function eO(){const[t,e]=C.useState([]),[n,r]=C.useState(!1);async function s(){await aT().then(o=>{e(qd(o,n))})}C.useEffect(()=>{s()},[]);function i(o){console.log("> handleling order tickets ascending"),console.log(t),console.log(qd(t,!n)),e(qd(t,!n)),r(!n)}return c.jsxs("div",{className:"flex flex-col bg-[var(--brand-black)] px-2 py-3",children:[c.jsx("h1",{className:"text-start my-auto pb-5 text-4xl font-bold text-white",children:"Historique de Tickets"}),c.jsxs("div",{className:"flex gap-5 font-bold py-2 bg-white",children:[c.jsx("label",{children:"Ordre Chronologique"}),c.jsx("input",{type:"checkbox",value:n,checked:n,onChange:i})]}),c.jsx("div",{className:"grid bg-white py-5 px-2 gap-5",children:t.map((o,a)=>c.jsx(tO,{ticketData:o},a))})]})}const tO=({ticketData:t})=>{const[e,n]=C.useState(!1);function r(s){s.preventDefault(),n(!e)}return c.jsxs("div",{className:"grid bg-[var(--brand-black-25)] transition-all duration-200 p-2",children:[c.jsxs("button",{onClick:r,className:"flex justify-between ",children:[c.jsxs("div",{className:"grid",children:[c.jsx("label",{className:"",children:t.data.meta.timestamp}),c.jsxs("div",{className:"flex gap-5 font-bold",children:[c.jsx("label",{children:"Total : "}),c.jsxs("label",{children:[t.data.total_amount," €"]})]})]}),c.jsx("div",{className:"text-center my-auto text-3xl",children:e?c.jsx(X5,{}):c.jsx(Y5,{})})]}),c.jsxs("div",{className:`${e?"grid":"hidden"} bg-[var(--brand-white)] p-2`,children:[c.jsxs("div",{className:"grid",children:[c.jsxs("label",{children:["Fait par : ",c.jsx("span",{className:"font-medium",children:t.data.meta.created_by})]}),c.jsxs("label",{className:"text-xs",children:["Id : ",t.id]})]}),c.jsxs("div",{className:"grid",children:[c.jsx("label",{className:"py-2",children:"Objets"}),c.jsx("div",{className:"grid px-5",children:t.data.items.map((s,i)=>c.jsxs("div",{className:"grid grid-cols-3 border-[0.10rem] border-[var(--brand-black)]",children:[c.jsx("label",{className:"col-span-2 overflow-auto max-h-[50px] px-2 border-r-[0.10rem] border-[var(--brand-black)]",children:s.item.item_name}),c.jsxs("div",{className:"col-span-1 grid grid-cols-2",children:[c.jsxs("label",{className:"text-right px-3",children:[s.quantity,"x"]}),c.jsxs("label",{className:"text-center",children:[s.item.item_sell_price," €"]})]})]},i))})]})]})]})},nO=["UNCONFIRMED","CONFIRMED","ABSENT","CANCELED"],rO="UNCONFIRMED",sO="CONFIRMED",iO="ABSENT",oO="CANCELED",oe={states:nO,neutral_state:rO,affirmative_state:sO,medium_state:iO,negative_state:oO},cT={apiKey:"AIzaSyAUjmhfD8H5UCGpiCsBsMXNXQW9zJncc4M",authDomain:"appointmentsystem-7864c.firebaseapp.com",projectId:"appointmentsystem-7864c",storageBucket:"appointmentsystem-7864c.appspot.com",messagingSenderId:"280218126477",appId:"1:280218126477:web:9e151ec4f281396bc9fac4",measurementId:"G-NGXN1SZ3QW"},wm=rc(cT),Hd=Rp(wm),_t=SE(wm),xm=tT(wm);async function dT(t,e){const n=Ra(xm,`photos/${e}`);return ZE(n,t)}async function hT(t){const e=Ra(xm,`photos/${t}`);return await eT(e)}function Em(t,e){let n=[];e==null&&(e=[]);for(let r=0;r<e.length;r++){const s=e[r];s.barber_id==t&&n.push(s)}return n}function fT(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(r.appointment_hour===t&&r.confirmed!==oe.negative_state)return!0}return!1}function aO(t,e){let n=[];for(let r=0;r<e.length;r++){const s=e[r];n.push(s.appointment_id)}if(n.includes(t)){let r=Is();for(;n.includes(r);)r=Is();return r}else return t}async function lO(t){const e=await en("appointments",t.appointment_date);if(e===null)return console.log("Document doesnt exist."),await js(qe(_t,"appointments",t.appointment_date),{locked:!1,appointments:[t]}),console.log(`New document ${t.appointment_date} has been created. Array ${t.appointment_date}.appointments has been created by adding new appointment.`),!0;if(console.log(`Document ${t.appointment_date} already exists.`),e.locked)return console.log("Given day is locked !"),!1;{const n=await en("profiles",t.barber_id);if(n.locked_days.includes(t.appointment_date))return console.log(`Profile ${n.profile_id} includes ${t.appointment_date} as LOCKED DAY.`),!1;if(t.appointment_id=aO(t.appointment_id,e.appointments),fT(t.appointment_hour,Em(t.barber_id,e.appointments)))return console.log(`Wanted hour ${t.appointment_hour} is already taken for ${t.barber_id}.`),!1;{const r=qe(_t,"appointments",t.appointment_date);return await Fi(r,{appointments:mD(t)}),console.log(`Array ${t.appointment_date}.appointments has been updated by adding new appointment.`),!0}}}async function Nc(t,e){const n=await en("appointments",t);return n===null?[]:Em(e.profile_id,n.appointments)}async function pT(t,e,n){if(!oe.states.includes(n))return!1;const r=await en("appointments",t);if(r===null)return!1;{const s=r.appointments.map(o=>(o.appointment_id===e&&(o.confirmed=n),o)),i=qe(_t,"appointments",t);return await Fi(i,{appointments:s}),!0}}async function uO(t){const e=AO(t),n=await en("schedule",e),r=30;let s=[];return n.closed||(n.new_schedule.starting_date.length>0&&n.new_schedule.starting_date<=t?__(n.new_schedule.opening_hour,n.new_schedule.closing_hour,r).forEach(o=>{(o<n.new_schedule.break_start||o>=n.new_schedule.break_end)&&s.push([o,!1])}):__(n.actual_schedule.opening_hour,n.actual_schedule.closing_hour,r).forEach(o=>{(o<n.actual_schedule.break_start||o>=n.actual_schedule.break_end)&&s.push([o,!1])})),s}async function cO(t,e){const n=await uO(t);var r=[];const s=await en("appointments",t);return s===null?e.locked_days.includes(t)?(n.forEach(i=>{r.push([i[0],!0])}),r):n:(s.locked?n.forEach(i=>{r.push([i[0],!0])}):n.forEach(i=>{e.locked_days.includes(String(t))?r.push([i[0],!0]):fT(i[0],Em(e.profile_id,s.appointments))?r.push([i[0],!0]):r.push(i)}),r)}async function dO(){const t={monday:"Lundi",tuesday:"Mardi",wednesday:"Mercredi",thursday:"Jeudi",friday:"Vendredi",saturday:"Samedi",sunday:"Dimanche"},e=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];let n=await Kr(_t,"schedule"),r=await Aa(n),s=[];return r.forEach(i=>{i.data().closed?s.push({day:t[i.id],schedule:"Fermé"}):s.push({day:t[i.id],schedule:`${i.data().actual_schedule.opening_hour} - ${i.data().actual_schedule.closing_hour}`})}),s.sort((i,o)=>e.indexOf(Object.keys(t).find(a=>t[a]===i.day))-e.indexOf(Object.keys(t).find(a=>t[a]===o.day))),s}async function hO(t,e){const n=e.split("-")[1],r=mT(n,e.split("-")[0]);let s=[["Date","nbr rdvs"]];for(let i=0;i<r.length;i++){const o=r[i];await Nc(o,t).then(a=>{s.push([o,a.length])})}return[t.profile_id,s]}async function fO(t,e){const n=e.split("-")[1],r=mT(n,e.split("-")[0]);let s=[];for(let i=0;i<r.length;i++){const o=r[i];await Nc(o,t).then(a=>{s.push(a)})}return[t.profile_id,s]}function mT(t,e){const n=[],r=new Date(e,t,0).getDate();for(let s=2;s<=r+1;s++){const o=new Date(e,t-1,s).toISOString().split("T")[0];n.push(o)}return n}async function pO(t){try{return await en("profiles",t.profile_id)===null?(js(qe(_t,"profiles",t.profile_id),{...t,admin:!1}),t):null}catch(e){return Tm({e_message:"Failed to add appointment to << appointments >> firestore table.",program_execution:"Failed to execute firebase.addAppointment(...)",program_function_error:`addAppointment(${user_name},${user_emai},${user_phone},${rdv_date},${rdv_time})`,program_page:"/rendez-vous"}),e}}async function mO(t,e){const n=rc(cT,"Secondary"),r=Rp(n);if(await dT(e,t.image)){const i=await hT(t.image);t.image_url=i;const o=await pO(t),a=await JA(r,t.email,"m77barber");return r1(r),o!==null&&a!==null}}async function gO(t,e){const n=Is(),r=await dT(e,n),s=t.image;if(r){const i=await hT(n);return t.image_url=i,t.image=n,await kc(t)!==null?(await xO(s),!0):!1}}async function yO(t,e){try{return await en("profiles",t.profile_id)!==null?(js(qe(_t,"profiles",t.profile_id),{...t,profile_description:e}),{...t,profile_description:e}):null}catch(n){return Tm({e_message:"Failed to update profile in << profiles >> firestore table.",program_execution:"Failed to execute firebase.updateProfile(...)",program_function_error:`updateProfile(${t})`,program_page:"/profile"}),n}}async function vO(t,e){try{return t?(await eR(t,e),!0):(console.error("No user is currently signed in."),!1)}catch(n){return console.error("Error changing password:",n),!1}}async function kc(t){try{return await en("profiles",t.profile_id)!==null?(js(qe(_t,"profiles",t.profile_id),t),t):null}catch(e){return Tm({e_message:"Failed to update profile in << profiles >> firestore table.",program_execution:"Failed to execute firebase.updateProfile(...)",program_function_error:`updateProfile(${t})`,program_page:"/profile"}),e}}async function _O(t){try{const e=qe(_t,"profiles",t);let n=await cm(e)}catch(e){console.error("Error removing document: ",e)}}async function Ui(){const t=await Kr(_t,"profiles"),e=await Aa(t),n=[];return e.forEach(r=>{r.data()&&n.push({...r.data()})}),n}async function wO(){return(await Ui()).filter(n=>n.visible===!0)}async function Pa(t){const e=await Ui();for(let n=0;n<e.length;n++)if(e[n].email===t)return e[n];return null}async function xO(t){const e=Ra(xm,`photos/${t}`);try{const n=await I5(e);return console.log(`Image ${t} removed successfully.`),!0}catch(n){console.error("Error removing image:",n)}}const en=async(t,e)=>{try{const n=qe(_t,t,e),r=await Sc(n);return r.exists()?r.data():null}catch(n){throw console.error("Error getting document:",n),n}};async function EO(t){try{const e=qe(_t,"appointments",t);await cm(e),console.log(`Document with ID ${t} successfully removed.`)}catch(e){console.error("Error removing document: ",e)}}async function TO(t){return t.forEach(e=>{bO(e)}),!0}async function IO(t){return t.forEach(e=>{CO(e)}),!0}async function SO(){const t=Kr(_t,"appointments"),e=await Aa(t),n=[];return e.forEach(r=>{r.data().locked&&n.push(r.id)}),n}async function bO(t){try{const e=qe(_t,"appointments",t);(await Sc(e)).exists()?(await Fi(e,{locked:!0}),console.log(`Day ${t} locked successfully.`)):(await js(e,{all_appointments:[],locked:!0},{merge:!0}),console.log(`New document created for day ${t} with 'locked' field set to true.`))}catch(e){console.error("Error locking day: ",e)}}async function CO(t){try{const e=qe(_t,"appointments",t);(await Sc(e)).exists()&&(await Fi(e,{locked:!1}),console.log(`Day ${t} unlocked successfully.`));const r=await en("appointments",t);r.all_appointments.length===0&&r.locked===!1&&EO(t)}catch(e){console.error("Error locking day: ",e)}}async function NO(t,e){const n=await en("profiles",t);if(n.locked_days.includes(e))return[!1,"Journée déjà bloquée !"];{const r=[...n.locked_days,e];return await kc({...n,locked_days:r}),[!0,"Journée bloquée avec succès !"]}}async function kO(t,e){const n=await en("profiles",t);if(n.locked_days.includes(e)){const r=n.locked_days.filter(s=>s!==e);return await kc({...n,locked_days:r}),[!0,"Journée débloquée avec succès !"]}else return[!1,"Journée déjà débloquée !"]}async function Tm(t){const e={error_time:Le.now(),error_message:t};dm(Kr(_t,"error_table"),e)}function AO(t){const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],r=new Date(t).getDay();return e[r]}function __(t,e,n){const r=[],[s,i]=t.split(":").map(Number),[o,a]=e.split(":").map(Number);let u=s*60+i;const d=o*60+a-n;for(;u<=d;){const f=Math.floor(u/60),m=u%60,g=`${String(f).padStart(2,"0")}:${String(m).padStart(2,"0")}`;r.push(g),u+=n}return r}const gT=yt.createContext();function zi(){return C.useContext(gT)}function RO({children:t}){const[e,n]=C.useState(),[r,s]=C.useState(!0);function i(u,d){return ZA(Hd,u,d)}function o(){return r1(Hd)}C.useEffect(()=>Hd.onAuthStateChanged(d=>{n(d),s(!1)}),[]);const a={currentUser:e,login:i,logout:o};return c.jsx(gT.Provider,{value:a,children:!r&&t})}function PO(t){const[e,n]=C.useState(!0),[r,s]=C.useState(null),[i,o]=C.useState(!1),a=()=>{n(!1),o(!0)};return C.useEffect(()=>{if(!document){const m=new Error(`[ScriptLoadingError] document not defined when attempting to load ${t}`);s(m);return}const u=document.querySelector(`script[src="${t}"]`);if(u!=null&&u.dataset.loaded){a();return}const d=u||document.createElement("script");u||(d.src=t);const f=()=>{d.dataset.loaded="1",a()};d.addEventListener("load",f),d.addEventListener("error",m=>{console.error("Failed to load script:",t,m);const g=new Error(`[ScriptLoadingError] Failed to load script: ${t}`);s(g)}),u||document.head.append(d)},[]),{isLoading:e,error:r,isSuccess:i}}const jO=t=>t&&t.charts,w_=(t,e)=>{const{controls:n,toolbarItems:r,getChartEditor:s}=t;return e&&e.charts&&e.visualization&&e.visualization.ChartWrapper&&e.visualization.Dashboard&&(!n||e.visualization.ChartWrapper)&&(!s||e.visualization.ChartEditor)&&(!r||e.visualization.drawToolbar)},DO=t=>window.google;function OO(t){const{chartVersion:e="current",chartPackages:n=["corechart","controls"],chartLanguage:r="en",mapsApiKey:s}=t,[i,o]=C.useState(null),[a,u]=C.useState(null),[d,f]=C.useState(null),{isLoading:m,error:g,isSuccess:v}=PO(t.chartLoaderScriptUrl||"https://www.gstatic.com/charts/loader.js");return C.useEffect(()=>{if(!v)return;const T=DO();if(!jO(T)){const A=new Error("[ScriptInitializationError] Script loaded but Google not attached to window.");u(A);return}if(w_(t,T)){o(T);return}T.charts.load(e,{packages:n,language:r,mapsApiKey:s}),T.charts.setOnLoadCallback(()=>{if(!w_(t,T)){const A=new Error("[GoogleChartsInitializationError] Google Charts not ready after load callback.");console.error(A),f(A);return}o(T)})},[v]),{error:g||a||d,isLoading:m,google:i}}const yT={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{},chartLoaderScriptUrl:"https://www.gstatic.com/charts/loader.js"},LO=t=>{const{isReady:e,chartControls:n,filter:r}=t;return!e||!n||!(n!=null&&n.length)?null:yt.createElement(yt.Fragment,null,n.filter(s=>{let{controlProp:i,control:o}=s;return r?r({control:o,controlProp:i}):!0}).map(s=>{let{control:i}=s;return yt.createElement("div",{key:i.getContainerId(),id:i.getContainerId()})}))};let x_=0;const vT=()=>(x_+=1,`reactgooglegraph-${x_}`),yn=class yn{};rn(yn,"initializeControls",e=>{for(let n=0;n<e.length;n+=1){const{controlType:r,options:s,controlWrapperParams:i}=e[n].controlProp;i&&"state"in i&&e[n].control.setState(i.state),e[n].control.setOptions(s),e[n].control.setControlType(r)}}),rn(yn,"listenToControlEvents",(e,n)=>{const{google:r}=n;return e.flatMap(s=>{const{control:i,controlProp:o}=s,{controlEvents:a=[]}=o;return a.map(u=>{const{callback:d,eventName:f}=u;return r.visualization.events.addListener(i,f,function(){for(var m=arguments.length,g=new Array(m),v=0;v<m;v++)g[v]=arguments[v];d({chartWrapper:null,controlWrapper:i,props:n,google:r,eventArgs:g})})})})}),rn(yn,"createControlId",e=>{let n;return typeof e>"u"?n=`googlechart-control-${vT()}`:n=e,n}),rn(yn,"createChartControls",e=>{const{controls:n,google:r}=e;return n?n.map((s,i)=>{const{controlID:o,controlType:a,options:u,controlWrapperParams:d}=s,f=yn.createControlId(o);return{controlProp:s,control:new r.visualization.ControlWrapper({containerId:f,controlType:a,options:u,...d})}}):null}),rn(yn,"addControls",e=>{const{chartWrapper:n,chartDashboard:r}=e,s=yn.createChartControls(e);return!s||!r||!n?null:(r.bind(s.map(i=>{let{control:o}=i;return o}),n),yn.initializeControls(s),s)});let Vu=yn;const VO=t=>{const[e,n]=C.useState(null);return[C.useMemo(()=>!e||!t?null:t.map((s,i)=>{const o=e[i];return o?{controlProp:s,control:o}:void 0}).flatMap(s=>s?[s]:[]),[e,t]),n]},MO=(t,e)=>{C.useEffect(()=>{const n=Vu.listenToControlEvents(t??[],e);return()=>{n.forEach(r=>{e.google.visualization.events.removeListener(r)})}},[t,e])},FO=t=>{const[e,n]=VO(t.controls);return MO(e??[],t),{addControls:s=>{const i=Vu.addControls(s);n((i==null?void 0:i.map(o=>o.control))??null)},renderControl:s=>{const{chartWrapper:i,chartDashboard:o}=t;return C.createElement(LO,{...t,isReady:!!(i&&o),chartControls:e,filter:s})}}},UO=t=>{const e=C.useRef(null);return{chartId:(()=>{const{graphID:s,graph_id:i}=t,o=s||i;let a;return o?a=o:a=e.current||vT(),e.current=a,e.current})()}},zO=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],BO=async function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,s)=>{const i=`${n.headers?`headers=${n.headers}`:"headers=0"}`,o=`${n.query?`&tq=${encodeURIComponent(n.query)}`:""}`,a=`${n.gid?`&gid=${n.gid}`:""}`,u=`${n.sheet?`&sheet=${n.sheet}`:""}`,d=`${n.access_token?`&access_token=${n.access_token}`:""}`,f=`${i}${a}${u}${o}${d}`,m=`${e}/gviz/tq?${f}`;new t.visualization.Query(m).send(v=>{v.isError()?s(`Error in query:  ${v.getMessage()} ${v.getDetailedMessage()}`):r(v.getDataTable())})})},$O="#CCCCCC",qt=class qt{};rn(qt,"grayOutHiddenColumnsLabel",(e,n)=>{const{googleChartWrapper:r,options:s}=e;if(!r){console.error("googleChartWrapper is not defined");return}const i=r.getDataTable();if(!i)return;const o=i.getNumberOfColumns();if(n.length>0===!1)return;const u=Array.from({length:o-1}).map((d,f)=>{const m=qt.getColumnId(i,f+1);return n.includes(m)?$O:s&&s.colors?s.colors[f]:zO[f]});r.setOptions({...s,colors:u}),r.draw()}),rn(qt,"listenToLegendToggle",(e,n)=>{const[r,s]=n,{google:i,googleChartWrapper:o}=e;if(!o){console.error("googleChartWrapper is not defined");return}return i.visualization.events.addListener(o,"select",()=>{const u=o.getChart().getSelection(),d=o.getDataTable();if(u.length===0||u[0].row!==null||!d)return;const f=u[0].column,m=qt.getColumnId(d,f);r!=null&&r.includes(m)?s(g=>[...g.filter(v=>v!==m)]):s(g=>[...g,m])})}),rn(qt,"draw",async e=>{const{data:n,diffdata:r,rows:s,columns:i,options:o,chartType:a,formatters:u,spreadSheetUrl:d,spreadSheetQueryParameters:f,googleChartDashboard:m,googleChartWrapper:g,google:v,hiddenColumns:T,legendToggle:A,legend_toggle:N}=e;if(!g){console.error("draw was called with googleChartWrapper = null");return}let _,w=null;if(r){const E=v.visualization.arrayToDataTable(r.old),y=v.visualization.arrayToDataTable(r.new);w=v.visualization[a].prototype.computeDiff(E,y)}n?n instanceof v.visualization.DataTable?_=n:Array.isArray(n)?_=v.visualization.arrayToDataTable(n):_=new v.visualization.DataTable(n):s&&i?_=v.visualization.arrayToDataTable([i,...s]):d?_=await BO(v,d,f):_=v.visualization.arrayToDataTable([]);const I=_.getNumberOfColumns(),j=Array(I).fill(0).map((E,y)=>{const S=qt.getColumnId(_,y);return T.includes(S)?{label:_.getColumnLabel(y),type:_.getColumnType(y),calc:()=>null}:y}),O=g.getChart();g.getChartType()==="Timeline"&&O&&O.clearChart(),g.setChartType(a),g.setOptions(o||{});const L=new v.visualization.DataView(_);L.setColumns(j),g.setDataTable(L),g.draw(),m&&m.draw(_),w&&(g.setDataTable(w),g.draw()),u&&(qt.applyFormatters({dataTable:_,formatters:u,google:v}),g.setDataTable(_),g.draw()),(A===!0||N===!0)&&qt.grayOutHiddenColumnsLabel(e,T)}),rn(qt,"getColumnId",(e,n)=>e.getColumnId(n)||e.getColumnLabel(n)),rn(qt,"applyFormatters",e=>{let{dataTable:n,formatters:r,google:s}=e;for(let i of r)switch(i.type){case"ArrowFormat":{new s.visualization.ArrowFormat(i.options).format(n,i.column);return}case"BarFormat":{new s.visualization.BarFormat(i.options).format(n,i.column);return}case"ColorFormat":{const o=new s.visualization.ColorFormat(i.options),{ranges:a}=i;if(a)for(let u of a)o.addRange(...u);o.format(n,i.column);return}case"DateFormat":{new s.visualization.DateFormat(i.options).format(n,i.column);return}case"NumberFormat":{new s.visualization.NumberFormat(i.options).format(n,i.column);return}case"PatternFormat":{new s.visualization.PatternFormat(i.options).format(n,i.column);return}default:{console.warn(`Unknown formatter type: ${i.type}`);return}}});let Fo=qt;const qO=t=>{const{google:e,googleChartWrapper:n,googleChartDashboard:r}=t,[s,i]=C.useState([]);C.useEffect(()=>{n&&Fo.draw({...t,hiddenColumns:s,googleChartWrapper:n,googleChartDashboard:r,google:e})},[s,t.data,t.rows,t.columns,t.options,t.chartLoaderScriptUrl,t.chartType,t.formatters,t.spreadSheetUrl,t.spreadSheetQueryParameters,t.legendToggle,t.legend_toggle]);const o=()=>{const{googleChartWrapper:d}=t;d&&d.draw()},a=d=>{const f=[],{legendToggle:m,legend_toggle:g}=t;if(Fo.draw({...t,hiddenColumns:s,googleChartWrapper:d,googleChartDashboard:r,google:e}),window.addEventListener("resize",o),g||m){const v=Fo.listenToLegendToggle(t,[s,i]);v&&f.push(v)}return f},u=(d,f)=>{window.removeEventListener("resize",o),f.forEach(m=>{e.visualization.events.removeListener(m)}),d.getChartType()==="Timeline"&&d.getChart()&&d.getChart().clearChart()};C.useEffect(()=>{if(!n)return;const d=a(n);return()=>{u(n,d)}},[n,a,u])},HO=t=>{const{chartEvents:e,google:n,googleChartWrapper:r}=t;if(e){if(!r){console.warn("listenToEvents was called before chart wrapper ready.");return}return e.map(s=>{let{eventName:i,callback:o}=s;return n.visualization.events.addListener(r,i,function(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];o({chartWrapper:r,props:t,google:n,eventArgs:u})})})}},WO=t=>{C.useEffect(()=>{if(!t.googleChartWrapper)return;const e=HO(t);return()=>{e==null||e.forEach(n=>{t.google.visualization.events.removeListener(n)})}},[t])},KO=t=>{const[e,n]=C.useState(null),[r,s]=C.useState(null),{addControls:i,renderControl:o}=FO({...t,chartDashboard:r,chartWrapper:e});WO({...t,googleChartWrapper:e});const{chartId:a}=UO(t),u=C.useRef(null),d=C.useRef(null);C.useEffect(()=>{const{options:_,google:w,chartType:I,chartWrapperParams:j,toolbarItems:O,getChartEditor:L,getChartWrapper:E,onLoad:y}=t,S={chartType:I,options:_,containerId:a,...j},k=new w.visualization.ChartWrapper(S);k.setOptions(_||{}),E==null||E(k,w);const R=new w.visualization.Dashboard(u.current);O&&w.visualization.drawToolbar(d.current,O);let P=null;L&&(P=new w.visualization.ChartEditor,L({chartEditor:P,chartWrapper:k,google:w})),i({...t,chartDashboard:R,chartWrapper:k}),n(k),s(R),y==null||y(w,{google:w,chartWrapper:k,chartEditor:P,chartDashboard:R})},[]),qO({...t,googleChartWrapper:e,googleChartDashboard:r});const f=()=>{const{width:_,height:w,options:I,style:j,className:O,rootProps:L,google:E}=t,y={height:w||I&&I.height,width:_||I&&I.width,...j};return C.createElement("div",{id:a,style:y,className:O,...L})},m=()=>t.toolbarItems?C.createElement("div",{ref:d}):null,{width:g,height:v,options:T,style:A}=t,N={height:v||T&&T.height,width:g||T&&T.width,...A};return t.render?C.createElement("div",{ref:u,style:N},C.createElement("div",{ref:d,id:"toolbar"}),t.render({renderChart:f,renderControl:o,renderToolbar:m})):C.createElement("div",{ref:u,style:N},o(_=>{let{controlProp:w}=_;return w.controlPosition!=="bottom"}),f(),o(_=>{let{controlProp:w}=_;return w.controlPosition==="bottom"}),m())},GO=C.createContext(yT),QO=t=>{let{children:e,value:n}=t;return C.createElement(GO.Provider,{value:n},e)},YO=t=>{const{google:e,isLoading:n,error:r}=OO(t);return n?t.loader??null:r?t.errorElement??null:e?yt.createElement(KO,{google:e,...t}):null},Bi=t=>{const e={...yT,...t};return yt.createElement(QO,{value:e},yt.createElement(YO,e))};var E_;(function(t){t.annotation="annotation",t.annotationText="annotationText",t.certainty="certainty",t.emphasis="emphasis",t.interval="interval",t.scope="scope",t.style="style",t.tooltip="tooltip",t.domain="domain"})(E_||(E_={}));const XO=({organizedTickets:t,selectedDate:e})=>{const[n,r]=e.split("-").map(Number),s=t.filter(({date:a})=>{const[u,d,f]=a.split("/").map(Number);return f===n&&d===r}),i=[["Date","Nombre de Tickets"],...s.length>0?s.map(({date:a,tickets:u})=>[a,u.length]):[["-",0]]],o={title:`Tickets en ${n}-${String(r).padStart(2,"0")}`,chartArea:{width:"80%"},hAxis:{title:"Date",textStyle:{fontSize:12}},vAxis:{title:"Tickets",minValue:0},legend:{position:"none"},colors:["#4CAF50"]};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 bg-white shadow-lg rounded-lg",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-700 text-center",children:["Ventes de Tickets Quotidiennes pour ",n,"-",String(r).padStart(2,"0")]}),c.jsx(Bi,{chartType:"ColumnChart",data:i,options:o,width:"100%",height:"400px"})]})},JO=({organizedTickets:t,selectedDate:e})=>{const[n,r]=e.split("-").map(Number),s=t.filter(({date:a})=>{const[u,d,f]=a.split("/").map(Number);return f===n&&d===r}),i=[["Date","Ventes Totales (€)","Bénéfices Totaux (€)"],...s.length>0?s.map(({date:a,tickets:u})=>{const d=u.reduce((m,g)=>m+parseFloat(g.data.total_amount),0),f=u.reduce((m,g)=>m+g.data.items.reduce((v,T)=>v+(parseFloat(T.item.item_sell_price)-parseFloat(T.item.item_buy_price))*T.quantity,0),0);return[a,d,f]}):[["-",0,0]]],o={title:`Ventes & Bénéfices pour ${n}-${String(r).padStart(2,"0")}`,chartArea:{width:"80%"},hAxis:{title:"Date",textStyle:{fontSize:12}},vAxis:{title:"Montant (€)",minValue:0},legend:{position:"top"},colors:["#4CAF50","#FF9800"]};return c.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 bg-white shadow-lg rounded-lg",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-700 text-center",children:["Ventes & Bénéfices Quotidiens pour ",n,"-",String(r).padStart(2,"0")]}),c.jsx(Bi,{chartType:"ColumnChart",data:i,options:o,width:"100%",height:"400px"})]})},ZO=({organizedTickets:t,wantedYear:e})=>{if(!t||t.length===0)return c.jsx("p",{className:"text-gray-500 text-center",children:"Aucune donnée disponible"});const n=u=>{const[d,f,m]=u.split("/");return{year:m,month:f}},r=t.filter(({date:u})=>n(u).year===e),s={},i=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"];for(let u=1;u<=12;u++){const d=String(u).padStart(2,"0");s[d]={totalSales:0,totalBenefit:0}}r.forEach(({date:u,tickets:d})=>{const{month:f}=n(u);d.forEach(m=>{const g=parseFloat(m.data.total_amount);s[f].totalSales+=g;const v=m.data.items.reduce((T,{item:A,quantity:N})=>T+(Number(A.item_sell_price)-Number(A.item_buy_price))*N,0);s[f].totalBenefit+=v})});const o=[["Mois","Ventes Totales (€)","Bénéfice Total (€)"],...Object.entries(s).map(([u,{totalSales:d,totalBenefit:f}])=>[i[parseInt(u)-1],d,f])],a={title:`Ventes Totales & Bénéfices en ${e}`,chartArea:{width:"75%"},hAxis:{title:"Mois",textStyle:{fontSize:12}},vAxis:{title:"Montant (€)",minValue:0},legend:{position:"top"},colors:["#4CAF50","#2196F3"]};return c.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 bg-white shadow-lg rounded-lg",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-700 text-center",children:["Ventes Mensuelles & Bénéfices en ",e," (€)"]}),c.jsx(Bi,{chartType:"ColumnChart",data:o,options:a,width:"100%",height:"400px"})]})},e3=({organizedTickets:t,selectedDate:e})=>{if(!t||t.length===0)return c.jsx("p",{className:"text-gray-500 text-center",children:"Aucune donnée disponible"});const[n,r]=e.split("-").map(Number),s=t.filter(({date:f})=>{const[m,g,v]=f.split("/").map(Number);return g===r&&v===n}),i={};s.forEach(({tickets:f})=>{f.forEach(m=>{const g=m.data.meta.created_by,v=parseFloat(m.data.total_amount);i[g]||(i[g]=0),i[g]+=v})});const o=[["Utilisateur","Total Vente"],...Object.entries(i)];o.length===1&&o.push(["Aucun utilisateur",1]);const u=(f=>{const m=["#4CAF50","#FF9800","#F44336","#2196F3","#9C27B0","#00BCD4","#8BC34A","#FFEB3B","#FF5722","#795548"];if(f<=m.length)return m.slice(0,f);const g=Array.from({length:f-m.length},(v,T)=>`hsl(${Math.floor(Math.random()*360)}, 70%, 50%)`);return[...m,...g]})(Object.keys(i).length||1),d={title:"Répartition des ventes par utilisateur",pieHole:.4,is3D:!1,chartArea:{width:"80%",height:"80%"},legend:{position:"bottom"},colors:u};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 bg-white shadow-lg rounded-lg",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-700 text-center",children:["Répartition des ventes par utilisateur (",r,"/",n,")"]}),c.jsx(Bi,{chartType:"PieChart",data:o,options:d,width:"100%",height:"400px"})]})};function t3(){const t="2024",[e,n]=C.useState(new Date().toLocaleString("en-GB",{timeZone:"Europe/Brussels",year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")),[r,s]=C.useState([]),[i,o]=C.useState(e.split("-")[0]),[a,u]=C.useState(e.split("-")[1]);async function d(){const m=await aT(),g=n3(m);s(g)}function f(m){o(String(m))}return C.useEffect(()=>{d()},[]),C.useEffect(()=>{},[i,a]),c.jsxs("div",{className:"font-custom_1 py-5",children:[c.jsx("h2",{className:"text-design-h2",children:"Rapport Financier"}),c.jsxs("div",{className:"grid",children:[c.jsx(r3,{minYear:t,onSelectYear:f,title:"Selectionnez l'année"}),c.jsxs("div",{id:"chosen month selector",className:"grid grid-cols-6 gap-3",children:[c.jsx(Bt,{text:"Janv",value:"01",setters:[a,u]}),c.jsx(Bt,{text:"Fèvr",value:"02",setters:[a,u]}),c.jsx(Bt,{text:"Mars",value:"03",setters:[a,u]}),c.jsx(Bt,{text:"Avrl",value:"04",setters:[a,u]}),c.jsx(Bt,{text:"Mai",value:"05",setters:[a,u]}),c.jsx(Bt,{text:"Juin",value:"06",setters:[a,u]}),c.jsx(Bt,{text:"Juil",value:"07",setters:[a,u]}),c.jsx(Bt,{text:"Aôut",value:"08",setters:[a,u]}),c.jsx(Bt,{text:"Sept",value:"09",setters:[a,u]}),c.jsx(Bt,{text:"Oct",value:"10",setters:[a,u]}),c.jsx(Bt,{text:"Nov",value:"11",setters:[a,u]}),c.jsx(Bt,{text:"Dec",value:"12",setters:[a,u]})]})]}),c.jsx("div",{children:c.jsx(XO,{organizedTickets:r,selectedDate:`${i}-${a}-01`})}),c.jsx("div",{children:c.jsx(JO,{organizedTickets:r,selectedDate:`${i}-${a}-01`})}),c.jsx("div",{children:c.jsx(ZO,{organizedTickets:r,wantedYear:i})}),c.jsx("div",{children:c.jsx(e3,{organizedTickets:r,selectedDate:`${i}-${a}-01`})})]})}function n3(t){const e={};return t.forEach(r=>{const s=r.data.meta.timestamp,[i,o,a]=s.split(" ")[0].split("/"),u=`${a}-${o}-${i}`;e[u]||(e[u]=[]),e[u].push(r)}),Object.keys(e).sort((r,s)=>new Date(r)-new Date(s)).map(r=>({date:r.split("-").reverse().join("/"),tickets:e[r]}))}function r3({minYear:t=2024,onSelectYear:e,title:n="Select A Year"}){const r=new Date().getFullYear(),s=Array.from({length:r-t+1},(u,d)=>r-d),[i,o]=C.useState(r),a=u=>{const d=parseInt(u.target.value,10);o(d),e&&e(d)};return c.jsxs("div",{className:"flex gap-5 items-center py-4 font-custom_1",children:[c.jsx("label",{htmlFor:"year-selector",className:"text-lg my-auto text-gray-700 mb-2",children:n}),c.jsx("select",{id:"year-selector",value:i,onChange:a,className:"px-4 py-2 border border-[var(--brand-black)] shadow-sm focus:outline-none focus:ring-2 focus:ring-[var(--brand-black)]",children:s.map(u=>c.jsx("option",{value:u,children:u},u))})]})}function Bt({text:t,value:e,setters:n}){function r(s){s.preventDefault(),n[1](e)}return c.jsx("button",{onClick:r,className:`px-3 py-1 text-base ${n[0]===e?"button-2":"button-1"} `,children:t})}function s3(){const{currentUser:t}=zi(),[e,n]=C.useState("checkout"),[r,s]=C.useState({}),i={stock:c.jsx(W5,{connectedUser:t.email}),checkout:c.jsx(Z5,{connectedUser:t.email}),"ticket-history":c.jsx(eO,{}),statistics:c.jsx(t3,{})};async function o(){const a=await Pa(t.email);s(a)}return C.useEffect(()=>{o()},[]),c.jsxs("div",{className:"grid",children:[c.jsx("h1",{className:"section-title py-5",children:"Inventaire"}),c.jsxs("div",{id:"buttons",className:"",children:[r.admin?c.jsx("button",{onClick:()=>{n("stock")},className:`text-4xl p-5 ${e=="stock"?"bg-[var(--brand-black)]":"bg-[var(--brand-black-50)]"} hover:bg-[var(--brand-black-50)] text-white border-y-transparent border-l-transparent border-r-white border-[0.15rem]`,children:c.jsx(Zb,{})}):c.jsx(c.Fragment,{}),c.jsx("button",{onClick:()=>{n("checkout")},className:`text-4xl p-5 ${e=="checkout"?"bg-[var(--brand-black)]":"bg-[var(--brand-black-50)]"} hover:bg-[var(--brand-black-50)] text-white border-y-transparent border-x-white border-[0.15rem]`,children:c.jsx(Q5,{})}),c.jsx("button",{onClick:()=>{n("ticket-history")},className:`text-4xl p-5  ${e=="ticket-history"?"bg-[var(--brand-black)]":"bg-[var(--brand-black-50)]"} hover:bg-[var(--brand-black-50)] text-white border-y-transparent border-x-white border-[0.15rem]`,children:c.jsx(J5,{})}),r.admin?c.jsx("button",{onClick:()=>{n("statistics")},className:`text-4xl p-5  ${e=="statistics"?"bg-[var(--brand-black)]":"bg-[var(--brand-black-50)]"} hover:bg-[var(--brand-black-50)] text-white border-y-transparent border-x-white border-[0.15rem]`,children:c.jsx(tC,{})}):c.jsx(c.Fragment,{})]}),c.jsx("div",{id:"container",className:"grid pb-5",children:i[e]})]})}class ja{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const i3=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},Qe={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:i3()},Im=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},o3=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=Im(t);Qe.publicKey=n.publicKey,Qe.blockHeadless=n.blockHeadless,Qe.storageProvider=n.storageProvider,Qe.blockList=n.blockList,Qe.limitRate=n.limitRate,Qe.origin=n.origin||e},_T=async(t,e,n={})=>{const r=await fetch(Qe.origin+t,{method:"POST",headers:n,body:e}),s=await r.text(),i=new ja(r.status,s);if(r.ok)return i;throw i},wT=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},a3=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},xT=t=>t.webdriver||!t.languages||t.languages.length===0,ET=()=>new ja(451,"Unavailable For Headless Browser"),l3=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},u3=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},c3=(t,e)=>t instanceof FormData?t.get(e):t[e],TT=(t,e)=>{if(u3(t))return!1;l3(t.list,t.watchVariable);const n=c3(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},IT=()=>new ja(403,"Forbidden"),d3=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},h3=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},ST=async(t,e,n)=>{if(!e.throttle||!n)return!1;d3(e.throttle,e.id);const r=e.id||t;return await h3(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},bT=()=>new ja(429,"Too Many Requests"),f3=async(t,e,n,r)=>{const s=Im(r),i=s.publicKey||Qe.publicKey,o=s.blockHeadless||Qe.blockHeadless,a=s.storageProvider||Qe.storageProvider,u={...Qe.blockList,...s.blockList},d={...Qe.limitRate,...s.limitRate};return o&&xT(navigator)?Promise.reject(ET()):(wT(i,t,e),a3(n),n&&TT(u,n)?Promise.reject(IT()):await ST(location.pathname,d,a)?Promise.reject(bT()):_T("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},p3=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},m3=t=>typeof t=="string"?document.querySelector(t):t,g3=async(t,e,n,r)=>{const s=Im(r),i=s.publicKey||Qe.publicKey,o=s.blockHeadless||Qe.blockHeadless,a=Qe.storageProvider||s.storageProvider,u={...Qe.blockList,...s.blockList},d={...Qe.limitRate,...s.limitRate};if(o&&xT(navigator))return Promise.reject(ET());const f=m3(n);wT(i,t,e),p3(f);const m=new FormData(f);return TT(u,m)?Promise.reject(IT()):await ST(location.pathname,d,a)?Promise.reject(bT()):(m.append("lib_version","4.4.1"),m.append("service_id",t),m.append("template_id",e),m.append("user_id",i),_T("/api/v1.0/email/send-form",m))},Ac={init:o3,send:f3,sendForm:g3,EmailJSResponseStatus:ja};function y3(t){return ue({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M0 2v13h17v-13h-17zM8.494 9.817l-6.896-6.817h13.82l-6.924 6.817zM5.755 8.516l-4.755 4.682v-9.383l4.755 4.701zM6.466 9.219l2.026 2.003 1.996-1.966 4.8 4.744h-13.677l4.855-4.781zM11.201 8.555l4.799-4.725v9.467l-4.799-4.742z"},child:[]}]})(t)}const Tl=({Services:t})=>c.jsxs("div",{className:"font-custom_1 border-[0.15rem] border-[var(--brand-white)] pt-10 pb-5 px-5 grid relative",children:[c.jsx("label",{className:"bg-[var(--brand-white)] text-slate-950 py-3 px-5 absolute -top-10 left-10 text-2xl ",children:t.group}),c.jsx("div",{className:"grid gap-3 items-start",children:t.services.map((e,n)=>c.jsxs("div",{className:"grid",children:[c.jsxs("div",{className:"grid grid-flow-col justify-between border-b-[0.05rem] border-[var(--brand-white)] text-2xl ",children:[c.jsx("label",{className:"",children:e.name}),c.jsxs("label",{className:"text-end mt-auto px-5",children:[e.price," €"]})]}),c.jsx("p",{className:"text-[var(--brand-white-80)] text-base",children:e.description})]},n))})]}),v3=[{group:"Cheveux",services:[{name:"Coupe Classique",price:22,description:"Ciseaux"},{name:"Coupe Moderne",price:25,description:"Fade,Taper,..."},{name:"Coupe Etudiant",price:22,description:"-18 ans"},{name:"Coupe Enfant",price:20,description:"-12 ans"}]},{group:"Barbe",services:[{name:"Taille de barbe",price:20,description:"Avec serviette chaude"}]}],_3=[{group:"Offres",services:[{name:"Cheveux + Barbe",price:35,description:""}]}],w3=[{group:"Sur Place",services:[{name:"Décoloration",price:"à partir de 60",description:""},{name:"Mèches",price:"à partir de 45",description:""},{name:"Coulage",price:25,description:""}]}],x3=[{name:"Coupe Classique",price:22,description:"Ciseaux"},{name:"Coupe Moderne",price:25,description:"Fade,Taper,..."},{name:"Coupe Etudiant",price:22,description:"-18 ans"},{name:"Coupe Enfant",price:20,description:"-12 ans"},{name:"Taille de barbe",price:20,description:"Avec serviette chaude"},{name:"Cheveux + Barbe",price:35,description:""},{name:"PAUSE-DE-MIDI",price:0,description:""}],os={services_by_group:v3,packages:_3,special:w3,all_services_flat:x3},E3=()=>c.jsxs("div",{className:"bg-[var(--brand-black)] text-[var(--brand-white)] px-10",children:[c.jsx("h3",{className:"section-title pt-10",children:"Services"}),c.jsxs("div",{className:" grid lg:grid-cols-2 justify-center py-20 gap-20",children:[c.jsx(Tl,{Services:os.services_by_group[0]}),c.jsxs("div",{className:"grid md:justify-center pt-5 pb-10 gap-20",children:[c.jsx(Tl,{Services:os.services_by_group[1]}),c.jsx(Tl,{Services:os.packages[0]})]})]}),c.jsx("div",{className:"grid md:justify-center pt-5 pb-10 gap-20",children:c.jsx(Tl,{Services:os.special[0]})})]}),CT="/assets/image00001-D2d6M8mK.jpeg",NT="/assets/image00005-BpJX_POH.jpeg",kT="/assets/image00006-DfHw9knq.jpeg",AT="/assets/image00008-DLYrMN48.jpeg",T3=({imageList:t=[],autoPlay:e=5})=>{const[n,r]=C.useState(0);C.useEffect(()=>{if(e>0){const o=setInterval(()=>{r(a=>a===t.length-1?0:a+1)},e*1e3);return()=>clearInterval(o)}},[e,t.length]);const s=()=>{r(o=>o===0?t.length-1:o-1)},i=()=>{r(o=>o===t.length-1?0:o+1)};return c.jsxs("div",{className:"relative w-full max-w-4xl mx-auto",children:[c.jsx("div",{className:"overflow-hidden ",children:c.jsx("div",{className:"flex transition-transform duration-500",style:{transform:`translateX(-${n*100}%)`},children:t.map((o,a)=>c.jsx("img",{src:o,alt:`Slide ${a+1}`,className:"w-full object-cover"},a))})}),c.jsx("button",{onClick:s,className:"absolute top-1/2 left-4 transform -translate-y-1/2 bg-gray-700 text-white p-2 shadow-md hover:bg-gray-800 focus:outline-none",children:"<"}),c.jsx("button",{onClick:i,className:"absolute top-1/2 right-4 transform -translate-y-1/2 bg-gray-700 text-white p-2 shadow-md hover:bg-gray-800 focus:outline-none",children:">"}),c.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:t.map((o,a)=>c.jsx("button",{onClick:()=>r(a),className:`w-3 h-3 rounded-full ${n===a?"bg-gray-700":"bg-gray-400"}`},a))})]})},I3={contact_phone:"0472/24.75.15",contact_email:"m77barbershop@m77barber.com"},mf={mirco:I3};function S3(){return c.jsxs("div",{className:"grid bg-white",children:[c.jsx(b3,{}),c.jsx("div",{className:"container mx-auto",children:c.jsx(C3,{})}),c.jsx(N3,{}),c.jsx("div",{className:"bg-[var(--brand-black)] md:px-32",children:c.jsx(E3,{})}),c.jsxs("div",{className:"container mx-auto",children:[c.jsx(k3,{}),c.jsx(A3,{imageList:[CT,NT,kT,AT]}),c.jsx(R3,{})]})]})}const b3=()=>c.jsxs("div",{className:"grid relative w-screen h-[500px] md:h-[700px] bg-[var(--brand-black)]",children:[c.jsx("div",{id:"image + filter",className:"absolute top-0 z-10 grid w-screen h-full",children:c.jsx("div",{className:"hero-image w-full h-full"})}),c.jsx("div",{id:"text + cta",className:"flex justify-center z-20 items-center bg-black/40",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("h1",{className:" font-custom_1 text-size-hero text-[var(--brand-white)] tracking-wide uppercase text-center  md:mx-auto md:w-[450px] lg:w-[750px]",children:"Nouveau concept, plus qu'un barbier"}),c.jsx("div",{className:"grid py-2 lg:py-5 justify-center items-center",children:c.jsx(Ot,{to:"/rendez-vous",className:"button-2",children:"Réserver Maintenant"})})]})})]}),C3=()=>c.jsxs("div",{className:"grid justify-center font-custom_1 text-center pt-5 pb-10",children:[c.jsx("h4",{className:"text-design-h4",children:"Expérience premium"}),c.jsx("h2",{className:"text-design-h2",children:"Dévouement au style"}),c.jsx("p",{className:"text-design-p",children:"Nous croyons que chaque coupe est une œuvre d’art et chaque client mérite une attention personnalisée. Forts d’une expertise raffinée et d’un œil pour le détail, nous combinons techniques traditionnelles et tendances modernes pour sublimer votre style. Notre salon, conçu pour offrir confort et élégance, est plus qu’un lieu de soin : c’est une expérience où qualité et passion se rencontrent. Faites l’expérience d’un service premium et laissez-nous redéfinir votre routine de grooming avec dévouement et style."})]}),N3=()=>c.jsx("div",{className:"relative grid belt-image",children:c.jsxs("div",{className:"font-custom_1 text-center text-[var(--brand-white)] grid justify-center items-center pt-5 pb-10 backdrop-blur-[2px] backdrop-grayscale bg-black/40",children:[c.jsx("h4",{className:"text-design-h4 text-white",children:"Pourquoi Nous?"}),c.jsx("h2",{className:"text-design-h2 text-white",children:"Car vous méritez le meilleur"})]})}),k3=()=>c.jsxs("div",{className:"font-custom_1 grid gap-5 justify-center items-center pt-20 pb-20",children:[c.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[c.jsxs("label",{className:"text-center text-size-large",children:[c.jsx("span",{className:"font-bold",children:"+ 300"})," Clients fidèles"]}),c.jsxs("label",{className:"text-center text-size-large",children:["Satisfaction à ",c.jsx("span",{className:"font-bold",children:"100%"})]})]}),c.jsx("div",{className:"grid md:mx-32 mt-5 md:mt-10",children:c.jsx(Ot,{to:"/a-propos",className:"button-1 text-center",children:"Savoir plus"})})]}),A3=({imageList:t})=>c.jsxs("div",{className:"grid px-10 pb-20 bg-[var(--brand-black)] text-[var(--brand-white)]",children:[c.jsx("h3",{className:"section-title",children:"Galerie"}),c.jsx("div",{className:"mx-auto grid lg:w-[500px]",children:c.jsx(T3,{imageList:[CT,NT,kT,AT],autoPlay:10})})]}),R3=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(""),[o,a]=C.useState(""),[u,d]=C.useState(""),f=C.useRef();function m(v){v.preventDefault(),Ac.sendForm("service_23w8au3","template_hivji9c",v.target,"cC8so3gIzcPNDnuYk").then(T=>{d("Votre email a bien été envoyé !")},T=>{console.error("Email sending failed:",T),d("Erreur lors de l'envois de votre email")})}const g=({Icon:v,Text_1:T,Text_2:A})=>c.jsxs("div",{className:"flex justify-start border-[0.15rem] border-[var(--brand-black)] bg-[var(--brand-black)] ",children:[c.jsx("div",{className:"text-3xl xl:text-5xl p-5 mr-auto text-[var(--brand-white)] bg-[var(--brand-black)] ",children:v}),c.jsxs("div",{className:"w-full grid",children:[c.jsx("label",{className:"pl-1 text-xl xl:text-3xl text-start my-auto bg-[var(--brand-white)]",children:T}),c.jsx("label",{className:"pl-1 text-base xl:text-xl tracking-wider text-[var(--brand-white)]",children:A})]})]});return c.jsxs("div",{className:"font-custom_1 grid pb-20",children:[c.jsx("h3",{className:"section-title",children:"Contactez-nous"}),c.jsxs("p",{className:"pb-5 px-3 md:px-5 text-size-normal xl:w-[1000px]",children:["Nous sommes là pour répondre à toutes vos questions dans le but de vous offrir la meilleure expérience. Vous pouvez remplir le formulaire, nous appeler ou nous envoyer un e-mail.",c.jsx("br",{}),c.jsx("br",{}),"À très bientôt,",c.jsx("br",{}),"M77"]}),c.jsxs("div",{className:"flex flex-col items-center gap-5 lg:flex-row lg:items-start",children:[c.jsxs("div",{className:"grid gap-5",children:[c.jsx(g,{Icon:c.jsx(nC,{}),Text_1:"Contactez-nous par téléphone",Text_2:mf.mirco.contact_phone}),c.jsx(g,{Icon:c.jsx(y3,{}),Text_1:"Envoyez-nous un email",Text_2:mf.mirco.contact_email})]}),c.jsxs("form",{ref:f,onSubmit:m,className:"grid gap-3 w-[350px] md:w-[450x] lg:w-[550px] xl:text-xl",children:[c.jsx("input",{id:"user_name",name:"user_name",onChange:v=>{e(v.target.value)},type:"text",placeholder:"Nom et Prénom",className:"input-designed-1 "}),c.jsx("input",{id:"user_email",name:"user_email",onChange:v=>{r(v.target.value)},type:"email",placeholder:"example@email.com",className:"input-designed-1 "}),c.jsx("input",{id:"user_phone",name:"user_phone",onChange:v=>{i(v.target.value)},type:"tel",placeholder:"Numéro Téléphone",className:"input-designed-1"}),c.jsx("textarea",{id:"user_message",name:"user_message",onChange:v=>{a(v.target.value)},type:"text",placeholder:"Votre message ici...",className:"input-designed-1 lg:h-[100px]"}),c.jsx("div",{className:"grid",children:c.jsx("button",{type:"submit",className:"button-1",children:"Envoyer"})})]}),c.jsx("label",{className:"font-custom_1 text-lg text-center",children:u})]})]})};function P3(){const[t,e]=C.useState([]),[n,r]=C.useState(null),[s,i]=C.useState(null),[o,a]=C.useState(!1);C.useEffect(()=>{async function d(){await wO().then(f=>{e(f)})}d()},[]);function u(d){d.preventDefault(),r(null),i(null),a(!1),Sm()}return c.jsxs("div",{className:"grid",children:[c.jsx("div",{className:`${o?"hidden":"block"}`,children:n===null?c.jsx(j3,{existingProfiles:t,profileSetter:r}):c.jsx(D3,{barberProfile:n,backButtonFunction:u,appointViewSetter:[s,i],showViewSetter:[o,a]})}),c.jsx("div",{className:`${o?"block":"hidden"}`,children:s})]})}const RT=({profile:t,setter:e,clickable:n=!1})=>{function r(s){s.preventDefault(),n&&(e(t),Sm())}return c.jsx("button",{type:"button",onClick:r,children:c.jsxs("div",{className:"relative container m-auto w-[250px] h-[450px] overflow-hidden",children:[c.jsx("div",{className:`absolute overflow-hidden bottom-0 ${n?"backdrop-grayscale bg-black/35 hover:bg-transparent hover:backdrop-grayscale-0 transition-all duration-500":""} z-20 w-[250px] h-[550px] flex`,children:c.jsxs("div",{className:`text-white text-start flex flex-col w-full h-full px-5 pt-[425px] transform ${n?"translate-y-0 hover:translate-y-[100px]":"translate-y-[100px]"}  transition-transform duration-500 ease-in-out`,children:[c.jsx("label",{className:"font-custom_1 font-bold text-xl pb-2",children:t.last_name+" "+t.first_name}),c.jsx("p",{className:"font-custom_1 text-sm italic",children:t.profile_description})]})}),c.jsx("img",{src:t.image_url,className:"w-[250px] h-[450px] absolute top-0 z-0",alt:"Profile"})]})})},j3=({existingProfiles:t,profileSetter:e})=>c.jsxs("div",{className:"grid",children:[c.jsx("h2",{className:"font-custom_1 text-3xl py-3",children:" Choisisez le barber"}),c.jsx("div",{id:"chose_user",className:"grid md:grid-cols-2 lg:grid-flow-col gap-10",children:t.map((n,r)=>c.jsx(RT,{profile:n,setter:e,clickable:!0},r))})]}),D3=({barberProfile:t,backButtonFunction:e,appointViewSetter:n,showViewSetter:r})=>{const[s,i]=C.useState(new Date().toLocaleString("en-GB",{timeZone:"Europe/Brussels",year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")),[o,a]=C.useState(""),[u,d]=C.useState(""),[f,m]=C.useState(""),[g,v]=C.useState(""),[T,A]=C.useState(""),[N,_]=C.useState(""),[w,I]=C.useState([]),[j,O]=C.useState(""),[L,E]=C.useState(!1),y=C.useRef();async function S(b){b.preventDefault(),E(!0);const he={barber_id:t.profile_id,appointment_id:Is(),appointment_hour:j,appointment_date:T,appointment_service:N,appointment_user:{email:f,name:`${u} ${o}`,phone:g},confirmed:oe.neutral_state,registered_time:new Date().toLocaleString()};t!==null&&o&&u&&f&&g&&T&&N&&j&&await lO(he).then(fe=>{let tt=null;fe?(tt=c.jsxs("span",{children:["Votre rendez-vous a été sauvegardé !",c.jsx("br",{})," Un email de confirmation a été envoyé.",c.jsx("br",{}),"Pour tout changement, contactez : ",mf.mirco.contact_phone," "]}),Ac.sendForm("service_23w8au3","template_9xg2a7c",y.current,"cC8so3gIzcPNDnuYk").then(Ve=>{console.log(`Email envoyé : ${Ve.text} !`)},Ve=>{console.error("Email sending failed:",Ve.text),tt=c.jsxs("span",{children:["Erreur lors de l'envoie de l'email de confirmation !",c.jsx("br",{})," Veuillez nous contacter pour confirmer la prise de votre rendez-vous."]})})):tt=c.jsxs("span",{children:["Erreur lors de la sauvegarde de votre rendez-vous !",c.jsx("br",{})," Veuillez réessayer."]}),n[1](c.jsx(V3,{success:fe,message:tt})),r[1](!0),Sm()})}async function k(b){b.preventDefault(),O(""),A(b.target.value),I(await cO(b.target.value,t))}function R(b,he){b.preventDefault(),_(he)}function P(b){b.preventDefault(),e(b),a(""),d(""),m(""),v(""),A(""),_(""),I([]),O("")}return c.jsxs("div",{className:"grid",children:[c.jsxs("form",{onSubmit:S,className:"flex flex-col justify-center md:flex-row gap-5",children:[c.jsx("div",{className:"flex flex-col justify-center items-center",children:c.jsx("div",{className:"mb-auto",children:c.jsx(RT,{profile:t,setter:null,clickable:!1})})}),c.jsxs("div",{className:"flex flex-col xs:px-5",children:[c.jsx("div",{children:c.jsx("h4",{className:"font-custom_1 text-3xl font-bold pb-5",children:"Completez le formulaire"})}),c.jsxs("div",{className:"grid gap-2",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("input",{onChange:b=>{a(b.target.value)},required:!0,type:"text",placeholder:"Prénom",className:"input-designed-1"}),c.jsx("input",{onChange:b=>{d(b.target.value)},required:!0,type:"text",placeholder:"Nom de famille",className:"input-designed-1"})]}),c.jsx("input",{onChange:b=>{m(b.target.value)},required:!0,type:"email",placeholder:"Email",className:"input-designed-1"}),c.jsx("input",{onChange:b=>{v(b.target.value)},required:!0,type:"tel",placeholder:"GSM",className:"input-designed-1"}),c.jsxs("div",{className:"flex flex-col gap-5",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("label",{className:"text-xl my-auto",children:"Séléctionez la date : "}),c.jsx("input",{type:"date",min:s,onChange:k,className:"input-designed-1 w-[200px]"})]}),c.jsx("div",{id:"list of taken (or not) hours of that day",children:c.jsx(L3,{hours:w,chosenHourSetter:[j,O]})})]}),c.jsxs("div",{id:"services",className:"grid font-custom_1 gap-5",children:[os.services_by_group.map((b,he)=>c.jsxs("div",{children:[c.jsx("label",{className:"text-3xl",children:b.group}),c.jsx("div",{className:"grid pt-5 gap-2",children:b.services.map((fe,tt)=>c.jsxs("div",{id:fe.name,onClick:Ve=>{R(Ve,fe.name)},className:`grid p-1 border-[0.15rem] border-[var(--brand-black)] ${N===fe.name?"bg-[var(--brand-black)] text-white":""}`,children:[c.jsxs("div",{className:"grid grid-cols-2",children:[c.jsx("label",{className:"text-xl",children:fe.name}),c.jsxs("label",{className:"text-xl",children:[fe.price,"€"]})]}),c.jsx("label",{children:fe.description})]},tt))})]},he)),os.packages.map((b,he)=>c.jsxs("div",{children:[c.jsx("label",{className:"text-3xl",children:b.group}),c.jsx("div",{className:"grid pt-5 gap-2",children:b.services.map((fe,tt)=>c.jsxs("button",{type:"button",id:fe.name,onClick:Ve=>{R(Ve,fe.name)},className:`grid p-1 border-[0.15rem] border-[var(--brand-black)] ${N===fe.name?"bg-[var(--brand-black)] text-white":""}`,children:[c.jsxs("div",{className:"grid grid-cols-2",children:[c.jsx("label",{className:"text-xl",children:fe.name}),c.jsxs("label",{className:"text-xl",children:[fe.price,"€"]})]}),c.jsx("label",{children:fe.description})]},tt))})]},he))]})]}),c.jsxs("ul",{className:"py-3 px-5 list-disc grid gap-3",children:[c.jsxs("li",{className:"text-start",children:[c.jsx("span",{className:"font-bold",children:"A partir de 18h30"})," il y aura un ",c.jsx("span",{className:"font-bold",children:"supplément de 10€"})]}),c.jsxs("li",{className:"text-start",children:["Au dela de ",c.jsx("span",{className:"font-bold",children:"10 minutes de retard"}),", le rendez-vous sera ",c.jsx("span",{className:"font-bold",children:"annulé"})," !"]})]}),c.jsxs("div",{className:"grid grid-flow-col gap-5 py-5",children:[c.jsx("button",{type:"button",className:"button-1",onClick:P,children:"Retour"}),c.jsx("button",{type:"submit",disabled:L,className:"button-2 disabled:bg-gray-300",children:"Réserver"})]})]})]}),c.jsxs("form",{ref:y,className:"hidden",children:[c.jsx("input",{name:"user_email",value:f}),c.jsx("input",{name:"user_name",value:`${u} ${o}`}),c.jsx("input",{name:"appointment_date",value:T}),c.jsx("input",{name:"appointment_time",value:j}),c.jsx("input",{name:"selected_service",value:N})]})]})},O3=({setter:t,hour:e,taken:n,selected:r})=>c.jsx("button",{type:"button",onClick:()=>{t[1](e)},disabled:n,className:`${n?"bg-red-500":"bg-green-500 hover:border-[var(--brand-black)]"} text-white px-5 py-2 rounded-lg border-[0.15rem] ${r?" border-[var(--brand-black)]":" border-transparent"} `,children:e}),L3=({hours:t,chosenHourSetter:e})=>t.length>=1?c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("div",{className:"flex pb-3 gap-5",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"w-[25px] h-[25px] bg-green-500 rounded-full"}),c.jsx("label",{children:"disponible"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"w-[25px] h-[25px] bg-red-500 rounded-full"}),c.jsx("label",{children:"indisponible"})]})]}),c.jsx("div",{className:"grid grid-cols-3 lg:grid-cols-7 gap-2",children:t.map((n,r)=>c.jsx(O3,{setter:e,hour:n[0],taken:n[1],selected:e[0]===n[0]},r))})]}):c.jsx(c.Fragment,{}),V3=({success:t,message:e})=>c.jsxs("div",{className:"bg-[var(--brand-white)] grid py-5",children:[c.jsx("label",{className:`${t?"text-green-500":"text-red-500"} text-start font-bold font-custom_1 text-2xl`,children:e}),c.jsxs("div",{className:"py-5 flex justify-center items-center gap-5",children:[c.jsx(Ot,{to:"/rendez-vous",onClick:n=>{n.preventDefault(),window.location.reload()},className:"button-1",children:"Retour"}),c.jsx(Ot,{to:"/",className:"button-2",children:"Accueil"})]})]}),Sm=()=>{window.scrollTo({top:0,behavior:"smooth"})};function M3(){return c.jsx("div",{className:"bg-[var(--brand-black)] flex min-h-screen",children:c.jsxs("div",{className:"bg-[var(--brand-white)] m-auto flex flex-col justify-center md:px-10 py-10",children:[c.jsx("h2",{className:"font-custom_1 text-5xl pb-5",children:"Rendez-Vous"}),c.jsx(P3,{})]})})}function F3(t){return ue({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 2a3.5 3.5 0 101.665 6.58L8.585 10l-1.42 1.42a3.5 3.5 0 101.414 1.414l8.128-8.127a1 1 0 00-1.414-1.414L10 8.586l-1.42-1.42A3.5 3.5 0 005.5 2zM4 5.5a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm0 9a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z",clipRule:"evenodd"},child:[]},{tag:"path",attr:{d:"M12.828 11.414a1 1 0 00-1.414 1.414l3.879 3.88a1 1 0 001.414-1.415l-3.879-3.879z"},child:[]}]})(t)}function U3(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 5h4v-2a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v2z"},child:[]},{tag:"path",attr:{d:"M14 3.5c0 1.626 .507 3.212 1.45 4.537l.05 .07a8.093 8.093 0 0 1 1.5 4.694v6.199a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2v-6.2c0 -1.682 .524 -3.322 1.5 -4.693l.05 -.07a7.823 7.823 0 0 0 1.45 -4.537"},child:[]},{tag:"path",attr:{d:"M7 14.803a2.4 2.4 0 0 0 1 -.803a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 1 -.805"},child:[]}]})(t)}function z3(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 6l16 0"},child:[]},{tag:"path",attr:{d:"M4 12l16 0"},child:[]},{tag:"path",attr:{d:"M4 18l16 0"},child:[]}]})(t)}function B3(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 6h16"},child:[]},{tag:"path",attr:{d:"M7 12h13"},child:[]},{tag:"path",attr:{d:"M10 18h10"},child:[]}]})(t)}function $3(t){return ue({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"},child:[]},{tag:"path",attr:{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66"},child:[]},{tag:"path",attr:{d:"m18 15-2-2"},child:[]},{tag:"path",attr:{d:"m15 18-2-2"},child:[]}]})(t)}function q3(t){return ue({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M515.664-.368C305.76-.368 128 178.4 128 390.176c0 221.76 206.032 448.544 344.624 607.936.528.64 22.929 25.52 50.528 25.52h2.449c27.6 0 49.84-24.88 50.399-25.52 130.064-149.52 320-396.048 320-607.936C896 178.4 757.344-.368 515.664-.368zm12.832 955.552c-1.12 1.12-2.753 2.369-4.193 3.409-1.472-1.008-3.072-2.288-4.255-3.408l-16.737-19.248C371.92 785.2 192 578.785 192 390.176c0-177.008 148.224-326.56 323.664-326.56 218.528 0 316.336 164 316.336 326.56 0 143.184-102.128 333.296-303.504 565.008zm-15.377-761.776c-106.032 0-192 85.968-192 192s85.968 192 192 192 192-85.968 192-192-85.968-192-192-192zm0 320c-70.576 0-129.473-58.816-129.473-129.408 0-70.576 57.424-128 128-128 70.624 0 128 57.424 128 128 .032 70.592-55.903 129.408-126.527 129.408z"},child:[]}]})(t)}const H3="/assets/DSC00280-18-DYbdjuYD.jpg",W3=()=>(C.useEffect(()=>{K3()},[]),c.jsxs("div",{className:"bg-gray-50 text-gray-800 py-12 font-custom_1",children:[c.jsxs("head",{children:[c.jsx("title",{children:"À propos de M77 Barber - Salon de coiffure et barbier premium à Charleroi"}),c.jsx("meta",{name:"description",content:"Découvrez M77 Barber, un salon de coiffure et barbier premium à Charleroi. Expertise, style, et service exceptionnel pour hommes modernes."}),c.jsx("meta",{name:"keywords",content:"barbier Charleroi, salon de coiffure hommes, barbier premium, coiffure tendance, coupe homme, grooming, barbier traditionnel, soins pour barbe"}),c.jsx("meta",{name:"author",content:"M77 Barber"})]}),c.jsxs("div",{className:"container mx-auto text-center mb-8",children:[c.jsx("h1",{className:"text-size-large font-bold",children:"À propos de M77 Barber"}),c.jsx("p",{className:"text-design-h4 pt-3",children:"Découvrez l’art du grooming masculin"})]}),c.jsxs("div",{className:"container mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 items-center px-6 md:px-12",children:[c.jsx("div",{className:"w-full",children:c.jsx("img",{src:H3,alt:"image",className:"rounded-lg shadow-lg"})}),c.jsxs("div",{className:"",children:[c.jsx("h2",{className:"section-title tracking-normal",children:"Une expertise dédiée à votre style"}),c.jsxs("p",{className:"mb-4  text-design-p px-0 leading-relaxed",children:["Chez ",c.jsx("strong",{className:"text-[var(--brand-black)]",children:"M77 Barber"}),", nous nous engageons à offrir une expérience unique et haut de gamme à chaque client. Que vous soyez à la recherche d’une coupe moderne, d’un soin traditionnel de la barbe, ou d’un moment de détente, notre équipe d’experts est là pour répondre à vos attentes. Nous combinons techniques traditionnelles et tendances modernes pour créer un style qui vous correspond parfaitement."]}),c.jsx("p",{className:"mb-4  text-design-p px-0 leading-relaxed",children:"Fort de plusieurs années d’expérience, notre salon est conçu pour offrir un équilibre parfait entre confort et élégance. Nous utilisons des produits de haute qualité pour garantir des résultats impeccables, tout en prenant soin de votre peau et de vos cheveux."}),c.jsx("p",{className:"mb-4  text-design-p px-0 leading-relaxed",children:"Nos barbiers ne se contentent pas de suivre les tendances — ils les créent. En restant constamment à jour sur les dernières techniques et en collaborant avec des marques renommées, nous nous assurons que chaque visite chez M77 Barber dépasse vos attentes. Notre mission est de vous faire sentir et paraître à votre meilleur, tout en vous offrant un service exceptionnel."}),c.jsx("p",{className:"mb-4  text-design-p px-0 leading-relaxed",children:"Dans un monde où l’apparence compte de plus en plus, nous croyons qu’une coupe de cheveux ou une barbe parfaitement entretenue est bien plus qu’un simple soin. C’est une déclaration de confiance, un reflet de votre personnalité et un outil pour atteindre vos objectifs, qu’ils soient personnels ou professionnels."}),c.jsxs("p",{className:" text-design-p px-0 leading-relaxed",children:["En tant que lieu emblématique de grooming à Charleroi, ",c.jsx("strong",{children:"M77 Barber"})," s’efforce de cultiver une ambiance conviviale où chacun se sent valorisé et respecté. Vous méritez un barbier qui comprend vos besoins, s’adapte à votre style de vie, et vous aide à toujours mettre en avant votre meilleur visage."]})]})]}),c.jsx("div",{className:"bg-[var(--brand-black)] py-12 mt-12",children:c.jsxs("div",{className:"container mx-auto text-center",children:[c.jsx("h3",{className:"text-design-h2 text-[var(--brand-white)]",children:"Pourquoi choisir M77 Barber ?"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5 px-5 py-5",children:[c.jsx(Il,{icon:c.jsx(F3,{}),text:"Des coupes adaptées à chaque style, de la tradition au moderne."}),c.jsx(Il,{icon:c.jsx(U3,{}),text:"Utilisation de produits professionnels respectueux de votre peau."}),c.jsx(Il,{icon:c.jsx($3,{}),text:"Une ambiance chaleureuse et accueillante dans un salon au design élégant."}),c.jsx(Il,{icon:c.jsx(q3,{}),text:"Situé à la limite de Couillet et Marcinelle, facilement accessible et convivial."})]})]})}),c.jsx("div",{className:"bg-[var(--brand-white)] text-[var(--brand-black)] py-12 mt-12",children:c.jsxs("div",{className:"container mx-auto text-center",children:[c.jsx("h4",{className:"text-design-h2",children:"Prêt à découvrir l’expérience M77 Barber ?"}),c.jsx("p",{className:"mb-6 text-size-normal",children:"Prenez rendez-vous dès aujourd’hui et laissez notre équipe vous offrir le meilleur du grooming masculin."}),c.jsx(Ot,{to:"/rendez-vous",className:"button-1",children:"Prendre un rendez-vous"})]})})]})),Il=({icon:t,text:e})=>c.jsxs("div",{className:"grid grid-rows-3 pt-5 pb-10 bg-[var(--brand-white)] text-[var(--brand-black)]",children:[c.jsx("div",{className:"row-span-1 text-5xl mx-auto",children:t}),c.jsx("p",{className:"row-span-2 pt-0 lg:pt-5 px-5 text-center mb-auto text-size-normal",children:e})]}),K3=()=>{window.scrollTo({top:0,behavior:"smooth"})},G3=({fetcher:t})=>{const[e,n]=C.useState(null),[r,s]=C.useState(""),[i,o]=C.useState(""),[a,u]=C.useState(""),[d,f]=C.useState(""),[m,g]=C.useState(!1),[v,T]=C.useState("CDI"),[A,N]=C.useState(Is()),[_,w]=C.useState(null),[I,j]=C.useState(new Date().toLocaleString("en-GB",{timeZone:"Europe/Brussels",year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-"));function O(E){const y=E.target.checked;g(y),y&&T("CDI")}async function L(E){E.preventDefault();const y={profile_id:i+r,first_name:r,last_name:i,email:a,starting_contract:d,ending_contract:v,is_cdi:m,visible:!1,image:A,image_url:"",profile_description:"NaN",locked_days:[]};_!==null?await mO(y,_).then(S=>{S&&(n({message:"Nouveau barbier introduit avec success !",isError:!1}),t(),s(""),o(""),u(""),f(""),g(!1),T("CDI"),N(Is()),w(null),E.target.reset())}):n({message:"Choisisez une image !",isError:!0})}return c.jsxs("form",{className:"font-custom_1 flex flex-col gap-1 max-w-[400px] bg-white p-5 border-[var(--brand-black)] border-[0.15rem]",onSubmit:L,children:[c.jsx("label",{className:"text-2xl font-bold text-white bg-[var(--brand-black)] px-2 py-2 mb-2",children:"Nouveau Barber"}),c.jsxs("div",{className:"grid grid-cols-2",children:[c.jsx("input",{onChange:E=>{o(E.target.value)},required:!0,type:"text",placeholder:"Nom de famille",className:"px-1 py-2 border-[var(--brand-black)] border-[0.15rem]"}),c.jsx("input",{onChange:E=>{s(E.target.value)},required:!0,type:"text",placeholder:"Prénom",className:"px-1 py-2 border-[var(--brand-black)] border-[0.15rem]"})]}),c.jsx("input",{onChange:E=>{u(E.target.value)},required:!0,type:"email",placeholder:"Email",className:"px-1 py-2 border-[var(--brand-black)] border-[0.15rem]"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"pb-1",children:"Date du début de contrat"}),c.jsx("input",{onChange:E=>{f(E.target.value)},required:!0,type:"date",min:I,placeholder:"starting contract",className:"px-1 py-2 border-[var(--brand-black)] border-[0.15rem]"})]}),c.jsxs("div",{className:"flex gap-5",children:[c.jsx("label",{className:"text-lg",children:"CDI"}),c.jsx("input",{onClick:O,type:"checkbox",className:"w-4"})]}),c.jsxs("div",{className:`flex-col ${m?"hidden":"flex"}`,children:[c.jsx("label",{className:"pb-1",children:"Date de fin de contrat"}),c.jsx("input",{onChange:E=>{T(E.target.value)},type:"date",min:I,placeholder:"ending contract",disabled:m,required:m,className:"px-1 py-2 border-[var(--brand-black)] border-[0.15rem]"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("label",{className:"pb-1",children:["Téléchargez une photo ",c.jsx("span",{className:"text-xs",children:"(250x450px)"})]}),c.jsx("input",{type:"file",onChange:E=>{w(E.target.files[0])}})]}),c.jsx("div",{className:"",children:e!==null?c.jsx("p",{className:`${e.isError?"text-red-500":"text-green-500"}`,children:e.message}):c.jsx(c.Fragment,{})}),c.jsx("button",{type:"submit",className:"bg-[var(--brand-black)] text-white font-semibold py-2 px-10 mr-auto mt-2",children:"Rajouter"})]})};function Q3(){const[t,e]=C.useState(c.jsx(c.Fragment,{})),[n,r]=C.useState(!0),[s,i]=C.useState([]);async function o(){await Ui().then(a=>{i(a)})}return C.useEffect(()=>{o()},[]),c.jsxs("div",{className:"grid relative",children:[c.jsx("div",{className:`${n?"grid":"hidden"}`,children:t}),c.jsx("div",{className:"grid",children:c.jsx(Y3,{profiles:s,fetcher:o,popupSetters:[t,e],popupShowSetters:[r]})}),c.jsx("div",{className:"py-10 grid justify-start ",children:c.jsx(G3,{fetcher:o})})]})}const Y3=({profiles:t,fetcher:e,popupSetters:n,popupShowSetters:r})=>{const s=({data:u,fetcher:d})=>{const[f,m]=C.useState(new Date().toLocaleString("en-GB",{timeZone:"Europe/Brussels",year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-"));async function g(v){v.preventDefault(),u.visible=!u.visible,await kc(u).then(()=>{d()})}return c.jsx("div",{className:" grid",children:c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("label",{className:"font-bold text-2xl",children:[u.last_name," ",u.first_name]}),c.jsxs("label",{className:"text-md overflow-x-auto",children:["Email : ",u.email]}),c.jsxs("label",{children:["Id : ",u.profile_id]}),c.jsxs("label",{children:["Visible? : ",c.jsx("span",{className:`${u.visible?"text-green-500":"text-red-500"} font-bold`,children:u.visible?"Oui":"Non"})]}),c.jsxs("label",{children:["Début Contract : ",u.starting_contract]}),c.jsxs("label",{className:`${f>=u.ending_contract&&!["/","cdi"].includes(u.ending_contract)?"underline font-medium text-red-500":" "}`,children:["Fin Contract : ",u.ending_contract]}),c.jsx("div",{className:"flex pt-5",children:c.jsx("button",{type:"button",onClick:g,className:"button-1",children:" Changer Visibilité "})})]}),c.jsx("div",{className:"grid justify-center",children:c.jsx("img",{src:u.image_url,className:"w-[250px] h-[450px]"})})]})})};async function i(u,d){u.preventDefault();try{await _O(d).then(f=>{e()})}catch(f){console.log(f)}}const o=({profileID:u,removeFunction:d})=>{X3();function f(g){g.preventDefault(),d(g,u),n[1](c.jsx(c.Fragment,{})),r[0](!1)}function m(g){g.preventDefault(),n[1](c.jsx(c.Fragment,{})),r[0](!1)}return c.jsx("div",{className:"absolute top-0 grid bg-[var(--brand-black-75)] text-[var(--brand-white)] w-screen h-full",children:c.jsxs("div",{className:"flex flex-col mx-auto pt-32 px-5",children:[c.jsxs("label",{className:"text-bold text-2xl text-center",children:["Etez vous certain de supprimer '",u,"' ? "]}),c.jsxs("div",{className:"flex justify-center gap-5 pt-5",children:[c.jsx("button",{type:"button",onClick:f,className:"button-2",children:"Oui"}),c.jsx("button",{type:"button",onClick:m,className:"button-1",children:"Non"})]})]})})};function a(u,d){u.preventDefault(),n[1](c.jsx(o,{profileID:d,removeFunction:i})),r[0](!0)}return t?c.jsxs("div",{id:"profiles",className:"flex flex-col font-custom_1 py-5",children:[c.jsx("h2",{className:"text-design-h2",children:"Utilisateurs"}),c.jsx("div",{className:"flex flex-col min-h-[200px] max-h-[750px] lg:max-h-[750px] overflow-y-scroll",children:t.length>0&&t.map((u,d)=>c.jsxs("div",{className:"grid border-y-[0.15rem] border-[var(--brand-black)] py-5",children:[c.jsx(s,{Key:d,data:u,fetcher:e},d),c.jsx("div",{className:"flex justify-start pt-3",children:c.jsx("button",{type:"button",onClick:f=>{a(f,u.profile_id)},className:"button-1 bg-red-500 border-red-500 hover:border-red-500 hover:text-red-500",children:"Supprimer"})})]},d))})]}):c.jsx("label",{className:"font-custom_1 text-xl",children:"Chargement..."})},X3=()=>{window.scrollTo({top:0,behavior:"smooth"})},PT="/assets/logo-BiyzGE2d.jpg";function jT(){const[t,e]=C.useState(!1);function n(r){r.preventDefault(),e(!t)}return c.jsxs("header",{className:"fixed z-[100] w-screen flex flex-col md:flex-row justify-between bg-[var(--brand-black)] py-3 md:px-5 xl:px-10",children:[c.jsx(Ot,{to:"/",className:"grid justify-center items-center pb-2 md:pb-0",children:c.jsx("img",{id:"img",src:PT,className:"w-[120px] h-[90px] bg-slate-600"})}),c.jsxs("div",{className:"relative flex flex-col md:flex-row",children:[c.jsx("button",{onClick:n,className:"md:hidden grid justify-center items-center",children:t?c.jsx(B3,{className:"text-4xl text-[var(--brand-white)]"}):c.jsx(z3,{className:"text-4xl text-[var(--brand-white)]"})}),c.jsxs("div",{className:`absolute w-screen ${t?" top-10 translate-y-0 duration-700 transition-transform":"-top-32 -translate-y-full transition-transform duration-500"} md:top-0 md:translate-y-0 md:duration-0 md:relative md:w-auto grid text-center md:flex items-center gap-2 bg-[var(--brand-black)]`,children:[c.jsx(Wd,{Text:"Accueil",Path:"/"}),c.jsx(Wd,{Text:"A propos",Path:"/a-propos"}),c.jsx(Wd,{Text:"Rendez-vous",Path:"/rendez-vous"})]})]})]})}const Wd=({Text:t,Path:e})=>c.jsx("a",{href:e,className:`font-custom_1 text-[var(--brand-white)] bg-[var(--brand-black)] text-xl p-3 border-[0.15rem] border-[var(--brand-black)] \r
                              hover:bg-[var(--brand-white)] hover:text-[var(--brand-black)] transition-all duration-300`,children:t});function J3(t){return ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"},child:[]}]})(t)}function Z3(t){return ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function eL(t){return ue({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 65.1c-37.8 5.4-69.4 29.6-85.2 62.9L360 224l0 64 56 0 0 8.6c-19.1 11.1-32 31.7-32 55.4l-24 0 0 64 24 0 0 64L64 480c-35.3 0-64-28.7-64-64L0 96zM64 224l0 64 88 0 0-64-88 0zm232 0l-88 0 0 64 88 0 0-64zM152 352l-88 0 0 64 88 0 0-64zm56 0l0 64 88 0 0-64-88 0zM528 240c-17.7 0-32 14.3-32 32l0 48 64 0 0-48c0-17.7-14.3-32-32-32zm-80 32c0-44.2 35.8-80 80-80s80 35.8 80 80l0 48c17.7 0 32 14.3 32 32l0 128c0 17.7-14.3 32-32 32l-160 0c-17.7 0-32-14.3-32-32l0-128c0-17.7 14.3-32 32-32l0-48z"},child:[]}]})(t)}function bm(){return c.jsxs("footer",{className:"bg-[var(--brand-black)] text-[var(--brand-white)] grid pt-20",children:[c.jsx(tL,{}),c.jsxs("div",{className:"grid md:grid-cols-3",children:[c.jsxs("div",{className:"grid px-5 mb-auto",children:[c.jsx("h3",{className:"font-bold py-1",children:"Adresse"}),c.jsx("a",{target:"_blank",className:"text-blue-500 underline px-5",href:"https://maps.app.goo.gl/G5rHu41etaLL17XU9",children:"Avenue Eugène Mascaux 657 , 6001 Marcinelle"})]}),c.jsx(nL,{}),c.jsx(rL,{})]}),c.jsx("div",{className:"py-5 text-center",children:c.jsx(Ot,{to:"/termes-et-conditions",className:"text-blue-500 underline",children:"Termes et Conditions"})}),c.jsxs("div",{className:"py-5 text-center",children:["Website Created by ",c.jsx("a",{href:"https://www.prowebsolutions.online/#/fr/home",target:"_blank",className:"text-blue-500 underline",children:"Pro Web Solutions"})]})]})}const tL=()=>c.jsxs("div",{className:"grid py-3 mb-3 mx-5 border-b-[0.15rem]",children:[c.jsx("label",{className:"text-center text-xl py-3",children:"Suivez nous :"}),c.jsxs("div",{className:"grid grid-flow-col justify-center gap-20 text-5xl",children:[c.jsx("a",{href:"https://www.instagram.com/m77_barber/?igsh=MTgwMGo4YzE2ODZ6YQ%3D%3D&utm_source=qr&fbclid=IwAR2RvqvmOxylku8yBSVg_5gKjkGnK-PZbiOW929NFX70AQoeSlje9oA9Z10",target:"_blank",className:"",children:c.jsx(Z3,{})}),c.jsx("a",{href:"https://www.facebook.com/profile.php?id=61571996394439&mibextid=wwXIfr&rdid=OyX2Kxn9sZFNocu8&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F15ZRVrHNAH%2F%3Fmibextid%3DwwXIfr",target:"_blank",className:"",children:c.jsx(J3,{})})]})]}),nL=()=>{const[t,e]=C.useState([]);async function n(){await dO().then(r=>{e(r)})}return C.useEffect(()=>{n()},[]),c.jsxs("div",{className:"grid",children:[c.jsx("h3",{className:"font-bold py-1 px-5",children:"Horaire"}),c.jsx("div",{className:"grid",children:t.map((r,s)=>c.jsxs("div",{className:"grid grid-cols-2",children:[c.jsxs("label",{className:"text-right px-5",children:[" ",r.day," : "]}),c.jsxs("label",{className:`${r.schedule==="Fermé"?"text-red-500":"text-green-500"}`,children:[" ",r.schedule," "]})]},s))})]})},rL=()=>c.jsxs("div",{className:"grid mb-auto px-5",children:[c.jsx("h3",{className:"font-bold py-1",children:"Liens Rapids"}),c.jsxs("div",{className:"grid grid-cols-2",children:[c.jsx("a",{href:"/",className:"text-blue-500 underline",children:"Accueil"}),c.jsx("a",{href:"/a-propos",className:"text-blue-500 underline",children:"A propos"}),c.jsx("a",{href:"/gallerie",className:"text-blue-500 underline",children:"Gallerie"}),c.jsx("a",{href:"/rendez-vous",className:"text-blue-500 underline",children:"Rendez-vous"}),c.jsx("a",{href:"/admin/login",className:"text-blue-500 underline",children:"Admin"})]})]});function sL(){return c.jsxs(c.Fragment,{children:[c.jsx(jT,{}),c.jsx("div",{className:"pt-[155px] md:pt-[110px]",children:c.jsx(Ww,{})}),c.jsx(bm,{})]})}const Fs=({children:t})=>{const{currentUser:e}=zi(),n=ji();return e?c.jsx(c.Fragment,{children:t}):c.jsx(Rb,{to:"/admin/login",state:{from:n.pathname}})};function iL(){const t=C.useRef(),e=C.useRef(),{login:n,currentUser:r}=zi(),[s,i]=C.useState(""),o=pp();async function a(u){u.preventDefault();try{const d=await n(t.current.value,e.current.value);o("/user/dashboard")}catch(d){console.log(d.message),i(d.message)}}return C.useEffect(()=>{r&&o("/user/dashboard")},[]),c.jsxs("div",{children:[c.jsx(jT,{}),c.jsx("div",{className:"pt-[155px] grid bg-[var(--brand-black)] px-2 py-3 rounded-tr-xl font-custom_1 min-h-screen",children:c.jsx("div",{className:"grid justify-center py-10 mb-auto",children:c.jsxs("form",{onSubmit:a,className:"flex flex-col justify-center gap-3 max-w-[400px] p-5 border-[0.15rem] border-[var(--brand-white)]",children:[c.jsx("h1",{className:"my-auto text-center text-design-h2 text-[var(--brand-white)] py-0",children:" Connection "}),c.jsx("h4",{className:"my-auto text-center text-design-h4 text-[var(--brand-white)]",children:" Utilisateurs "}),c.jsx("input",{required:!0,ref:t,type:"email",placeholder:"example@text.com",className:"min-w-[300px] px-1 py-2 placeholder:px-1 border-[0.15rem] border-[var(--brand-white)]"}),c.jsx("input",{required:!0,ref:e,type:"password",placeholder:"mot de pass",className:"min-w-[300px] px-1 py-2 placeholder:px-1 border-[0.15rem] border-[var(--brand-white)]"}),c.jsx("p",{className:"text-red-500",children:s}),c.jsx("button",{type:"submit",className:"button-2 mx-auto mt-2 py-2 px-10",children:"Connection"})]})})}),c.jsx(bm,{})]})}function oL(){const{currentUser:t,logout:e}=zi(),[n,r]=C.useState(null);async function s(o){o.preventDefault(),await e()}async function i(){await Pa(t.email).then(o=>{r(o)})}return C.useEffect(()=>{aL(),i()},[]),c.jsxs("div",{className:"container min-h-screen mx-auto py-20",children:[c.jsx("div",{className:"grid justify-center",children:c.jsxs("h2",{className:"text-design-h2 text-center",children:["Bienvenue ",c.jsx("br",{}),t.email]})}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-5 py-10 px-5 text-center",children:[c.jsx(Ot,{to:"/user/profile",className:"button-1",children:"Mon Profile"}),c.jsx(Ot,{to:"/user/rdvs",className:"button-1",children:"Mes RDVs"}),c.jsx(Ot,{to:"/admin/inventory",className:"button-1",children:"Inventaire"}),n!==null&&n.admin?c.jsx(Ot,{to:"/admin/management",className:"button-1",children:"Admin"}):c.jsx(c.Fragment,{}),c.jsx("button",{type:"button",onClick:s,className:"button-2",children:"Déconnection"})]})]})}const aL=()=>{window.scrollTo({top:0,behavior:"smooth"})};function lL(){const[t,e]=C.useState(null),[n,r]=C.useState(null),[s,i]=C.useState(!1),{currentUser:o}=zi();async function a(){await Pa(o.email).then(v=>{e(v)})}C.useEffect(()=>{hL(),a()},[]);const u=c.jsx("button",{onClick:d,className:"-button-2",children:"Retour"});function d(v){v.preventDefault(),i(!1),r(null)}function f(v){v.preventDefault(),r(c.jsx(uL,{profile:t,backButton:u})),i(!0)}function m(v){v.preventDefault(),r(c.jsx(cL,{profile:t,backButton:u})),i(!0)}function g(v){v.preventDefault(),r(c.jsx(dL,{currentUser:o,backButton:u})),i(!0)}return t===null?c.jsx("div",{className:"font-bold text-4xl font-custom_1",children:"This profile isn't registered"}):c.jsxs("div",{className:"font-custom_1 relative grid py-10 px-5 xl:px-20 2xl:px-40",children:[s?c.jsx("div",{className:"absolute top-0 left-0 bg-black/90 text-white w-full h-full grid",children:n}):c.jsx(c.Fragment,{}),c.jsx("h2",{className:"text-design-h2",children:"Profile"}),c.jsxs("div",{className:"grid",children:[c.jsxs("div",{className:"flex flex-col justify-center items-center pb-5 ",children:[c.jsx("div",{className:"border-[var(--brand-black)] border-[0.15rem] p-5",children:c.jsx("img",{src:t.image_url,alt:"user-image-used-for-clients-in-appointment-form",className:"w-[250px] h-[450px]"})}),c.jsx("h4",{children:t.email})]}),c.jsxs("div",{className:"grid gap-5 justify-center",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-5 justify-center",children:[c.jsx("button",{onClick:m,className:"button-1",children:"Changer l'image"}),c.jsx("button",{onClick:f,className:"button-1",children:"Changer la description"})]}),c.jsx("div",{className:"grid justify-center",children:c.jsx("button",{onClick:g,className:"button-1",children:"Changer Mot de Pass"})})]}),c.jsx("div",{className:"flex gap-5 ml-auto py-10",children:c.jsx(Ot,{to:"/user/dashboard",className:"button-2",children:"Retour"})})]})]})}const uL=({profile:t,backButton:e})=>{const n=C.useRef(),[r,s]=C.useState(!1),[i,o]=C.useState(["",!1]);async function a(u){if(u.preventDefault(),n.current.value==="")return!1;await yO(t,n.current.value).then(d=>{if(d!==null)return s(!0),o(["Description mise à jour avec succès !",!1]),!0}).catch(d=>(o(["Erreur lors de la mise à jour de la description !",!0]),!1))}return c.jsxs("div",{className:"flex flex-col p-5 max-w-[500px] mx-auto",children:[c.jsx("label",{className:"font-custom_1 font-bold text-3xl",children:"Nouvelle Description"}),c.jsx("label",{className:"text-[var(--brand-white-80)]",children:"Conseil : maximum 20 mots."}),c.jsx("textarea",{placeholder:t.profile_description,ref:n,className:"h-[500px] px-3 py-1 text-[var(--brand-black)]"}),c.jsx("div",{className:"p-3 grid text-center justify-center",children:c.jsx("p",{className:`font-bold ${i[1]?"text-red-500":"text-green-500"}`,children:i[0]})}),c.jsxs("div",{className:"flex justify-center gap-5 pt-5",children:[e,c.jsx("button",{onClick:a,disabled:r,className:"button-2 disabled:bg-gray-300",children:"Sauvegarder"})]})]})},cL=({profile:t,backButton:e})=>{const[n,r]=C.useState(null),[s,i]=C.useState(["",!1]),[o,a]=C.useState(!1);async function u(d){if(d.preventDefault(),n===null)return i(["Pas d'image sélectionnée !",!0]),!1;await gO(t,n).then(f=>{if(f)return a(!0),i(["Image mise à jour avec succès !",!1]),!0}).catch(f=>(i(["Erreur lors de la mise à jour de l'image !",!0]),!1))}return c.jsxs("div",{className:"flex flex-col p-5 max-w-[500px] mx-auto",children:[c.jsx("label",{className:"font-custom_1 font-bold text-3xl",children:"Nouvelle Image"}),c.jsx("label",{className:"text-[var(--brand-white-80)]",children:"Conseil : dimension de 250x450 pixels."}),c.jsxs("div",{className:"grid py-10",children:[c.jsx("input",{type:"file",onChange:d=>{r(d.target.files[0])}}),c.jsxs("div",{className:"grid justify-center py-5",children:[n!==null?c.jsx("img",{src:URL.createObjectURL(n),alt:"user-image-used-for-clients-in-appointment-form",className:"w-[250px] h-[450px] mx-auto border-white border-[0.05rem]"}):c.jsx("div",{className:"w-[250px] h-[450px] bg-white text-[var(--brand-black)] grid items-center justify-center font-medium mx-auto border-white border-[0.05rem]",children:"Prévisualisation d'Image"}),c.jsx("button",{onClick:()=>{r(null)},className:"-button-2 mt-5",children:"Supprimer séléction"})]})]}),c.jsx("div",{className:"grid text-center justify-center",children:c.jsx("p",{className:`font-bold ${s[1]?"text-red-500":"text-green-500"}`,children:s[0]})}),c.jsxs("div",{className:"flex justify-center gap-5 pt-5",children:[e,c.jsx("button",{onClick:u,disabled:o,className:"button-2 disabled:bg-gray-300",children:"Sauvegarder"})]})]})},dL=({currentUser:t,backButton:e})=>{const n=C.useRef(),r=C.useRef(),[s,i]=C.useState(!1),[o,a]=C.useState(["",!1]);async function u(d){if(d.preventDefault(),n.current.value!==r.current.value)return a(["Les mots de pass ne correspondent pas !",!0]),!1;await vO(t,n.current.value).then(f=>{if(f!==null)return i(!0),a(["Mot de pass mis à jour avec succès !",!1]),!0}).catch(f=>(a(["Erreur lors de la mise à jour de la description !",!0]),!1))}return c.jsxs("div",{className:"flex flex-col p-5 max-w-[500px] mx-auto",children:[c.jsx("label",{className:"font-custom_1 font-bold text-3xl",children:"Nouveau Mot de Pass"}),c.jsx("label",{className:"text-[var(--brand-white-80)]",children:"Conseil : minimum 9 caractères, contenant des letters et chiffres"}),c.jsxs("div",{className:"grid gap-3 py-5 px-3",children:[c.jsx("input",{type:"password",placeholder:"Nouveau mot de pass",ref:n,className:"px-1 py-3"}),c.jsx("input",{type:"password",placeholder:"Confirmer le mot de pass",ref:r,className:"px-1 py-3"})]}),c.jsx("div",{className:"p-3 grid text-center justify-center",children:c.jsx("p",{className:`font-bold ${o[1]?"text-red-500":"text-green-500"}`,children:o[0]})}),c.jsxs("div",{className:"flex justify-center gap-5 pt-5",children:[e,c.jsx("button",{onClick:u,disabled:s,className:"button-2 disabled:bg-gray-300",children:"Sauvegarder"})]})]})},hL=()=>{window.scrollTo({top:0,behavior:"smooth"})};function fL({data:t}){const e={title:"Rendez-vous / jour pour",hAxis:{title:"Date"},vAxis:{title:"Nombre de rendez-vous"},bars:"horizontal",bar:{groupWidth:"75%"}};return c.jsx(Bi,{chartType:"ColumnChart",className:"w-full h-[500px]",height:"",data:t,options:e})}const pL=({appointments:t,groupBy:e="confirmed"})=>{const n={[oe.affirmative_state]:"#22C55E",[oe.medium_state]:"#F97316",[oe.negative_state]:"#EF4444",[oe.neutral_state]:"#6B7280"},r=()=>`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,i=(()=>{if(!t||t.length===0)return[["Category","Percentage"],["No Data",1]];const u={};t.forEach(m=>{const g=m[e]||"Unknown";u[g]=(u[g]||0)+1});const d=Object.values(u).reduce((m,g)=>m+g,0);return d===0?[["Category","Percentage"],["No Data",1]]:[["Category","Percentage"],...Object.entries(u).map(([m,g])=>[m,Number((g/d*100).toFixed(2))])]})(),o=i.slice(1).map(([u])=>u),a=Object.fromEntries(o.map(u=>[u,n[u]||r()]));return c.jsx("div",{className:"w-full max-w-md mx-auto p-4 bg-white shadow-lg rounded-lg",children:c.jsx(Bi,{chartType:"PieChart",data:i,options:{title:e==="confirmed"?"Distribution basée sur l'état du rendez-vous":"Distribution basée sur le type de service",pieHole:.4,is3D:!1,colors:o.map(u=>a[u]),legend:{position:"bottom"}},width:"100%",height:"300px"})})};function mL({appointments:t}){const[e,n]=C.useState({});C.useEffect(()=>{if(t.length>0)try{const s=gL(t);n(s||{})}catch(s){console.error(s)}},[t]);function r(s){const i=[];100/s.total;for(const o in s)o==="total"&&i.push(c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx("label",{children:"Somme totale théorique :"}),c.jsxs("span",{className:"font-bold my-auto text-center",children:[s[o]," €"]})]})),o!=="total"&&i.push(c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("label",{children:[s[o].props," :"]}),c.jsxs("span",{className:"font-bold my-auto text-center",style:{color:s[o].color},children:[s[o].value," €"]})]}));return i}return c.jsx("div",{className:"grid py-5",children:r(e).map((s,i)=>c.jsx("div",{children:s},i))})}function gL(t){let e={total:0,[oe.neutral_state]:{value:0,color:"#6B7280",props:"Somme des prestations non confirmées"},[oe.medium_state]:{value:0,color:"#F97316",props:"Somme des prestations absentes"},[oe.negative_state]:{value:0,color:"#EF4444",props:"Somme des prestations annulées"},[oe.affirmative_state]:{value:0,color:"#22C55E",props:"Somme des prestations confirmées"}};for(let n=0;n<t.length;n++){const r=t[n],s=yL(r.appointment_service);if(s===null)throw new Error(`Le service ${r.appointment_service} n'existe pas dans services.json`);e.total+=s,e[r.confirmed].value+=s}return e}function yL(t){const e=os.all_services_flat;for(let n=0;n<e.length;n++){const r=e[n];if(r.name===t)return r.price}return null}function DT(){const[t,e]=C.useState(new Date().toLocaleString("en-GB",{timeZone:"Europe/Brussels",year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")),[n,r]=C.useState([]),[s,i]=C.useState([]),[o,a]=C.useState(t.split("-")[1]),[u,d]=C.useState(t.split("-")[0]),f=C.useCallback(async()=>{try{const v=await Ui();r(v)}catch(v){console.error("Error fetching profiles:",v)}},[]),m=C.useCallback(async()=>{if(n.length!==0)try{const v=`${u}-${o}-01`,T=n.map(N=>fO(N,v)),A=await Promise.all(T);i(A)}catch(v){console.error(`Error fetching ${t} appointments`,v)}},[n,u,o,t]);C.useEffect(()=>{f()},[f]),C.useEffect(()=>{m()},[m]);function g(v){d(v),console.log(`Changed Year to : ${v}`)}return n.length<=0?c.jsx("div",{children:"Chargement ..."}):c.jsxs("div",{className:"grid",children:[c.jsxs("div",{className:"grid gap-5",children:[c.jsx("div",{className:"grid",children:c.jsx(vL,{minYear:2024,onSelectYear:g,title:"Choisisez l'année"})}),c.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[c.jsx($t,{text:"Janv",value:"01",setters:[o,a]}),c.jsx($t,{text:"Fèvr",value:"02",setters:[o,a]}),c.jsx($t,{text:"Mars",value:"03",setters:[o,a]}),c.jsx($t,{text:"Avrl",value:"04",setters:[o,a]}),c.jsx($t,{text:"Mai",value:"05",setters:[o,a]}),c.jsx($t,{text:"Juin",value:"06",setters:[o,a]}),c.jsx($t,{text:"Juil",value:"07",setters:[o,a]}),c.jsx($t,{text:"Aôut",value:"08",setters:[o,a]}),c.jsx($t,{text:"Sept",value:"09",setters:[o,a]}),c.jsx($t,{text:"Oct",value:"10",setters:[o,a]}),c.jsx($t,{text:"Nov",value:"11",setters:[o,a]}),c.jsx($t,{text:"Dec",value:"12",setters:[o,a]})]})]}),c.jsx("div",{className:"grid pt-5",children:c.jsx(T_,{monthlyAppointments:s,title:"Comparatif états des rendez-vous",groupBy:"confirmed"})}),c.jsx("div",{className:"grid",children:c.jsx(_L,{db_profiles:n,year:u,month:o})}),c.jsx("div",{className:"grid pt-5",children:c.jsx(T_,{monthlyAppointments:s,title:"Comparatif types des rendez-vous",groupBy:"appointment_service"})}),c.jsx("div",{children:c.jsx(wL,{monthlyAppointments:s,title:"Comparatif revenus mensuels"})})]})}function $t({text:t,value:e,setters:n}){function r(s){s.preventDefault(),n[1](e)}return c.jsx("button",{onClick:r,className:`px-3 py-1 text-base ${n[0]===e?"button-2":"button-1"} `,children:t})}function vL({minYear:t=2024,onSelectYear:e,title:n="Select A Year"}){const r=new Date().getFullYear(),s=Array.from({length:r-t+1},(u,d)=>r-d),[i,o]=C.useState(r),a=u=>{const d=parseInt(u.target.value,10);o(d),e&&e(d)};return c.jsxs("div",{className:"flex gap-5 items-center py-4 font-custom_1",children:[c.jsx("label",{htmlFor:"year-selector",className:"text-lg my-auto text-gray-700 mb-2",children:n}),c.jsx("select",{id:"year-selector",value:i,onChange:a,className:"px-4 py-2 border border-[var(--brand-black)] shadow-sm focus:outline-none focus:ring-2 focus:ring-[var(--brand-black)]",children:s.map(u=>c.jsx("option",{value:u,children:u},u))})]})}function _L({db_profiles:t,year:e,month:n}){const[r,s]=C.useState([]);async function i(o){if(!o||o.length===0)return;const a=`${e}-${n}-01`;try{const u=o.map(f=>hO(f,a)),d=await Promise.all(u);s(d)}catch(u){console.error("Error fetching chart data:",u)}}return C.useEffect(()=>{t.length>0&&i(t)},[e,n]),c.jsx("div",{children:c.jsxs("div",{className:"grid",children:[c.jsx("h2",{className:"text-design-h2",children:"Rapport quantitatif par mois"}),c.jsx("div",{className:"py-10 grid gap-5",children:r.map((o,a)=>c.jsxs("div",{className:"grid",children:[c.jsx("label",{className:"text-xl font-bold",children:o[0]}),c.jsx(fL,{data:o[1]})]},a))})]})})}function T_({monthlyAppointments:t,title:e,groupBy:n}){return c.jsx("div",{children:c.jsxs("div",{className:"grid",children:[c.jsx("h2",{className:"text-design-h2",children:e}),c.jsx("div",{className:"py-10 grid md:grid-cols-2 gap-5",children:t.map((r,s)=>{var o;const i=((o=r[1])==null?void 0:o.flat())||[];return c.jsxs("div",{className:"grid",children:[c.jsx("label",{className:"text-xl font-bold",children:r[0]}),c.jsx(pL,{appointments:i,groupBy:n})]},s)})})]})})}function wL({monthlyAppointments:t,title:e}){return c.jsx("div",{children:c.jsxs("div",{className:"grid",children:[c.jsx("h2",{className:"text-design-h2",children:e}),c.jsx("div",{className:"py-10 grid md:grid-cols-2 gap-5",children:t.map((n,r)=>{var i;const s=((i=n[1])==null?void 0:i.flat())||[];return c.jsxs("div",{className:"grid",children:[c.jsx("label",{className:"text-xl font-bold",children:n[0]}),c.jsx(mL,{appointments:s})]},r)})})]})})}function xL(){const{currentUser:t}=zi(),[e,n]=C.useState({}),[r,s]=C.useState("my-appointments"),[i,o]=C.useState(null);async function a(){await Pa(t.email).then(d=>{d.locked_days&&d.locked_days.sort((f,m)=>new Date(f)-new Date(m)),n(d)})}C.useEffect(()=>{NL(),a()},[]);const u={"my-appointments":c.jsx(EL,{profile:e,popUpSetter:[i,o]}),"lock-days":c.jsx(SL,{profile:e}),"admin-rapport":c.jsx(DT,{})};return c.jsxs("div",{className:"font-custom_1 relative",children:[c.jsx("div",{className:`${i!==null?"grid":"hidden"} absolute top-0 left-0 bg-black/90 h-full w-full`,children:i}),c.jsxs("div",{className:"min-h-screen flex flex-col max-w-[1000px] mx-auto pb-10",children:[c.jsxs("div",{className:"grid grid-flow-col py-5",children:[c.jsx("button",{onClick:()=>{s("my-appointments")},className:`${r==="my-appointments"?"button-2":"button-1"} text-3xl text-center mx-auto my-auto`,children:c.jsx(eC,{})}),e.admin?c.jsx("button",{onClick:()=>{s("lock-days")},className:`${r==="lock-days"?"button-2":"button-1"} text-3xl text-center mx-auto my-auto`,children:c.jsx(eL,{})}):c.jsx(c.Fragment,{}),e.admin?c.jsx("button",{onClick:()=>{s("admin-rapport")},className:`${r==="admin-rapport"?"button-2":"button-1"} text-3xl text-center mx-auto my-auto`,children:c.jsx($5,{})}):c.jsx(c.Fragment,{})]}),c.jsx("div",{className:"grid px-5",children:u[r]}),c.jsx("div",{className:"grid ml-auto px-5",children:c.jsx(Ot,{to:"/user/dashboard",className:"button-2",children:"Retour"})})]})]})}const EL=({profile:t,popUpSetter:e})=>t.admin?c.jsx(IL,{profile:t,popUpSetter:e}):c.jsx(TL,{profile:t,popUpSetter:e}),TL=({profile:t,popUpSetter:e})=>{const n=()=>new Date().toLocaleString("en-GB",{timeZone:"Europe/Brussels",year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-"),[r]=C.useState(n()),[s,i]=C.useState(r),[o,a]=C.useState([]),[u,d]=C.useState(!1),f={[oe.affirmative_state]:["bg-green-500","border-green-500"],[oe.medium_state]:["bg-orange-500","border-orange-500"],[oe.negative_state]:["bg-red-500","border-red-500"],[oe.neutral_state]:["bg-gray-500","border-gray-500"]};function m(N){return Array.isArray(N)?N.sort((_,w)=>{const[I,j]=_.appointment_hour.split(":").map(Number),[O,L]=w.appointment_hour.split(":").map(Number);return I*60+j-(O*60+L)}):(console.error("Invalid input: Expected an array of appointments."),[])}async function g(N){try{const _=await Nc(N,t);a(m(_)),console.log(`Appointments for ${N}:`,_)}catch(_){console.error("Failed to fetch appointments:",_)}}C.useEffect(()=>{g(s)},[s,t]);const v=N=>{const _=N.target.value;i(_)},T=({text:N,appointment_id:_,confirmation_state:w})=>{async function I(O){O.preventDefault(),await pT(s,_,w).then(L=>{g(s),e[1](null)})}function j(O){O.preventDefault(),e[1](null)}return c.jsxs("div",{className:"flex flex-col px-5 pt-32 ",children:[c.jsx("h1",{className:"text-design-h2 text-white text-center",children:N}),c.jsxs("div",{className:"flex justify-center gap-5",children:[c.jsx("button",{onClick:I,className:"button-1 bg-green-500",children:"Oui"}),c.jsx("button",{onClick:j,className:"button-1 bg-red-500",children:"Non"})]})]})},A=({data:N,colorCode:_})=>{const[w,I]=C.useState(!1),[j,O]=C.useState(!1),[L,E]=C.useState(""),y=C.useRef();function S(b){b.preventDefault(),e[1](c.jsx(T,{appointment_id:N.appointment_id,confirmation_state:"CONFIRMED",text:"Etez vous certain de confirmer la 'présence' ?"}))}function k(b){b.preventDefault(),e[1](c.jsx(T,{appointment_id:N.appointment_id,confirmation_state:"ABSENT",text:"Etez vous certain de confirmer l' 'absence' ?"}))}function R(b){b.preventDefault(),e[1](c.jsx(T,{appointment_id:N.appointment_id,confirmation_state:"CANCELED",text:"Etez vous certain de confirmer l' 'annulation' ?"}))}function P(b){b.preventDefault(),Ac.sendForm("service_23w8au3","template_yy6hcmb",y.current,"cC8so3gIzcPNDnuYk").then(he=>{console.log(`Email envoyé : ${he.text} !`),E("Email envoyé avec success!")},he=>{console.error("Email sending failed:",he.text),E("Problème lors de l'envoie de l'email!")})}return c.jsxs("div",{className:`${N.confirmed===oe.neutral_state?_[N.confirmed][1]:_[N.confirmed][0]} border-x-[0.15rem] border-y-[0.15rem] p-2`,children:[c.jsx("h1",{className:"text-xl",children:N.appointment_hour}),c.jsxs("div",{className:"grid",children:[c.jsxs("div",{onClick:()=>{I(!w)},className:"flex justify-between py-3 ",children:[c.jsxs("h2",{className:"text-lg px-10",children:[N.appointment_user.name," - ",N.appointment_service]}),w?c.jsx(Ur,{className:"text-3xl my-auto"}):c.jsx(Fr,{className:"text-3xl my-auto"})]}),c.jsxs("div",{className:`${w?"grid":"hidden"} gap-5 `,children:[c.jsx("button",{type:"button",onClick:P,className:"button-1 disabled:bg-gray-500",disabled:r>s,children:"Rappel Email"}),c.jsx("label",{className:"text-center text-lg",children:L}),c.jsxs("form",{ref:y,className:"hidden",children:[c.jsx("input",{name:"user_email",value:N.appointment_user.email}),c.jsx("input",{name:"user_name",value:N.appointment_user.name}),c.jsx("input",{name:"appointment_date",value:N.appointment_date}),c.jsx("input",{name:"appointment_time",value:N.appointment_hour})]}),c.jsxs("div",{className:"grid",children:[c.jsxs("span",{children:["Nom : ",N.appointment_user.name]}),c.jsxs("span",{children:["GSM : ",N.appointment_user.phone]}),c.jsxs("span",{children:["Email : ",N.appointment_user.email]}),c.jsxs("div",{children:[c.jsx("button",{type:"button",onClick:()=>{O(!j)},className:"text-sm text-gray-500",children:"..plus"}),c.jsxs("div",{className:`${j?"grid":"hidden"} gap-1 border-[0.15rem] border-[var(--brand-black)] p-2`,children:[c.jsx("span",{children:N.appointment_id}),c.jsxs("span",{children:["Barber : ",N.barber_id]}),c.jsxs("span",{children:["Pris le : ",N.registered_time]}),c.jsxs("span",{children:["Statut : ",N.confirmed]})]})]})]}),c.jsxs("div",{className:"flex justify-center gap-5",children:[c.jsx("button",{onClick:S,className:"button-2 px-3",children:"Présent"}),c.jsx("button",{onClick:k,className:"button-2 px-3",children:"Absent"}),c.jsx("button",{onClick:R,className:"button-2 px-3",children:"Annulation"})]})]})]})]})};return c.jsxs("div",{className:"py-10 grid",children:[c.jsx("h2",{className:"text-design-h2",children:"Mes Rendez-vous"}),c.jsxs("div",{className:"flex gap-5 ",children:[c.jsx("label",{className:"my-auto text-xl",children:"Jour : "}),c.jsx("input",{type:"date",value:s,onChange:v,className:"text-xl"})]}),c.jsxs("div",{className:"mt-5 h-[500px] overflow-y-auto",children:[c.jsxs("h3",{className:"text-xl font-bold",children:["Rendez-vous pour le ",s,":"]}),c.jsxs("div",{className:"grid",children:[c.jsxs("div",{className:"px-5 flex justify-between gap-10 border-[0.15rem] border-[var(--brand-black)]",children:[c.jsx("h4",{className:"text-lg",children:"Code couleurs"}),u?c.jsx(Ur,{onClick:()=>{d(!1)},className:"text-3xl my-auto cursor-pointer"}):c.jsx(Fr,{onClick:()=>{d(!0)},className:"text-3xl my-auto cursor-pointer"})]}),c.jsxs("div",{className:`${u?"grid":"hidden"} px-5 py-1 grid-cols-2 gap-5 border-x-[0.15rem] border-b-[0.15rem] border-[var(--brand-black)]`,children:[c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:`w-[25px] h-[25px] rounded-full ${f[oe.affirmative_state][0]}`}),c.jsx("span",{children:"présent"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:`w-[25px] h-[25px] rounded-full ${f[oe.medium_state][0]}`}),c.jsx("span",{children:"absent"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:`w-[25px] h-[25px] rounded-full ${f[oe.negative_state][0]}`}),c.jsx("span",{children:"annulé"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:`w-[25px] h-[25px] rounded-full ${f[oe.neutral_state][0]}`}),c.jsx("span",{children:"non confirmé"})]})]})]}),o.length>0?c.jsx("ul",{className:"mt-3",children:o.map((N,_)=>c.jsx(A,{data:N,colorCode:f},_))}):c.jsx("p",{className:"mt-3 text-gray-500",children:"Aucun rendez-vous trouvé."})]})]})},IL=({profile:t,popUpSetter:e})=>{if(!t.admin)return c.jsx(c.Fragment,{children:"Ce profile n'est pas ADMINISTRATEUR !"});const n=()=>new Date().toLocaleString("en-GB",{timeZone:"Europe/Brussels",year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-"),[r]=C.useState(n()),[s,i]=C.useState([]),[o,a]=C.useState(r),[u,d]=C.useState({}),[f,m]=C.useState([]),[g,v]=C.useState(!1),T={[oe.affirmative_state]:["bg-green-500","border-green-500"],[oe.medium_state]:["bg-orange-500","border-orange-500"],[oe.negative_state]:["bg-red-500","border-red-500"],[oe.neutral_state]:["bg-gray-500","border-gray-500"]};function A(O){return Array.isArray(O)?O.sort((L,E)=>{const[y,S]=L.appointment_hour.split(":").map(Number),[k,R]=E.appointment_hour.split(":").map(Number);return y*60+S-(k*60+R)}):(console.error("Invalid input: Expected an array of appointments."),[])}async function N(O,L){try{const E=await Nc(L,O);m(A(E)),console.log(A(E)),console.log(`Appointments for ${L}:`,E)}catch(E){console.error("Failed to fetch appointments:",E)}}async function _(){const O=await Ui();i(O)}C.useEffect(()=>{_()},[]),C.useEffect(()=>{N(u,o)},[o,u]);const w=O=>{const L=O.target.value;a(L)},I=({text:O,appointment_id:L,confirmation_state:E})=>{async function y(k){k.preventDefault(),await pT(o,L,E).then(R=>{N(u,o),e[1](null)})}function S(k){k.preventDefault(),e[1](null)}return c.jsxs("div",{className:"flex flex-col px-5 pt-32 ",children:[c.jsx("h1",{className:"text-design-h2 text-white text-center",children:O}),c.jsxs("div",{className:"flex justify-center gap-5",children:[c.jsx("button",{onClick:y,className:"button-1 bg-green-500",children:"Oui"}),c.jsx("button",{onClick:S,className:"button-1 bg-red-500",children:"Non"})]})]})},j=({data:O,colorCode:L})=>{const[E,y]=C.useState(!1),[S,k]=C.useState(!1),[R,P]=C.useState(""),b=C.useRef();function he(B){B.preventDefault(),e[1](c.jsx(I,{appointment_id:O.appointment_id,confirmation_state:"CONFIRMED",text:"Etez vous certain de confirmer la 'présence' ?"}))}function fe(B){B.preventDefault(),e[1](c.jsx(I,{appointment_id:O.appointment_id,confirmation_state:"ABSENT",text:"Etez vous certain de confirmer l' 'absence' ?"}))}function tt(B){B.preventDefault(),e[1](c.jsx(I,{appointment_id:O.appointment_id,confirmation_state:"CANCELED",text:"Etez vous certain de confirmer l' 'annulation' ?"}))}function Ve(B){B.preventDefault(),Ac.sendForm("service_23w8au3","template_yy6hcmb",b.current,"cC8so3gIzcPNDnuYk").then(K=>{console.log(`Email envoyé : ${K.text} !`),P("Email envoyé avec success!")},K=>{console.error("Email sending failed:",K.text),P("Problème lors de l'envoie de l'email!")})}return c.jsxs("div",{className:`${O.confirmed===oe.neutral_state?L[O.confirmed][1]:L[O.confirmed][0]} border-x-[0.15rem] border-y-[0.15rem] p-2`,children:[c.jsx("h1",{className:"text-xl",children:O.appointment_hour}),c.jsxs("div",{className:"grid",children:[c.jsxs("div",{onClick:()=>{y(!E)},className:"flex justify-between py-3 ",children:[c.jsxs("h2",{className:"text-lg px-10",children:[O.appointment_user.name," - ",O.appointment_service]}),E?c.jsx(Ur,{className:"text-3xl my-auto"}):c.jsx(Fr,{className:"text-3xl my-auto"})]}),c.jsxs("div",{className:`${E?"grid":"hidden"} gap-5 `,children:[c.jsx("button",{type:"button",onClick:Ve,className:"button-1 disabled:bg-gray-500",disabled:r>o,children:"Rappel Email"}),c.jsx("label",{className:"text-center text-lg",children:R}),c.jsxs("form",{ref:b,className:"hidden",children:[c.jsx("input",{name:"user_email",value:O.appointment_user.email}),c.jsx("input",{name:"user_name",value:O.appointment_user.name}),c.jsx("input",{name:"appointment_date",value:O.appointment_date}),c.jsx("input",{name:"appointment_time",value:O.appointment_hour})]}),c.jsxs("div",{className:"grid",children:[c.jsxs("span",{children:["Nom : ",O.appointment_user.name]}),c.jsxs("span",{children:["GSM : ",O.appointment_user.phone]}),c.jsxs("span",{children:["Email : ",O.appointment_user.email]}),c.jsxs("div",{children:[c.jsx("button",{type:"button",onClick:()=>{k(!S)},className:"text-sm text-gray-500",children:"..plus"}),c.jsxs("div",{className:`${S?"grid":"hidden"} gap-1 border-[0.15rem] border-[var(--brand-black)] p-2`,children:[c.jsx("span",{children:O.appointment_id}),c.jsxs("span",{children:["Barber : ",O.barber_id]}),c.jsxs("span",{children:["Pris le : ",O.registered_time]}),c.jsxs("span",{children:["Statut : ",O.confirmed]})]})]})]}),c.jsxs("div",{className:"flex justify-center gap-5",children:[c.jsx("button",{onClick:he,className:"button-2 px-3",children:"Présent"}),c.jsx("button",{onClick:fe,className:"button-2 px-3",children:"Absent"}),c.jsx("button",{onClick:tt,className:"button-2 px-3",children:"Annulation"})]})]})]})]})};return c.jsxs("div",{className:"py-10 grid",children:[c.jsx("h2",{className:"text-design-h2",children:"Mes Rendez-vous"}),c.jsxs("div",{className:"flex gap-5 ",children:[c.jsx("label",{className:"my-auto text-xl",children:"Jour : "}),c.jsx("input",{type:"date",value:o,onChange:w,className:"text-xl"})]}),c.jsxs("div",{className:"flex gap-5 ",children:[c.jsx("label",{className:"my-auto text-xl",children:"Choisisez le profil : "}),c.jsx("select",{className:"text-xl border border-gray-500",value:(u==null?void 0:u.profile_id)||"",onChange:O=>{const L=s.find(E=>E.profile_id===O.target.value);d(L)},children:s.map(O=>c.jsx("option",{value:O.profile_id,children:O.profile_id},O.profile_id))})]}),c.jsxs("div",{className:"mt-5 h-[500px] overflow-y-auto",children:[c.jsxs("h3",{className:"text-xl font-bold",children:["Rendez-vous pour le ",o,":"]}),c.jsxs("div",{className:"grid",children:[c.jsxs("div",{className:"px-5 flex justify-between gap-10 border-[0.15rem] border-[var(--brand-black)]",children:[c.jsx("h4",{className:"text-lg",children:"Code couleurs"}),g?c.jsx(Ur,{onClick:()=>{v(!1)},className:"text-3xl my-auto cursor-pointer"}):c.jsx(Fr,{onClick:()=>{v(!0)},className:"text-3xl my-auto cursor-pointer"})]}),c.jsxs("div",{className:`${g?"grid":"hidden"} px-5 py-1 grid-cols-2 gap-5 border-x-[0.15rem] border-b-[0.15rem] border-[var(--brand-black)]`,children:[c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:`w-[25px] h-[25px] rounded-full ${T[oe.affirmative_state][0]}`}),c.jsx("span",{children:"présent"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:`w-[25px] h-[25px] rounded-full ${T[oe.medium_state][0]}`}),c.jsx("span",{children:"absent"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:`w-[25px] h-[25px] rounded-full ${T[oe.negative_state][0]}`}),c.jsx("span",{children:"annulé"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:`w-[25px] h-[25px] rounded-full ${T[oe.neutral_state][0]}`}),c.jsx("span",{children:"non confirmé"})]})]})]}),f.length>0?c.jsx("ul",{className:"mt-3",children:f.map((O,L)=>c.jsx(j,{data:O,colorCode:T},L))}):c.jsx("p",{className:"mt-3 text-gray-500",children:"Aucun rendez-vous trouvé."})]})]})},SL=({profile:t})=>c.jsxs("div",{className:"grid gap-5",children:[c.jsx(bL,{profile:t}),c.jsx(CL,{profile:t})]}),bL=({profile:t})=>{const e=new Date().toISOString().split("T")[0],[n,r]=C.useState(!1),[s,i]=C.useState(!1),[o,a]=C.useState(e),[u,d]=C.useState([]),[f,m]=C.useState([]),[g,v]=C.useState(null),[T,A]=C.useState([]);async function N(){const L=await Ui();m(L),L.length>0&&_(L[0].email)}async function _(L){const E=await Pa(L);v(E),A(E.locked_days?[...E.locked_days]:[])}C.useEffect(()=>{t.admin&&N()},[]);async function w(L){if(L.preventDefault(),!g)return;const E=await NO(g.profile_id,o);d(E),E[0]&&A(y=>[...y,o].sort()),setTimeout(()=>d([]),3e3)}async function I(L,E){if(L.preventDefault(),!g)return;const y=await kO(g.profile_id,E);d(y),y[0]&&A(S=>S.filter(k=>k!==E)),setTimeout(()=>d([]),3e3)}const j=T.filter(L=>L<e).sort().reverse(),O=T.filter(L=>L>=e).sort();return c.jsxs("div",{className:"py-10 grid gap-10",children:[c.jsx("h2",{className:"text-design-h2",children:"Bloquer des jours"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Sélectionnez un profil et un jour à bloquer. Les jours bloqués seront affichés en rouge."}),c.jsxs("div",{className:"grid grid-cols-2",children:[c.jsx("label",{children:"Choisissez un profil :"}),c.jsx("select",{className:"text-xl border border-gray-500",onChange:L=>_(L.target.value),children:f.map(L=>c.jsx("option",{value:L.email,children:L.email},L.email))})]}),g&&c.jsxs("div",{className:"grid",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("label",{className:"text-xl",children:"Historique"}),n?c.jsx(Ur,{className:"text-3xl cursor-pointer",onClick:()=>r(!1)}):c.jsx(Fr,{className:"text-3xl cursor-pointer",onClick:()=>r(!0)})]}),c.jsx("div",{className:`${n?"grid":"hidden"} h-[150px] overflow-auto`,children:j.length>0?j.map((L,E)=>c.jsx("div",{className:"text-red-600",children:L},E)):c.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune donnée"})})]}),g&&c.jsxs("div",{className:"grid",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("label",{className:"text-xl",children:"Jours à venir"}),s?c.jsx(Ur,{className:"text-3xl cursor-pointer",onClick:()=>i(!1)}):c.jsx(Fr,{className:"text-3xl cursor-pointer",onClick:()=>i(!0)})]}),c.jsx("div",{className:`${s?"grid":"hidden"} h-[150px] overflow-auto`,children:O.length>0?O.map((L,E)=>c.jsxs("div",{className:"flex justify-between py-3",children:[c.jsx("span",{className:"text-green-700 font-bold",children:L}),c.jsx("button",{onClick:y=>I(y,L),className:"text-2xl",children:c.jsx(uT,{})})]},E)):c.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune donnée"})})]}),c.jsxs("div",{className:"grid grid-cols-2",children:[c.jsx("label",{children:"Choisissez un jour à bloquer :"}),c.jsx("input",{type:"date",min:e,value:o,onChange:L=>a(L.target.value),className:"text-xl"})]}),c.jsxs("div",{className:"grid",children:[c.jsx("p",{className:`${u[0]?"text-green-500":"text-red-500"}`,children:u[1]}),c.jsx("button",{onClick:w,className:"button-1",children:"Bloquer"})]})]})},CL=({profile:t})=>{const e=new Date().toISOString().split("T")[0],[n,r]=C.useState(!1),[s,i]=C.useState(!1),[o,a]=C.useState(e),[u,d]=C.useState([]),[f,m]=C.useState([]);async function g(){const _=await SO();m(_||[])}C.useEffect(()=>{t.admin&&g()},[]);async function v(_){_.preventDefault();const w=await TO([o]);d([w,"La journée a été bloquée !"]),w&&m(I=>[...I,o].sort()),setTimeout(()=>d([]),3e3)}async function T(_,w){_.preventDefault();const I=await IO([w]);d([I,"La journée a été débloquée !"]),I&&m(j=>j.filter(O=>O!==w)),setTimeout(()=>d([]),3e3)}const A=[...f.filter(_=>_<e)].sort().reverse(),N=[...f.filter(_=>_>=e)].sort();return c.jsxs("div",{className:"py-10 grid gap-10",children:[c.jsx("h2",{className:"text-design-h2",children:"Bloquer des journées générales"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Sélectionnez une journée à bloquer pour tout le monde. Les jours bloqués apparaissent en rouge."}),c.jsxs("div",{className:"grid",children:[c.jsx("h3",{className:"text-xl font-semibold",children:"Bloquer un jour pour tout le monde"}),c.jsxs("div",{className:"grid grid-cols-2",children:[c.jsx("label",{children:"Choisissez un jour :"}),c.jsx("input",{type:"date",min:e,value:o,onChange:_=>a(_.target.value),className:"text-xl"})]}),c.jsx("button",{onClick:v,className:"button-1",children:"Bloquer"})]}),c.jsxs("div",{className:"grid",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("label",{className:"text-xl",children:"Historique"}),n?c.jsx(Ur,{className:"text-3xl cursor-pointer",onClick:()=>r(!1)}):c.jsx(Fr,{className:"text-3xl cursor-pointer",onClick:()=>r(!0)})]}),c.jsx("div",{className:`${n?"grid":"hidden"} h-[150px] overflow-auto`,children:A.length>0?A.map((_,w)=>c.jsx("div",{className:"text-red-600",children:_},w)):c.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune donnée"})})]}),c.jsxs("div",{className:"grid",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("label",{className:"text-xl",children:"Jours à venir"}),s?c.jsx(Ur,{className:"text-3xl cursor-pointer",onClick:()=>i(!1)}):c.jsx(Fr,{className:"text-3xl cursor-pointer",onClick:()=>i(!0)})]}),c.jsx("div",{className:`${s?"grid":"hidden"} h-[150px] overflow-auto`,children:N.length>0?N.map((_,w)=>c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700 font-bold",children:_}),c.jsx("button",{onClick:I=>T(I,_),className:"text-2xl",children:c.jsx(uT,{})})]},w)):c.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune donnée"})})]}),c.jsx("p",{className:`${u[0]?"text-green-500":"text-red-500"}`,children:u[1]})]})},NL=()=>{window.scrollTo({top:0,behavior:"smooth"})};function kL(){return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-[var(--brand-black)] grid justify-center",children:c.jsx("a",{href:"/user/dashboard",children:c.jsx("img",{src:PT,className:"w-[150px] "})})}),c.jsx("div",{className:"",children:c.jsx(Ww,{})}),c.jsx(bm,{})]})}const AL=()=>{const t=new Date().toLocaleDateString("fr-FR");return RL(),c.jsxs("div",{className:"container mx-auto px-6 py-10 font-custom_1",children:[c.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:"Termes et Conditions"}),c.jsxs("section",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"1. Introduction"}),c.jsx("p",{className:"text-gray-600",children:"Bienvenue sur notre site web. En accédant et en utilisant ce site, vous acceptez les présentes conditions générales. Si vous n'acceptez pas ces termes, veuillez ne pas utiliser notre site."})]}),c.jsxs("section",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"2. Collecte et Utilisation des Données Personnelles"}),c.jsx("p",{className:"text-gray-600",children:"Nous collectons des informations personnelles lorsque vous utilisez notre formulaire de **contact** et notre système de **prise de rendez-vous**. Ces informations comprennent :"}),c.jsxs("ul",{className:"list-disc pl-5 text-gray-600 mt-2",children:[c.jsx("li",{children:"Nom et prénom"}),c.jsx("li",{children:"Adresse e-mail"}),c.jsx("li",{children:"Numéro de téléphone"}),c.jsx("li",{children:"Date et heure du rendez-vous"}),c.jsx("li",{children:"Service sélectionné"}),c.jsx("li",{children:"Message (dans la section Contact)"})]}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mt-4",children:"2.1 Confidentialité des Données"}),c.jsxs("p",{className:"text-gray-600",children:["- Nous nous engageons à protéger vos données et à ne pas les partager avec des tiers sans votre consentement.",c.jsx("br",{}),"- Vos informations ne seront utilisées que pour vous contacter, confirmer vos rendez-vous ou répondre à vos demandes.",c.jsx("br",{}),"- Vous avez le droit de demander la suppression de vos données en nous contactant via notre formulaire."]}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mt-4",children:"2.2 Sécurité"}),c.jsx("p",{className:"text-gray-600",children:"Nous mettons en œuvre des **mesures de sécurité** pour protéger vos informations contre tout accès non autorisé."})]}),c.jsxs("section",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"3. Prise de Rendez-Vous"}),c.jsx("p",{className:"text-gray-600",children:"Lorsque vous prenez rendez-vous via notre site :"}),c.jsxs("ul",{className:"list-disc pl-5 text-gray-600 mt-2",children:[c.jsx("li",{children:"Vous acceptez que votre réservation soit confirmée par e-mail ou SMS."}),c.jsx("li",{children:"Les modifications ou annulations doivent être effectuées **au moins 24 heures à l’avance**."}),c.jsx("li",{children:"Nous nous réservons le droit d’annuler ou de refuser une réservation si nécessaire."})]}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mt-4",children:"3.1 Absences et Retards"}),c.jsxs("p",{className:"text-gray-600",children:["- En cas d'absence **sans annulation préalable**, nous pouvons refuser de futures réservations.",c.jsx("br",{}),"- Un retard de plus de **15 minutes** peut entraîner une annulation du rendez-vous."]})]}),c.jsxs("section",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"4. Limitation de Responsabilité"}),c.jsxs("p",{className:"text-gray-600",children:["- Nous ne sommes pas responsables des erreurs techniques empêchant la prise de rendez-vous.",c.jsx("br",{}),"- Nous ne garantissons pas la disponibilité des créneaux horaires demandés.",c.jsx("br",{}),"- Notre site peut contenir des liens vers des services tiers (ex: réseaux sociaux), pour lesquels nous ne sommes pas responsables."]})]}),c.jsxs("section",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"5. Propriété Intellectuelle"}),c.jsxs("p",{className:"text-gray-600",children:["- Tout le contenu du site (logos, textes, images) est **notre propriété** et ne peut être utilisé sans autorisation.",c.jsx("br",{}),"- Toute reproduction ou utilisation sans autorisation peut faire l’objet de poursuites."]})]}),c.jsxs("section",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"6. Modification des Termes et Conditions"}),c.jsx("p",{className:"text-gray-600",children:"Nous nous réservons le droit de modifier ces termes à tout moment. Les modifications seront effectives dès leur publication sur le site."})]}),c.jsxs("section",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"7. Contact"}),c.jsx("p",{className:"text-gray-600",children:"Pour toute question, vous pouvez nous contacter via notre **formulaire de contact** ou par téléphone."})]}),c.jsxs("p",{className:"text-sm text-gray-500 mt-10 text-center",children:["📅 Dernière mise à jour : ",t]})]})},RL=()=>{window.scrollTo({top:0,behavior:"smooth"})};function PL(){return c.jsx("div",{className:"w-screen overflow-hidden",children:c.jsx(Ub,{children:c.jsx(RO,{children:c.jsxs(jb,{children:[c.jsxs(Et,{element:c.jsx(sL,{}),children:[c.jsx(Et,{path:"/",exact:!0,element:c.jsx(S3,{})}),c.jsx(Et,{path:"/a-propos",exact:!0,element:c.jsx(W3,{})}),c.jsx(Et,{path:"/rendez-vous",exact:!0,element:c.jsx(M3,{})}),c.jsx(Et,{path:"/termes-et-conditions",exact:!0,element:c.jsx(AL,{})})]}),c.jsxs(Et,{element:c.jsx(kL,{}),children:[c.jsx(Et,{path:"/admin/login",exact:!0,element:c.jsx(iL,{})}),c.jsx(Et,{path:"/user/dashboard",exact:!0,element:c.jsx(Fs,{children:c.jsx(oL,{})})}),c.jsx(Et,{path:"/user/profile",exact:!0,element:c.jsx(Fs,{children:c.jsx(lL,{})})}),c.jsx(Et,{path:"/user/rdvs",exact:!0,element:c.jsx(Fs,{children:c.jsx(xL,{})})}),c.jsx(Et,{path:"/users/rdvs/rapport",exact:!0,element:c.jsx(Fs,{children:c.jsx(DT,{})})}),c.jsx(Et,{path:"/admin/management",exact:!0,element:c.jsx(Fs,{children:c.jsx(Q3,{})})}),c.jsx(Et,{path:"/admin/inventory",exact:!0,element:c.jsx(Fs,{children:c.jsx(s3,{})})})]})]})})})})}Lw(document.getElementById("root")).render(c.jsx(C.StrictMode,{children:c.jsx(PL,{})}));
